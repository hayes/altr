{"version":3,"file":"bundle.js","sources":["/Users/mhayes/code/altr/node_modules/browserify/node_modules/browser-pack/_prelude.js","/Users/mhayes/code/altr/lib/browser.js","/Users/mhayes/code/altr/lib/index.js","/Users/mhayes/code/altr/lib/tags/placeholder.js","/Users/mhayes/code/altr/lib/tags/children.js","/Users/mhayes/code/altr/lib/tags/include.js","/Users/mhayes/code/altr/lib/tags/text.js","/Users/mhayes/code/altr/lib/tags/html.js","/Users/mhayes/code/altr/lib/tags/with.js","/Users/mhayes/code/altr/lib/tags/for.js","/Users/mhayes/code/altr/lib/tags/raw.js","/Users/mhayes/code/altr/lib/tags/if.js","/Users/mhayes/code/altr/lib/altr.js","/Users/mhayes/code/altr/lib/template-string.js","/Users/mhayes/code/altr/lib/element-node.js","/Users/mhayes/code/altr/lib/merge-hooks.js","/Users/mhayes/code/altr/lib/altr-extend.js","/Users/mhayes/code/altr/lib/text-node.js","/Users/mhayes/code/altr/lib/to-string.js","/Users/mhayes/code/altr/lib/run-hooks.js","/Users/mhayes/code/altr/lib/get-element.js","/Users/mhayes/code/altr/lib/destroy.js","/Users/mhayes/code/altr/lib/render.js","/Users/mhayes/code/altr/lib/remove.js","/Users/mhayes/code/altr/lib/raf.js","/Users/mhayes/code/altr/lib/set-children.js","/Users/mhayes/code/altr/node_modules/browserify/node_modules/events/events.js","/Users/mhayes/code/altr/lib/decorators.js","/Users/mhayes/code/altr/lib/attributes.js","/Users/mhayes/code/altr/node_modules/batch-queue/index.js","/Users/mhayes/code/altr/node_modules/dirtybit/lib/index.js","/Users/mhayes/code/altr/node_modules/extend/index.js","/Users/mhayes/code/altr/node_modules/dirtybit/lib/expression.js","/Users/mhayes/code/altr/node_modules/dirtybit/lib/remove.js","/Users/mhayes/code/altr/node_modules/dirtybit/lib/parse.js","/Users/mhayes/code/altr/node_modules/dirtybit/lib/split.js","/Users/mhayes/code/altr/node_modules/dirtybit/lib/watch.js","/Users/mhayes/code/altr/node_modules/dirtybit/lib/hash.js","/Users/mhayes/code/altr/node_modules/dirtybit/lib/types/index.js","/Users/mhayes/code/altr/node_modules/dirtybit/lib/types/brackets.js","/Users/mhayes/code/altr/node_modules/dirtybit/lib/types/dot-path.js","/Users/mhayes/code/altr/node_modules/dirtybit/lib/types/filters.js","/Users/mhayes/code/altr/node_modules/dirtybit/lib/types/partial.js","/Users/mhayes/code/altr/node_modules/dirtybit/lib/types/ternary.js","/Users/mhayes/code/altr/node_modules/dirtybit/lib/types/parens.js","/Users/mhayes/code/altr/node_modules/dirtybit/lib/types/values.js","/Users/mhayes/code/altr/node_modules/dirtybit/lib/types/binary.js","/Users/mhayes/code/altr/node_modules/dirtybit/lib/types/unary.js","/Users/mhayes/code/altr/node_modules/dirtybit/lib/types/list.js"],"names":["module","exports","global","altr","require","placeholder","childrenTag","includeTag","textTag","htmlTag","withTag","forTag","rawTag","ifTag","addTag","original","getter","lookups","update","val","nodeName","current","parentNode","replaceChild","_altrPlaceholder","this","batch","add","on","children","el","nodes","Array","isArray","filter","is_node","i","l","length","setChildren","call","innerHTML","bind","nodeType","include","set","data","content","remove","insert","initNodes","childNodes","state","done","removeListeners","push","removing","destroy","listener","pop","removeListener","text","textContent","html","accessor","getAttribute","forEach","getElementsByTagName","run","script","fixed","document","createElement","parent","attrs","attributes","setAttribute","name","value","insertBefore","removeChild","_val","Object","create","parts","split","hooks","forHandler","root","args","updateChildren","itemData","prop","items","newItems","index","newChildren","removed","matched","added","domNodes","findIndex","unique","makeChild","concat","slice","flatten","runUpdates","d","indexOf","template","cloneNode","runDomUpdates","runHooks","match","forRegexp","console","error","key","mergeHooks","list","reduce","all","part","decorators","toggle","lastVal","hidden","createComment","first","show","origin","options","helpers","extend","sync","tagRegExp","makeTagRegExp","delimiters","doc","domModule","dirtybit","filters","raf","runBatch","Buffer","toString","temp","createDocumentFragment","firstChild","appendChild","rootNodes","_nodes","_lookups","join","node","initNode","prototype","Boolean","node_handlers","DOCUMENT_FRAGMENT_NODE","addHelper","helper","attr","tag","tags","tagList","constructor","appendTo","getEl","fn","addDecorator","emit","_delimiters","RegExp","EE","EventEmitter","templateString","elementNode","altrExtend","textNode","render","getElement","into","templatString","change","setPart","idx","next","remaining","createElementNode","altr_tags","lastIndexOf","createAttr","raw","createDecorators","merge","each","type","ready","base","extension","baseOptions","addFilter","initTextNode","clone","map","COMMENT_NODE","TEXT_NODE","outerHTML","get","_el","Error","includes","instance","requestAnimationFrame","callback","timeout","setTimeout","webkitRequestAnimationFrame","mozRequestAnimationFrame","prev","_events","_maxListeners","undefined","isFunction","arg","isNumber","isObject","isUndefined","defaultMaxListeners","setMaxListeners","n","isNaN","TypeError","er","handler","len","listeners","arguments","apply","addListener","m","newListener","warned","trace","once","g","fired","position","splice","removeAllListeners","ret","listenerCount","emitter","createDecorator","expression","decorator","rawAttribute","altrAttribute","removeAttribute","altrProperty","Batch","jobs","queud","queue","self","queued","DirtyBit","partials","rootKey","rootExpression","Expression","expressions","handlers","handlerList","removable","updating","report","lookup","changed","j","l2","trim","str","replace","_lookup","watch","types","parse","hash","parsed","hasOwn","hasOwnProperty","isPlainObject","obj","setInterval","has_own_constructor","has_is_property_of_method","src","copy","copyIsArray","target","deep","deps","dependents","removeExpression","dep","order","_pairs","pairs","default_pairs","inString","layers","right","left","seen","keys","createHandler","getDep","createExpression","echo","proxy","charCodeAt","brackets","dot_path","partial","ternary","parens","values","binary","unary","has_bracket","test","pair","reverse","inner","valid_path","filter_regexp","regexp","ternary_regexp","rest","ok","parens_regexp","body","patched","vals","number_regexp","string_regexp","true","false","null","tests","op","ops","createOp","Function","updateIn","updateInstanceof","create_op","is_list"],"mappings":"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","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error(\"Cannot find module '\"+o+\"'\")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","module.exports = global.altr = require('./index')\n","var placeholder = require('./tags/placeholder')\n  , childrenTag = require('./tags/children')\n  , includeTag = require('./tags/include')\n  , textTag = require('./tags/text')\n  , htmlTag = require('./tags/html')\n  , withTag = require('./tags/with')\n  , forTag = require('./tags/for')\n  , rawTag = require('./tags/raw')\n  , ifTag = require('./tags/if')\n  , altr = require('./altr')\n\nmodule.exports = altr\n\naltr.addTag('altr-children', childrenTag)\naltr.addTag('altr-replace', placeholder)\naltr.addTag('altr-include', includeTag)\naltr.addTag('altr-text', textTag)\naltr.addTag('altr-html', htmlTag)\naltr.addTag('altr-with', withTag)\naltr.addTag('altr-for', forTag)\naltr.addTag('altr-raw', rawTag)\naltr.addTag('altr-if', ifTag)\n","module.exports = placeholder\n\nfunction placeholder(original, getter, lookups) {\n  var current = original\n    , altr = this\n\n  this.batch.add(lookups.on(getter, update))\n\n  function update(val) {\n    if(!val || !val.nodeName || val === current) {\n      return\n    }\n\n    current.parentNode.replaceChild(val, current)\n    original._altrPlaceholder = val\n    current = val\n  }\n}\n","var setChildren = require('../set-children')\n\nmodule.exports = children\n\nfunction children(el, getter, lookups) {\n  var current = []\n\n  el.innerHTML = ''\n  this.batch.add(lookups.on(getter, update.bind(this)))\n\n  function update(val) {\n    var nodes = (Array.isArray(val) ? val : [val]).filter(is_node)\n\n    for(var i = 0, l = nodes.length; i < l; ++i) {\n      if(nodes[i] !== current[i]) {\n        break\n      }\n    }\n\n    if(i === nodes.length === current.length) {\n      return\n    }\n\n    current = nodes\n    setChildren.call(this, el, current)\n  }\n}\n\nfunction is_node(el) {\n  return el && el.nodeType\n}\n","module.exports = include\n\nfunction include(el, getter, lookups) {\n  var removeListeners = []\n  var children = null\n  var content = ''\n  var altr = this\n\n  lookups.on(getter, set)\n  lookups.on('this', update)\n\n  return {insert: insert, remove: remove, destroy: destroy}\n\n  function set(data) {\n    content = typeof data === 'string' ? data : ''\n    if(children) remove(el, insert)\n  }\n\n  function insert() {\n    if(children) {\n      return\n    }\n\n    el.innerHTML = content\n    children = altr.initNodes(el.childNodes, null, lookups.state)\n  }\n\n  function remove(el, done) {\n    if(!children) {\n      return done()\n    }\n\n    if(removeListeners.push(done) > 1) {\n      return\n    }\n\n    children = null\n    removing = true\n    altr.destroy(children, el, function() {\n      var listener\n\n      if(!children) {\n        el.innerHTML = ''\n      }\n\n      while(listener = removeListeners.pop()) {\n        listener()\n      }\n    })\n\n  }\n\n  function update(state) {\n    children && children.lookups.update(state)\n  }\n\n  function destroy() {\n    lookups.removeListener('this', update)\n    lookups.removeListeners(getter, set)\n  }\n}\n","module.exports = text\n\nfunction text(el, getter, lookups) {\n  this.batch.add(lookups.on(getter, update))\n\n  function update(val) {\n    el.textContent = typeof val === 'undefined' ? '' : val\n  }\n}\n","module.exports = html\n\nfunction html(el, accessor, lookups) {\n  this.batch.add(lookups.on(accessor, update))\n\n  function update(val) {\n    el.innerHTML = typeof val === 'undefined' ? '' : val\n\n    if(el.getAttribute('altr-run-scripts')) {\n      [].forEach.call(el.getElementsByTagName('script'), run)\n    }\n  }\n}\n\nfunction run(script) {\n  var fixed = document.createElement('script')\n    , parent = script.parentNode\n    , attrs = script.attributes\n    , src\n\n  for(var i = 0, l = attrs.length; i < l; ++i) {\n    fixed.setAttribute(attrs[i].name, attrs[i].value)\n  }\n\n  fixed.textContent = script.textContent\n  parent.insertBefore(fixed, script)\n  parent.removeChild(script)\n}\n","module.exports = withTag\n\nfunction withTag(el, getter, lookups) {\n  var children = this.initNodes(el.childNodes)\n    , parts = getter.split(' as ')\n\n  lookups.on(parts[0], update)\n\n  return children.hooks\n\n  function update(_val) {\n    var val = Object.create(lookups.state)\n\n    val[parts[1]] = _val\n    children.lookups.update(val)\n  }\n}\n","var setChildren = require('../set-children')\nvar forRegexp = /^(.*?)\\s+in\\s+(.*$)/\n\nmodule.exports = forHandler\n\nfunction forHandler(root, args, lookups) {\n  var template = root.cloneNode(true)\n  var parts = args.match(forRegexp)\n  var domNodes = []\n  var children = []\n  var altr = this\n  var items = []\n\n  if(!parts) {\n    return console.error('invalid `for` tag: ' + args)\n  }\n\n  var runUpdates = altr.batch.add(runDomUpdates)\n\n  root.innerHTML = ''\n\n  var unique = parts[1].split(':')[1]\n  var prop = parts[1].split(':')[0]\n  var key = parts[2]\n\n\n  lookups.on(key, update)\n\n  return altr.mergeHooks(function() {\n    return flatten(children)\n  })\n\n  function updateChildren(data) {\n    var itemData\n\n    for(var i = 0, l = children.length; i < l; ++i) {\n      itemData = Object.create(data)\n      itemData[prop] = items[i]\n      itemData['$index'] = i\n      children[i].lookups.update(itemData)\n    }\n  }\n\n  function update(newItems) {\n    if(!Array.isArray(newItems)) {\n      newItems = []\n    }\n\n    var newChildren = new Array(newItems.length)\n    var removed = []\n    var matched = {}\n    var added = []\n    var index\n\n    domNodes = []\n\n    for(var i = 0, l = newItems.length; i < l; ++i) {\n      index = findIndex(items, newItems[i], unique)\n\n      if(index !== -1) {\n        newChildren[i] = children[index]\n        items[index] = children[index] = matched\n      } else {\n        added.push(newChildren[i] = makeChild())\n      }\n\n      domNodes = domNodes.concat(newChildren[i].nodes)\n    }\n\n    for(var i = 0, l = children.length; i < l; ++i) {\n      if(children[i] !== matched) {\n        removed.push(children[i])\n      }\n    }\n\n    children = newChildren.slice()\n    items = newItems.slice()\n    updateChildren(lookups.state)\n    altr.destroy(flatten(removed), root, runUpdates.bind(\n        altr\n      , domNodes\n      , flatten(added)\n    ))\n  }\n\n  function findIndex(items, d, unique) {\n    if(!unique) {\n      return items.indexOf(d)\n    }\n\n    for(var i = 0, l = items.length; i < l; ++i) {\n      if(items[i][unique] === d[unique]) {\n        return i\n      }\n    }\n\n    return -1\n  }\n\n  function makeChild() {\n    return altr.initNodes(template.cloneNode(true).childNodes)\n  }\n\n  function runDomUpdates(children, added) {\n    setChildren.call(this, root, children)\n    altr.runHooks(added, 'insert', root)\n  }\n}\n\nfunction flatten(list) {\n  return list.reduce(function(all, part) {\n    return part.hooks ? all.concat(part.hooks) : all\n  }, [])\n}","module.exports = function raw() {}\n","module.exports = ifTag\n\nfunction ifTag(el, getter, lookups, decorators) {\n  var placeholder = this.document.createComment('altr-if-placeholder')\n  var children = this.initNodes(el.childNodes)\n  var all = children.hooks.concat(decorators)\n  var lastVal = null\n  var hidden = null\n  var first = true\n  var altr = this\n\n  var update = this.batch.add(function(show, origin) {\n    if(!hidden && !show) {\n      el.parentNode.replaceChild(placeholder, el)\n      el._altrPlaceholder = placeholder\n      hidden = true\n    } else if(hidden && show) {\n      placeholder.parentNode.replaceChild(el, placeholder)\n      altr.runHooks(all, 'insert', origin)\n      delete el._altrPlaceholder\n      hidden = false\n    } else if(first) {\n      first = false\n      altr.runHooks(all, 'insert', origin)\n    }\n  })\n\n  lookups.on(getter, toggle, true)\n\n  return {\n      insert: insert\n    , remove: remove\n    , destroy: destroy\n  }\n\n  function destroy(el) {\n    altr.runHooks(children.hooks, 'destroy', el)\n  }\n\n  function toggle(val) {\n    lastVal = val\n\n    if(val) {\n      update(true, el)\n      children.lookups.update(lookups.state)\n    } else {\n      altr.remove(all, el, function() {\n        return update(false, el)\n      })\n    }\n  }\n\n  function insert(el) {\n    if(lastVal) {\n      update(true, el)\n    }\n  }\n\n  function remove(el, done) {\n    if(hidden) {\n      done()\n\n      return update(false)\n    }\n\n    altr.remove(children.hooks, el, function() {\n      update(false)\n      done()\n    })\n  }\n}\n\n","var EE = require('events').EventEmitter\nvar batch = require('batch-queue')\nvar dirtybit = require('dirtybit')\nvar extend = require('extend')\n\nvar templateString = require('./template-string')\nvar elementNode = require('./element-node')\nvar mergeHooks = require('./merge-hooks')\nvar altrExtend = require('./altr-extend')\nvar textNode = require('./text-node')\nvar toString = require('./to-string')\nvar runHooks = require('./run-hooks')\nvar getEl = require('./get-element')\nvar destroy = require('./destroy')\nvar render = require('./render')\nvar remove = require('./remove')\nvar raf = require('./raf')\n\n// dynamic require so it does not make it into the browserify bundle\nvar domModule = 'micro-dom'\n\nmodule.exports = altr\n\naltr.helpers = {}\naltr.decorators = {}\n\naltr.render = render\naltr.addTag = addTag\naltr.extend = altrExtend\naltr.addHelper = addHelper\naltr.addDecorator = addDecorator\n\nfunction altr(root, data, options) {\n  if(!(this instanceof altr)) {\n    return new altr(root, data, options)\n  }\n\n  var options = options || {}\n\n  this.helpers = extend(\n      false\n    , Object.create(altr.helpers)\n    , options.helpers || {}\n  )\n\n  this.decorators = extend(\n      false\n    , Object.create(altr.decorators)\n    , options.decorators || {}\n  )\n\n  this.root = root\n  this.sync = !!options.sync\n  this.tagRegExp = makeTagRegExp(options.delimiters)\n  this.document = options.doc || global.document || require(domModule).document\n  this.lookups = dirtybit(data, {filters: this.helpers})\n\n  this.batch = batch((function() {\n    if(!this.sync) {\n      raf(this.runBatch.bind(this))\n    }\n  }).bind(this))\n\n  if(global.Buffer && root instanceof global.Buffer) {\n    root = root.toString()\n  }\n\n  if(typeof root === 'string') {\n    var temp = this.document.createElement('div')\n\n    temp.innerHTML = root\n    this.root = this.document.createDocumentFragment()\n\n    while(temp.firstChild) {\n      this.root.appendChild(temp.firstChild)\n    }\n  }\n\n  this.children = this.initNodes(this.rootNodes(), this.lookups)\n  this.runHooks(this.children.hooks, 'insert', null)\n  this.runBatch()\n}\n\naltr.prototype = Object.create(EE.prototype)\naltr.prototype.constructor = altr\n\naltr.prototype.templateString = templateString\naltr.prototype.addDecorator = addDecorator\naltr.prototype.mergeHooks = mergeHooks\naltr.prototype.initNodes = initNodes\naltr.prototype.rootNodes = rootNodes\naltr.prototype.addHelper = addHelper\naltr.prototype.runBatch = runBatch\naltr.prototype.toString = toString\naltr.prototype.runHooks = runHooks\naltr.prototype.getElement = getEl\naltr.prototype.destroy = destroy\naltr.prototype.remove = remove\naltr.prototype.into = appendTo\naltr.prototype.update = update\naltr.prototype.tagList = []\naltr.prototype.tags = {}\n\nvar node_handlers = {}\n\nnode_handlers[1] = elementNode\nnode_handlers[3] = textNode\n\nfunction update(data, sync) {\n  this.state = data\n  this.lookups.update(data)\n\n  if(sync || this.sync) {\n    this.runBatch()\n  }\n}\n\nfunction initNodes(_nodes, _lookups, state) {\n  var altr = this\n  var lookups = _lookups || dirtybit(state, {filters: this.helpers})\n  var nodes = Array.prototype.slice.call(_nodes)\n  var hooks = nodes.reduce(join, []).filter(Boolean)\n\n  return {hooks: hooks, lookups: lookups, nodes: nodes}\n\n  function join(list, node) {\n    var hooks = initNode.call(altr, lookups, node)\n\n    return hooks ? list.concat(hooks) : list\n  }\n}\n\nfunction initNode(lookups, el) {\n  return node_handlers[el.nodeType] ?\n    node_handlers[el.nodeType].call(this, el, lookups) :\n    el.childNodes && el.childNodes.length ?\n    this.initNodes(lookups, el.childNodes) :\n    null\n}\n\nfunction rootNodes() {\n  return this.root.nodeType === this.document.DOCUMENT_FRAGMENT_NODE ?\n    [].slice.call(this.root.childNodes) :\n    [this.root]\n}\n\nfunction addHelper(name, helper) {\n  this.helpers[name] = helper\n}\n\nfunction addTag(attr, tag) {\n  this.prototype.tags[attr] = tag\n  this.prototype.tagList.push({\n      attr: attr\n    , constructor: tag\n  })\n}\n\nfunction appendTo(node) {\n  var rootNodes = this.rootNodes()\n\n  for(var i = 0, l = rootNodes.length; i < l; ++i) {\n    node.appendChild(getEl(rootNodes[i]))\n  }\n}\n\nfunction addHelper(name, fn) {\n  return this.helpers[name] = fn\n}\n\nfunction addDecorator(name, fn) {\n  return this.decorators[name] = fn\n}\n\nfunction runBatch() {\n  this.batch.run() && this.emit('update', this.state)\n}\n\nfunction makeTagRegExp(_delimiters) {\n  var delimiters = _delimiters || ['{{', '}}']\n\n  return new RegExp(delimiters[0] + '\\\\s*(.*?)\\\\s*' + delimiters[1])\n}\n","module.exports = templatString\n\nfunction templatString(template, change, lookups) {\n  if(!template.match(this.tagRegExp)) {\n    return\n  }\n\n  var remaining = template\n    , parts = []\n    , hooks = []\n    , index\n    , next\n\n  while(remaining && (next = remaining.match(this.tagRegExp))) {\n    if(index = remaining.indexOf(next[0])) {\n      parts.push(remaining.slice(0, index))\n    }\n\n    parts.push('')\n    remaining = remaining.slice(index + next[0].length)\n    lookups.on(next[1], setPart.bind(this, parts.length - 1))\n  }\n\n  if(remaining) {\n    setPart(parts.length, remaining)\n  }\n\n  function setPart(idx, val) {\n    parts[idx] = val\n\n    change(parts.join(''))\n  }\n}\n","var createDecorators = require('./decorators')\n  , createAttr = require('./attributes')\n\nmodule.exports = createElementNode\n\nfunction createElementNode(el, lookups) {\n  var decorators = []\n  var altr = this\n  var attr\n\n  var attrs = Array.prototype.slice.call(el.attributes)\n  var decorators = []\n  var altr_tags = {}\n  var tags = {}\n\n  for(var i = 0, l = attrs.length; i < l; ++i) {\n    if(altr.tags[attrs[i].name]) {\n      altr_tags[attrs[i].name] = attrs[i].value\n    } else if(altr.decorators[attrs[i].name]) {\n      decorators.push(attrs[i])\n    } else if(!attrs[i].name.lastIndexOf('altr-attr-', 0)) {\n      createAttr.altr.call(this, el, attrs[i], lookups)\n    } else if(!attrs[i].name.lastIndexOf('altr-prop-', 0)) {\n      createAttr.prop.call(this, el, attrs[i], lookups)\n    } else {\n      createAttr.raw.call(this, el, attrs[i], lookups)\n    }\n  }\n\n  var hooks = createDecorators.call(altr, el, decorators, lookups)\n\n  for(var i = 0, l = altr.tagList.length; i < l; ++i) {\n    if(attr = altr_tags[altr.tagList[i].attr]) {\n      return hooks.concat([\n          altr.tagList[i].constructor.call(altr, el, attr, lookups, hooks) || {}\n      ])\n    }\n  }\n\n  return hooks.concat(altr.initNodes(el.childNodes, lookups).hooks)\n}\n","module.exports = merge\n\nfunction merge(children) {\n  var altr = this\n\n  return {\n      insert: each.bind(null, 'insert')\n    , destroy: each.bind(null, 'destroy')\n    , remove: remove\n  }\n\n  function each(type, el) {\n    var nodes = children()\n\n    for(var i = 0, l = nodes.length; i < l; i++) {\n      nodes[i][type] && nodes[i][type](el)\n    }\n  }\n\n  function remove(el, ready) {\n    altr.remove(children(), el, ready)\n  }\n}","var extend = require('extend')\n\nmodule.exports = altrExtend\n\nfunction altrExtend(base, options) {\n  var baseOptions = extend(true, base, options)\n  var altr = this\n\n  extension.render = altr.render.bind(altr, baseOptions)\n  extension.extend = altr.extend.bind(altr)\n  extension.addTag = altr.addTag.bind(altr)\n  extension.include = altr.include.bind(altr)\n  extension.addFilter = altr.addFilter.bind(altr)\n  extension.addDecorator = altr.addDecorator.bind(altr)\n\n  return extension\n\n  function extension(root, state, options) {\n    return new altr(root, state, extend(\n        true\n      , Object.create(baseOptions)\n      , options || {}\n    ))\n  }\n}","module.exports = initTextNode\n\nfunction initTextNode(el, lookups) {\n  this.templateString(\n      el.textContent\n    , this.batch.add(update)\n    , lookups\n  )\n\n  function update(val) {\n    el.textContent = val\n  }\n}\n","module.exports = toString\n\nfunction toString() {\n  return this.rootNodes().map(function(node) {\n    switch(node.nodeType) {\n      case this.document.DOCUMENT_FRAGMENT_NODE:\n      case this.document.COMMENT_NODE: return clone.call(this, node)\n      case this.document.TEXT_NODE: return node.textContent\n      default: return node.outerHTML\n    }\n  }, this).join('')\n\n  function clone(node) {\n    var temp = this.document.createElement('div')\n\n    temp.appendChild(node.cloneNode(true))\n\n    return temp.innerHTML\n  }\n}\n","module.exports = runHooks\n\nfunction runHooks(hooks, type, el) {\n  for(var i = 0, l = hooks.length; i < l; i++) {\n    hooks[i][type] && hooks[i][type](el)\n  }\n}\n","module.exports = get\n\nfunction get(_el) {\n  var el = _el\n\n  while(el && el._altrPlaceholder) {\n    el = el._altrPlaceholder\n\n    if(el === _el) {\n      throw new Error('placeholder circular refference')\n    }\n  }\n\n  return el\n}\n","module.exports = destroy\n\nfunction destroy(children, el, done) {\n  var altr = this\n\n  altr.remove(children, el, function(el) {\n    altr.runHooks(children, 'destroy', el)\n    done()\n  })\n}\n","module.exports = render\n\nfunction render(template, state, el) {\n  if(this.includes[template]) {\n    template = this.includes[template]\n  }\n\n  var instance = this(template)\n\n  instance.update(state || {}, true)\n\n  if(el) {\n    instance.into(el)\n  }\n\n  return instance\n}\n","module.exports = remove\n\nfunction remove(hooks, el, ready) {\n  var remaining = hooks.length\n  var c = 0\n\n  for(var i = 0, l = remaining; i < l; i++) {\n    hooks[i].remove ? hooks[i].remove(el, done) : --remaining\n  }\n\n  if(!remaining) {\n    ready()\n  }\n\n  function done() {\n    if(!--remaining) {\n      remaining = -1\n      ready()\n    }\n  }\n}","module.exports = requestAnimationFrame\n\nfunction requestAnimationFrame(callback) {\n  var raf = global.requestAnimationFrame ||\n    global.webkitRequestAnimationFrame ||\n    global.mozRequestAnimationFrame ||\n    timeout\n\n  return raf(callback)\n\n  function timeout(callback) {\n    return setTimeout(callback, 1000 / 60)\n  }\n}\n","var get = require('./get-element')\n\nmodule.exports = setChildren\n\nfunction setChildren(root, nodes) {\n  var prev = null\n    , el\n\n  for(var i = nodes.length - 1; i >= 0; --i) {\n    el = get(nodes[i])\n    root.insertBefore(el, prev)\n    prev = el\n  }\n\n  while((el = root.firstChild) !== prev) {\n    root.removeChild(el)\n  }\n}\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nfunction EventEmitter() {\n  this._events = this._events || {};\n  this._maxListeners = this._maxListeners || undefined;\n}\nmodule.exports = EventEmitter;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nEventEmitter.defaultMaxListeners = 10;\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function(n) {\n  if (!isNumber(n) || n < 0 || isNaN(n))\n    throw TypeError('n must be a positive number');\n  this._maxListeners = n;\n  return this;\n};\n\nEventEmitter.prototype.emit = function(type) {\n  var er, handler, len, args, i, listeners;\n\n  if (!this._events)\n    this._events = {};\n\n  // If there is no 'error' event listener then throw.\n  if (type === 'error') {\n    if (!this._events.error ||\n        (isObject(this._events.error) && !this._events.error.length)) {\n      er = arguments[1];\n      if (er instanceof Error) {\n        throw er; // Unhandled 'error' event\n      }\n      throw TypeError('Uncaught, unspecified \"error\" event.');\n    }\n  }\n\n  handler = this._events[type];\n\n  if (isUndefined(handler))\n    return false;\n\n  if (isFunction(handler)) {\n    switch (arguments.length) {\n      // fast cases\n      case 1:\n        handler.call(this);\n        break;\n      case 2:\n        handler.call(this, arguments[1]);\n        break;\n      case 3:\n        handler.call(this, arguments[1], arguments[2]);\n        break;\n      // slower\n      default:\n        len = arguments.length;\n        args = new Array(len - 1);\n        for (i = 1; i < len; i++)\n          args[i - 1] = arguments[i];\n        handler.apply(this, args);\n    }\n  } else if (isObject(handler)) {\n    len = arguments.length;\n    args = new Array(len - 1);\n    for (i = 1; i < len; i++)\n      args[i - 1] = arguments[i];\n\n    listeners = handler.slice();\n    len = listeners.length;\n    for (i = 0; i < len; i++)\n      listeners[i].apply(this, args);\n  }\n\n  return true;\n};\n\nEventEmitter.prototype.addListener = function(type, listener) {\n  var m;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events)\n    this._events = {};\n\n  // To avoid recursion in the case that type === \"newListener\"! Before\n  // adding it to the listeners, first emit \"newListener\".\n  if (this._events.newListener)\n    this.emit('newListener', type,\n              isFunction(listener.listener) ?\n              listener.listener : listener);\n\n  if (!this._events[type])\n    // Optimize the case of one listener. Don't need the extra array object.\n    this._events[type] = listener;\n  else if (isObject(this._events[type]))\n    // If we've already got an array, just append.\n    this._events[type].push(listener);\n  else\n    // Adding the second element, need to change to array.\n    this._events[type] = [this._events[type], listener];\n\n  // Check for listener leak\n  if (isObject(this._events[type]) && !this._events[type].warned) {\n    var m;\n    if (!isUndefined(this._maxListeners)) {\n      m = this._maxListeners;\n    } else {\n      m = EventEmitter.defaultMaxListeners;\n    }\n\n    if (m && m > 0 && this._events[type].length > m) {\n      this._events[type].warned = true;\n      console.error('(node) warning: possible EventEmitter memory ' +\n                    'leak detected. %d listeners added. ' +\n                    'Use emitter.setMaxListeners() to increase limit.',\n                    this._events[type].length);\n      if (typeof console.trace === 'function') {\n        // not supported in IE 10\n        console.trace();\n      }\n    }\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.once = function(type, listener) {\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  var fired = false;\n\n  function g() {\n    this.removeListener(type, g);\n\n    if (!fired) {\n      fired = true;\n      listener.apply(this, arguments);\n    }\n  }\n\n  g.listener = listener;\n  this.on(type, g);\n\n  return this;\n};\n\n// emits a 'removeListener' event iff the listener was removed\nEventEmitter.prototype.removeListener = function(type, listener) {\n  var list, position, length, i;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events || !this._events[type])\n    return this;\n\n  list = this._events[type];\n  length = list.length;\n  position = -1;\n\n  if (list === listener ||\n      (isFunction(list.listener) && list.listener === listener)) {\n    delete this._events[type];\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n\n  } else if (isObject(list)) {\n    for (i = length; i-- > 0;) {\n      if (list[i] === listener ||\n          (list[i].listener && list[i].listener === listener)) {\n        position = i;\n        break;\n      }\n    }\n\n    if (position < 0)\n      return this;\n\n    if (list.length === 1) {\n      list.length = 0;\n      delete this._events[type];\n    } else {\n      list.splice(position, 1);\n    }\n\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.removeAllListeners = function(type) {\n  var key, listeners;\n\n  if (!this._events)\n    return this;\n\n  // not listening for removeListener, no need to emit\n  if (!this._events.removeListener) {\n    if (arguments.length === 0)\n      this._events = {};\n    else if (this._events[type])\n      delete this._events[type];\n    return this;\n  }\n\n  // emit removeListener for all listeners on all events\n  if (arguments.length === 0) {\n    for (key in this._events) {\n      if (key === 'removeListener') continue;\n      this.removeAllListeners(key);\n    }\n    this.removeAllListeners('removeListener');\n    this._events = {};\n    return this;\n  }\n\n  listeners = this._events[type];\n\n  if (isFunction(listeners)) {\n    this.removeListener(type, listeners);\n  } else {\n    // LIFO order\n    while (listeners.length)\n      this.removeListener(type, listeners[listeners.length - 1]);\n  }\n  delete this._events[type];\n\n  return this;\n};\n\nEventEmitter.prototype.listeners = function(type) {\n  var ret;\n  if (!this._events || !this._events[type])\n    ret = [];\n  else if (isFunction(this._events[type]))\n    ret = [this._events[type]];\n  else\n    ret = this._events[type].slice();\n  return ret;\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  var ret;\n  if (!emitter._events || !emitter._events[type])\n    ret = 0;\n  else if (isFunction(emitter._events[type]))\n    ret = 1;\n  else\n    ret = emitter._events[type].length;\n  return ret;\n};\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\n","module.exports = decorators\n\nfunction decorators(el, attrs, lookups) {\n  var altr = this\n  var hooks = []\n\n  return attrs.map(createDecorator)\n\n  function createDecorator(attr) {\n    var decorator = altr.decorators[attr.name].call(altr, el)\n    var expression = '[' + attr.value + ']'\n\n    if(!decorator) {\n      return\n    }\n\n    var hooks = {insert: decorator.insert, remove: decorator.remove}\n\n    if(decorator.update) {\n      lookups.on(expression, update)\n    }\n\n    hooks.destroy = destroy\n\n    return hooks\n\n    function destroy() {\n      lookups.removeListener(expression, update)\n\n      if(decorator.destroy) {\n        decorator.destroy()\n      }\n    }\n\n    function update(args) {\n      decorator.update.apply(null, args)\n    }\n  }\n}\n","module.exports.raw = rawAttribute\nmodule.exports.altr = altrAttribute\nmodule.exports.prop = altrProperty\n\nfunction rawAttribute(el, attr, lookups) {\n  this.templateString(\n      attr.value\n    , this.batch.add(el.setAttribute.bind(el, attr.name))\n    , lookups\n  )\n}\n\nfunction altrAttribute(el, attr, lookups) {\n  var name = attr.name.slice('altr-attr-'.length)\n\n  lookups.on(attr.value, this.batch.add(update))\n  el.removeAttribute(attr.name)\n\n  function update(val) {\n    if(!val && val !== '' && val !== 0) {\n      return el.removeAttribute(name)\n    }\n\n    el.setAttribute(name, val)\n  }\n}\n\nfunction altrProperty(el, attr, lookups) {\n  var name = attr.name.slice('altr-prop-'.length)\n\n  el.removeAttribute(attr.name)\n  lookups.on(attr.value, this.batch.add(update))\n\n  function update(val) {\n    el[name] = val\n  }\n}\n","module.exports = Batch\n\nfunction Batch(ready, all) {\n  if(!(this instanceof Batch)) {\n    return new Batch(ready, all)\n  }\n\n  this.jobs = []\n  this.all = all\n  this.ready = ready\n  this.queud = false\n  this.run = this.run.bind(this)\n}\n\nBatch.prototype.queue = queue\nBatch.prototype.add = add\nBatch.prototype.run = run\n\nfunction add(fn) {\n  var queued = false\n    , batch = this\n    , self\n    , args\n\n  return queue\n\n  function queue() {\n    args = [].slice.call(arguments)\n    self = this\n\n    if(queued) {\n      return batch.all && batch.ready()\n    }\n\n    queued = true\n    batch.queue(run)\n  }\n\n  function run() {\n    queued = false\n    fn.apply(self, args)\n  }\n}\n\nfunction queue(fn) {\n  this.jobs.push(fn)\n\n  if(this.all || !this.queued) {\n    this.queued = true\n    this.ready(this)\n  }\n}\n\nfunction run() {\n  var jobs = this.jobs\n\n  this.jobs = []\n  this.queued = false\n\n  for(var i = 0, l = jobs.length; i < l; ++i) {\n    jobs[i]()\n  }\n\n  return !!jobs.length\n}\n","var Expression = require('./expression')\r\nvar remove = require('./remove')\r\nvar types = require('./types')\r\nvar parse = require('./parse')\r\nvar split = require('./split')\r\nvar watch = require('./watch')\r\nvar hash = require('./hash')\r\n\r\nmodule.exports = DirtyBit\r\n\r\nfunction DirtyBit(state, options) {\r\n  if(!(this instanceof DirtyBit)) {\r\n    return new DirtyBit(state, options)\r\n  }\r\n\r\n  this.options = options || {}\r\n\r\n  this.partials = {}\r\n  this.state = state || {}\r\n  this.filters = Object.create(this.options.filters || null)\r\n  this.rootKey = this.options.rootKey\r\n\r\n  this.rootExpression = new Expression('this', [], this.state)\r\n\r\n  this.expressions = {}\r\n  this.handlers = {}\r\n  this.handlerList = []\r\n\r\n  this.expressions['this'] = this.rootExpression\r\n  this.rootExpression.removable = false\r\n\r\n  if(this.rootKey) {\r\n    this.expressions[this.rootKey] = this.rootExpression\r\n  }\r\n\r\n  this.updating = false\r\n}\r\n\r\nDirtyBit.prototype.removeListener = remove\r\nDirtyBit.prototype.addFilter = addFilter\r\nDirtyBit.prototype.update = update\r\nDirtyBit.prototype.report = report\r\nDirtyBit.prototype.types = types\r\nDirtyBit.prototype.split = split\r\nDirtyBit.prototype.parse = parse\r\nDirtyBit.prototype.watch = watch\r\nDirtyBit.prototype.hash = hash\r\nDirtyBit.prototype.trim = trim\r\nDirtyBit.prototype.on = on\r\n\r\nDirtyBit.parsed = {}\r\n\r\nfunction update(state) {\r\n  this.state = state\r\n  this.updating = true\r\n  this.rootExpression.change(state)\r\n  this.updating = false\r\n  this.report()\r\n}\r\n\r\nfunction report() {\r\n  var expression\r\n  var lookup\r\n\r\n  for(var i = 0, l = this.handlerList.length; i < l; ++i) {\r\n    lookup = this.handlerList[i]\r\n    expression = this.expressions[lookup]\r\n\r\n    if(!expression.changed) {\r\n      continue\r\n    }\r\n\r\n    for(var j = 0, l2 = this.handlers[lookup].length; j < l2; ++j) {\r\n      this.handlers[lookup][j](expression.value)\r\n    }\r\n\r\n    expression.changed = false\r\n  }\r\n}\r\n\r\nfunction addFilter(name, filter) {\r\n  this.filters[name] = filter\r\n}\r\n\r\nfunction trim(str) {\r\n  return str.replace(/^\\s+|\\s+$/g, '')\r\n}\r\n\r\nfunction on(_lookup, handler) {\r\n  var lookup = this.trim(_lookup)\r\n\r\n  if(this.handlers[lookup]) {\r\n    this.handlers[lookup].push(handler)\r\n\r\n    return handler(this.expressions[lookup].value)\r\n  }\r\n\r\n  this.updating = true\r\n  this.watch(lookup)\r\n  this.handlerList.push(lookup)\r\n  this.handlers[lookup] = [handler]\r\n  this.updating = false\r\n  handler(this.expressions[lookup].value)\r\n}\r\n","var hasOwn = Object.prototype.hasOwnProperty;\nvar toString = Object.prototype.toString;\nvar undefined;\n\nvar isPlainObject = function isPlainObject(obj) {\n\t\"use strict\";\n\tif (!obj || toString.call(obj) !== '[object Object]' || obj.nodeType || obj.setInterval) {\n\t\treturn false;\n\t}\n\n\tvar has_own_constructor = hasOwn.call(obj, 'constructor');\n\tvar has_is_property_of_method = obj.constructor && obj.constructor.prototype && hasOwn.call(obj.constructor.prototype, 'isPrototypeOf');\n\t// Not own constructor property must be Object\n\tif (obj.constructor && !has_own_constructor && !has_is_property_of_method) {\n\t\treturn false;\n\t}\n\n\t// Own properties are enumerated firstly, so to speed up,\n\t// if last one is own, then all properties are own.\n\tvar key;\n\tfor (key in obj) {}\n\n\treturn key === undefined || hasOwn.call(obj, key);\n};\n\nmodule.exports = function extend() {\n\t\"use strict\";\n\tvar options, name, src, copy, copyIsArray, clone,\n\t\ttarget = arguments[0],\n\t\ti = 1,\n\t\tlength = arguments.length,\n\t\tdeep = false;\n\n\t// Handle a deep copy situation\n\tif (typeof target === \"boolean\") {\n\t\tdeep = target;\n\t\ttarget = arguments[1] || {};\n\t\t// skip the boolean and the target\n\t\ti = 2;\n\t} else if (typeof target !== \"object\" && typeof target !== \"function\" || target == undefined) {\n\t\t\ttarget = {};\n\t}\n\n\tfor (; i < length; ++i) {\n\t\t// Only deal with non-null/undefined values\n\t\tif ((options = arguments[i]) != null) {\n\t\t\t// Extend the base object\n\t\t\tfor (name in options) {\n\t\t\t\tsrc = target[name];\n\t\t\t\tcopy = options[name];\n\n\t\t\t\t// Prevent never-ending loop\n\t\t\t\tif (target === copy) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\t// Recurse if we're merging plain objects or arrays\n\t\t\t\tif (deep && copy && (isPlainObject(copy) || (copyIsArray = Array.isArray(copy)))) {\n\t\t\t\t\tif (copyIsArray) {\n\t\t\t\t\t\tcopyIsArray = false;\n\t\t\t\t\t\tclone = src && Array.isArray(src) ? src : [];\n\t\t\t\t\t} else {\n\t\t\t\t\t\tclone = src && isPlainObject(src) ? src : {};\n\t\t\t\t\t}\n\n\t\t\t\t\t// Never move original objects, clone them\n\t\t\t\t\ttarget[name] = extend(deep, clone, copy);\n\n\t\t\t\t// Don't bring in undefined values\n\t\t\t\t} else if (copy !== undefined) {\n\t\t\t\t\ttarget[name] = copy;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t// Return the modified object\n\treturn target;\n};\n\n","module.exports = Expression\r\n\r\nfunction Expression(parsed, deps, value, handler) {\r\n  this.dependents = []\r\n  this.deps = deps\r\n  this.parsed = parsed\r\n  this.changed = false\r\n  this.removable = true\r\n  this.value = value\r\n  this.update = update.bind(this)\r\n  this.handler = handler\r\n\r\n  for(var i = 0, l = deps.length; i < l; ++i) {\r\n    deps[i].dependents.push(this)\r\n  }\r\n}\r\n\r\nExpression.prototype.change = change\r\nExpression.prototype.update = update\r\n\r\nfunction change(val) {\r\n  if(this.value === val && (!this.value || typeof this.value !== 'object')) {\r\n    return\r\n  }\r\n\r\n  this.value = val\r\n  this.changed = true\r\n\r\n  for(var i = 0, l = this.dependents.length; i < l; ++i) {\r\n    this.dependents[i].update()\r\n  }\r\n}\r\n\r\nfunction update() {\r\n  var args = new Array(this.deps.length)\r\n\r\n  for(var i = 0, l = this.deps.length; i < l; ++i) {\r\n    args[i] = this.deps[i].value\r\n  }\r\n\r\n  this.handler.apply(null, args)\r\n}\r\n","module.exports = remove\r\n\r\nfunction remove(_lookup, handler) {\r\n  var lookup = this.trim(_lookup)\r\n  var handlers = this.handlers[lookup]\r\n\r\n  if(!handlers) {\r\n    return\r\n  }\r\n\r\n  var index = handlers.indexOf(handler)\r\n\r\n  if(index < 0) {\r\n    return\r\n  }\r\n\r\n  handlers.splice(index, 1)\r\n\r\n  if(this.handlers[lookup].length) {\r\n    return\r\n  }\r\n\r\n  delete this.handlers[lookup]\r\n  this.handlerList.splice(this.handlerList.indexOf(lookup), 1)\r\n  removeExpression(this, this.expressions[lookup])\r\n}\r\n\r\nfunction removeExpression(self, expression) {\r\n  if(expression.dependents.length || !expression.removable) {\r\n    return\r\n  }\r\n\r\n  delete self.expressions[expression.parsed.lookup]\r\n\r\n  for(var i = 0, l = expression.deps.length, dep; i < l; ++i) {\r\n    dep = expression.deps[i]\r\n    dep.dependents.splice(dep.dependents.indexOf(expression), 1)\r\n    removeExpression(self, dep)\r\n  }\r\n}\r\n","module.exports = parse\r\n\r\nfunction parse(lookup) {\r\n  var val\r\n\r\n  for(var i = 0, l = this.types.order.length; i < l; ++i) {\r\n    val = this.types.types[this.types.order[i]].parse.call(this, lookup)\r\n\r\n    if(val) {\r\n      break\r\n    }\r\n  }\r\n\r\n  val.type = this.types.order[i]\r\n  val.lookup = lookup\r\n\r\n  return val\r\n}\r\n","var default_pairs = [\r\n    ['(', ')']\r\n  , ['[', ']']\r\n  , ['?', ':']\r\n  , ['\"', '\"', true]\r\n  , [\"'\", \"'\", true]\r\n]\r\n\r\nmodule.exports = split\r\nmodule.exports.pairs = default_pairs\r\n\r\nfunction split(parts, key, all, _pairs) {\r\n  var pairs = _pairs || default_pairs\r\n    , inString = false\r\n    , layers = []\r\n\r\n  for(var i = 0, l = parts.length; i < l; ++i) {\r\n    if(!~parts.indexOf(key)) {\r\n      i = l\r\n\r\n      break\r\n    }\r\n\r\n    if(!layers.length) {\r\n      for(var j = 0, l2 = key.length; j < l2; ++j) {\r\n        if(parts[i + j] !== key[j]) {\r\n          break\r\n        }\r\n      }\r\n\r\n      if(j === key.length) {\r\n        break\r\n      }\r\n    }\r\n\r\n    if(layers.length && layers[layers.length - 1] === parts[i]) {\r\n      inString = false\r\n      layers.pop()\r\n\r\n      continue\r\n    }\r\n\r\n    if(inString) {\r\n      continue\r\n    }\r\n\r\n    for(var j = 0, l2 = pairs.length; j < l2; ++j) {\r\n      if(parts[i] === pairs[j][0]) {\r\n        if(pairs[j][2]) {\r\n          inString = true\r\n        }\r\n\r\n        layers.push(pairs[j][1])\r\n\r\n        break\r\n      }\r\n    }\r\n  }\r\n\r\n  if(layers.length) {\r\n    console.error(\r\n        'Unmatched pair in ' + parts + '. expecting: ' + layers.pop()\r\n    )\r\n  }\r\n\r\n  if(i === parts.length) {\r\n    return [parts]\r\n  }\r\n\r\n  var right = parts.slice(i + key.length)\r\n    , left = parts.slice(0, i)\r\n\r\n  if(!all) {\r\n    return [left, right]\r\n  }\r\n\r\n  return [left].concat(split(right, key, all, pairs))\r\n}\r\n","var Expression = require('./expression')\r\n\r\nmodule.exports = watch\r\n\r\nvar seen = {}\r\n\r\nfunction watch(lookup) {\r\n  var self = this\r\n\r\n  var parsed = seen[lookup] || (seen[lookup] = self.parse(lookup))\r\n  var partials = parsed.partials && Object.keys(parsed.partials)\r\n\r\n  var handler = createHandler.call(self, parsed, change)\r\n\r\n  if(partials) {\r\n    for(var i = 0, l = partials.length; i < l; ++i) {\r\n      self.partials[partials[i]] = parsed.partials[partials[i]]\r\n      getDep.call(self, self.partials[partials[i]])\r\n    }\r\n  }\r\n\r\n  var expression = createExpression.call(self, parsed, handler)\r\n\r\n  self.expressions[lookup] = expression\r\n\r\n  if(expression.handler) {\r\n    expression.update()\r\n  }\r\n\r\n  return expression\r\n\r\n  function change(val) {\r\n    if(self.updating) {\r\n      return expression.change(val)\r\n    }\r\n\r\n    self.updating = true\r\n    expression.change(val)\r\n    self.updating = false\r\n    self.report()\r\n  }\r\n}\r\n\r\nfunction createHandler(parsed, change) {\r\n  var type = this.types.types[parsed.type]\r\n\r\n  if(typeof type === 'function') {\r\n    return type.call(this, change, parsed.options)\r\n  }\r\n\r\n  return null\r\n}\r\n\r\nfunction createExpression(parsed, handler) {\r\n  var deps = parsed.deps ? parsed.deps.map(getDep.bind(this)) : []\r\n  var proxy = parsed.proxy && getDep.call(this, parsed.proxy)\r\n  var expression\r\n\r\n  if(proxy) {\r\n    return expression = new Expression(parsed, [proxy], proxy.value, echo)\r\n  }\r\n\r\n  return new Expression(parsed, deps, parsed.value, handler)\r\n\r\n  function echo(val) {\r\n    expression.change(val)\r\n  }\r\n}\r\n\r\nfunction getDep(_lookup) {\r\n  var lookup = this.trim(_lookup)\r\n\r\n  return this.expressions[lookup] || this.watch(lookup)\r\n}\r\n","module.exports = hash\r\n\r\nfunction hash(str) {\r\n  var val = 0\r\n\r\n  for(var i = 0, len = str.length; i < len; ++i) {\r\n    val = ((val << 5) - val) + str.charCodeAt(i)\r\n    val |= 0\r\n  }\r\n\r\n  return val.toString().replace('-', '_')\r\n}\r\n","var brackets = require('./brackets')\r\nvar dot_path = require('./dot-path')\r\nvar filters = require('./filters')\r\nvar partial = require('./partial')\r\nvar ternary = require('./ternary')\r\nvar parens = require('./parens')\r\nvar values = require('./values')\r\nvar binary = require('./binary')\r\nvar unary = require('./unary')\r\nvar list = require('./list')\r\n\r\nmodule.exports.order = [\r\n    'values'\r\n  , 'filters'\r\n  , 'partial'\r\n  , 'parens'\r\n  , 'ternary'\r\n  , 'binary'\r\n  , 'unary'\r\n  , 'brackets'\r\n  , 'list'\r\n  , 'dot_path'\r\n]\r\n\r\nmodule.exports.types = {\r\n    values: values\r\n  , filters: filters\r\n  , partial: partial\r\n  , parens: parens\r\n  , ternary: ternary\r\n  , binary: binary\r\n  , unary: unary\r\n  , brackets: brackets\r\n  , list: list\r\n  , dot_path: dot_path\r\n}\r\n","var has_bracket = /^.*\\S\\[.+\\]$/\r\n\r\nmodule.exports = brackets\r\nmodule.exports.parse = parse\r\n\r\nfunction parse(lookup) {\r\n  if(!has_bracket.test(lookup)) {\r\n    return false\r\n  }\r\n\r\n  var pairs = this.split.pairs.map(function(pair) {\r\n    return [pair[1], pair[0], pair[2]]\r\n  })\r\n\r\n  return {\r\n      deps: this.split(reverse(lookup.slice(0, -1)), '[', false, pairs)\r\n        .map(reverse)\r\n  }\r\n}\r\n\r\nfunction reverse(str) {\r\n  return str.split('').reverse().join('')\r\n}\r\n\r\nfunction brackets(change) {\r\n  return function(inner, root) {\r\n    if(root === null || root === undefined) {\r\n      return change()\r\n    }\r\n\r\n    change(root[inner])\r\n  }\r\n}\r\n","var valid_path = /^(.*)\\.([^.\\s]+)$/\r\n\r\nmodule.exports = create\r\nmodule.exports.parse = parse\r\n\r\nfunction parse(lookup) {\r\n  var parts = lookup.match(valid_path)\r\n\r\n  return parts ?\r\n    {deps: [parts[1]], options: parts[2]} :\r\n    {deps: ['this'], options: lookup}\r\n}\r\n\r\nfunction create(change, key) {\r\n  return function(obj) {\r\n    if(obj === null || obj === undefined) {\r\n      return change()\r\n    }\r\n\r\n    change(obj[key])\r\n  }\r\n}\r\n","var filter_regexp = /^([^\\s(]+)\\((.*)\\)$/\r\n\r\nmodule.exports = create\r\nmodule.exports.parse = parse\r\n\r\nfunction parse(lookup) {\r\n  var parts = lookup.match(filter_regexp)\r\n\r\n  if(!parts) {\r\n    return false\r\n  }\r\n\r\n  return {deps: this.split(parts[2], ',', true), options: parts[1]}\r\n}\r\n\r\nfunction create(change, name) {\r\n  return this.filters[name](change) || function() {\r\n    console.error('could not find filter: ' + name)\r\n  }\r\n}\r\n","var regexp = /^\\{\\{[#_\\w]+\\}\\}$/\r\n\r\nmodule.exports.parse = parse\r\n\r\nfunction parse(lookup) {\r\n  return regexp.test(lookup) ? {proxy: this.partials[lookup]} : false\r\n}\r\n","var ternary_regexp = /^\\s*(.+?)\\s*\\?(.*)\\s*$/\r\n\r\nmodule.exports = create\r\nmodule.exports.parse = parse\r\n\r\nfunction parse(lookup) {\r\n  var parts = lookup.match(ternary_regexp)\r\n\r\n  if(!parts) {\r\n    return false\r\n  }\r\n\r\n  var rest = this.split(parts[2], ':')\r\n\r\n  if(rest.length !== 2) {\r\n    console.error('Unmatched ternary in: ' + lookup)\r\n  }\r\n\r\n  return {deps: [parts[1], rest[0], rest[1]]}\r\n}\r\n\r\nfunction create(change) {\r\n  return function(ok, left, right) {\r\n    change(ok ? left : right)\r\n  }\r\n}\r\n","var parens_regexp = /(^|[^0-9a-zA-Z_$])\\((.*)$/\r\n\r\nmodule.exports.parse = parse\r\n\r\nfunction parse(lookup) {\r\n  var parts = lookup.match(parens_regexp)\r\n\r\n  if(!parts) {\r\n    return false\r\n  }\r\n\r\n  var body = this.split(parts[2], ')')[0]\r\n  var key = '{{paren_' + this.hash(body) + '}}'\r\n  var partials = {}\r\n\r\n  partials[key] = body\r\n\r\n  var patched = lookup.slice(0, lookup.lastIndexOf([parts[2]]) - 1) +\r\n    key + parts[2].slice(body.length + 1)\r\n\r\n  return {proxy: patched, partials: partials}\r\n}\r\n","var string_regexp = /^(?:'((?:[^'\\\\]|(?:\\\\.))*)'|\"((?:[^\"\\\\]|(?:\\\\.))*)\")$/\r\n  , number_regexp = /^(\\d*(?:\\.\\d+)?)$/\r\n\r\nmodule.exports.parse = parse\r\n\r\nvar vals = {\r\n    'true': true\r\n  , 'false': false\r\n  , 'null': null\r\n  , 'undefined': undefined\r\n}\r\n\r\nfunction parse(lookup) {\r\n  if(vals.hasOwnProperty(lookup)) {\r\n    return {value: vals[lookup]}\r\n  }\r\n\r\n  if(number_regexp.test(lookup)) {\r\n    return {value: +lookup}\r\n  }\r\n\r\n  if(string_regexp.test(lookup)) {\r\n    return {value: lookup.slice(1, -1)}\r\n  }\r\n}\r\n","module.exports = create\r\nmodule.exports.parse = parse\r\n\r\nvar tests = []\r\nvar ops = {}\r\n\r\nadd(['|\\\\|'])\r\nadd(['&&'])\r\nadd(['|'])\r\nadd(['^'])\r\nadd(['&'])\r\nadd(['===', '!==', '==', '!='])\r\nadd(['>=', '<=', '>', '<', ' in ', ' instanceof '])\r\n// add(['<<', '>>', '>>>']) //conflics with < and >\r\nadd(['+', '-'])\r\nadd(['*', '/', '%'])\r\n\r\nops['in'] = updateIn\r\nops['instanceof'] = updateInstanceof\r\n\r\nfunction add(list) {\r\n  tests.push(new RegExp('^(.+?)(\\\\' + list.join('|\\\\') + ')(.+)$'))\r\n}\r\n\r\nfunction parse(lookup) {\r\n  var parts\r\n\r\n  for(var i = 0, l = tests.length; i < l; ++i) {\r\n    parts = lookup.match(tests[i])\r\n\r\n    if(parts) {\r\n      break\r\n    }\r\n  }\r\n\r\n  if(!parts) {\r\n    return false\r\n  }\r\n\r\n  return {deps: [parts[1], parts[3]], options: parts[2]}\r\n}\r\n\r\nfunction create(change, op) {\r\n  if(!ops[op]) {\r\n    ops[op] = createOp(op)\r\n  }\r\n\r\n  return ops[op].bind(null, change)\r\n}\r\n\r\nfunction createOp(op) {\r\n  return Function('change, left, right', 'change(left ' + op + ' right)')\r\n}\r\n\r\nfunction updateIn(left, right) {\r\n  return typeof right !== 'undefined' && left in right\r\n}\r\n\r\nfunction updateInstanceof(left, right) {\r\n  return typeof right === 'function' && left instanceof right\r\n}\r\n","module.exports = create\r\nmodule.exports.parse = parse\r\n\r\nvar test = new RegExp('^(\\\\' + ['!', '+', '-', '~'].join('|\\\\') + ')(.+)$')\r\n\r\nvar ops = {}\r\n\r\nfunction parse(lookup) {\r\n  var parts = lookup.match(test)\r\n\r\n  if(!parts) {\r\n    return false\r\n  }\r\n\r\n  return {deps: [parts[2]], options: parts[1]}\r\n}\r\n\r\nfunction create(change, op) {\r\n  if(!ops[op]) {\r\n    ops[op] = create_op(op)\r\n  }\r\n\r\n  return ops[op].bind(null, change)\r\n}\r\n\r\nfunction create_op(op) {\r\n  return Function('change, val', 'change(' + op + 'val)')\r\n}\r\n","var is_list = /^\\[.+\\]$/\r\n\r\nmodule.exports = list\r\nmodule.exports.parse = parse\r\n\r\nfunction parse(lookup) {\r\n  if(!is_list.test(lookup)) {\r\n    return false\r\n  }\r\n\r\n  return {deps: this.split(lookup.slice(1, -1), ',', true)}\r\n}\r\n\r\nfunction list(change) {\r\n  return function() {\r\n    change([].slice.call(arguments))\r\n  }\r\n}\r\n"]}