{"version":3,"file":"bundle.js","sources":["/Users/michaelhayes/work/altr/node_modules/browserify/node_modules/browser-pack/_prelude.js","/Users/michaelhayes/work/altr/lib/browser.js","/Users/michaelhayes/work/altr/lib/index.js","/Users/michaelhayes/work/altr/lib/tags/placeholder.js","/Users/michaelhayes/work/altr/lib/tags/children.js","/Users/michaelhayes/work/altr/lib/tags/include.js","/Users/michaelhayes/work/altr/lib/tags/text.js","/Users/michaelhayes/work/altr/lib/tags/html.js","/Users/michaelhayes/work/altr/lib/tags/with.js","/Users/michaelhayes/work/altr/lib/tags/for.js","/Users/michaelhayes/work/altr/lib/tags/if.js","/Users/michaelhayes/work/altr/lib/altr.js","/Users/michaelhayes/work/altr/lib/template_string.js","/Users/michaelhayes/work/altr/lib/element_node.js","/Users/michaelhayes/work/altr/lib/text_node.js","/Users/michaelhayes/work/altr/lib/get_element.js","/Users/michaelhayes/work/altr/lib/to_string.js","/Users/michaelhayes/work/altr/lib/replace.js","/Users/michaelhayes/work/altr/lib/render.js","/Users/michaelhayes/work/altr/lib/insert.js","/Users/michaelhayes/work/altr/lib/remove.js","/Users/michaelhayes/work/altr/lib/raf.js","/Users/michaelhayes/work/altr/lib/set_children.js","/Users/michaelhayes/work/altr/node_modules/browserify/node_modules/events/events.js","/Users/michaelhayes/work/altr/node_modules/altr-accessors/index.js","/Users/michaelhayes/work/altr/node_modules/batch-queue/index.js","/Users/michaelhayes/work/altr/node_modules/altr-accessors/lib/create.js","/Users/michaelhayes/work/altr/node_modules/altr-accessors/lib/operators.js","/Users/michaelhayes/work/altr/node_modules/altr-accessors/lib/filter.js","/Users/michaelhayes/work/altr/node_modules/altr-accessors/lib/lookup.js","/Users/michaelhayes/work/altr/node_modules/altr-accessors/lib/parens.js","/Users/michaelhayes/work/altr/node_modules/altr-accessors/lib/list.js","/Users/michaelhayes/work/altr/node_modules/altr-accessors/lib/types.js","/Users/michaelhayes/work/altr/node_modules/altr-accessors/lib/arrow.js","/Users/michaelhayes/work/altr/node_modules/altr-accessors/lib/split.js","/Users/michaelhayes/work/altr/node_modules/altr-accessors/node_modules/just-debounce/index.js"],"names":["module","exports","global","altr","require","placeholder","children_tag","include_tag","text_tag","html_tag","with_tag","for_tag","if_tag","addTag","original","accessor","update","val","nodeName","current","replace","parentNode","_altr_placeholder","this","batch","add","createAccessor","children","el","nodes","Array","isArray","filter","is_node","i","l","length","set_children","call","innerHTML","bind","nodeType","include","name","includes","updateNodes","childNodes","text","textContent","html","getAttribute","forEach","getElementsByTagName","run","script","fixed","document","createElement","parent","attrs","attributes","setAttribute","value","insertBefore","removeChild","for_handler","root","args","update_children","data","item_data","Object","create","prop","items","new_items","index","new_children","dom_nodes","find_index","unique","make_children","concat","slice","run_updates","d","indexOf","temp","createElementNS","namespaceURI","template","prototype","run_dom_updates","parts","match","for_regexp","Error","split","key","toggle","show","hide","createComment","hidden","sync","doc","EE","dom_module","filters","accessors","raf","runBatch","Buffer","toString","createDocumentFragment","firstChild","appendChild","_update","rootNodes","state","update_nodes","ctx","hooks","self","initNodes","init_nodes","flatten","lhs","rhs","map","init_node","Boolean","reduce","node_handlers","root_nodes","DOCUMENT_FRAGMENT_NODE","add_filter","add_tag","attr","tag","tags","tagList","push","constructor","append_to","node","get_el","create_accessor","description","change","fn","run_batch","emit","EventEmitter","template_string","element_node","text_node","render","insert","remove","addFilter","templateString","initNode","getElement","into","set_part","idx","join","hook","TAG","next","remaining","create_element_node","altr_tags","removeAttribute","attr_hook","altr_attr","init_text_node","clone","cloneNode","COMMENT_NODE","TEXT_NODE","outerHTML","old","replaceChild","instance","before","inserted","nextSibling","requestAnimationFrame","callback","timeout","setTimeout","webkitRequestAnimationFrame","mozRequestAnimationFrame","prev","get","_events","_maxListeners","undefined","isFunction","arg","isNumber","isObject","isUndefined","defaultMaxListeners","setMaxListeners","n","isNaN","TypeError","type","er","handler","len","listeners","error","arguments","apply","addListener","listener","m","newListener","warned","console","trace","on","once","g","removeListener","fired","list","position","splice","removeAllListeners","ret","listenerCount","emitter","delay","str","all","write","_out","out","part","createPart","debounce","add_operators","create_accesor","add_filters","add_lookup","add_parens","create_list","add_types","add_arrow","types","createParts","Batch","ready","jobs","queud","queue","queued","context","finish","build_part","create_ternary","binary","unary","regex","RegExp","create_binary","create_unary","ok","not","ternary_regexp","condition","rest","on_data","check_lhs","check_rhs","is_rhs","unset","changed","Function","create_filter","filter_regexp","create_lookup","path","lookup","done","obj","result","search","create_parens","_context","parens_regexp","body","count","content","Math","random","updating","get_parts","create_string_accessor","create_number_accessor","string_regexp","ignore","number_regexp","create_arrow","right","left","_pairs","pairs","layers","j","l2","pop","at_start","guarantee","clear","clearTimeout"],"mappings":"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","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error(\"Cannot find module '\"+o+\"'\")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","module.exports = global.altr = require('./index')\n","var placeholder = require('./tags/placeholder')\n  , children_tag = require('./tags/children')\n  , include_tag = require('./tags/include')\n  , text_tag = require('./tags/text')\n  , html_tag = require('./tags/html')\n  , with_tag = require('./tags/with')\n  , for_tag = require('./tags/for')\n  , if_tag = require('./tags/if')\n  , altr = require('./altr')\n\nmodule.exports = altr\n\naltr.addTag('altr-placeholder', placeholder)\naltr.addTag('altr-children', children_tag)\naltr.addTag('altr-replace', placeholder)\naltr.addTag('altr-include', include_tag)\naltr.addTag('altr-text', text_tag)\naltr.addTag('altr-html', html_tag)\naltr.addTag('altr-with', with_tag)\naltr.addTag('altr-for', for_tag)\naltr.addTag('altr-if', if_tag)\n","module.exports = placeholder\n\nfunction placeholder(original, accessor) {\n  var current = original\n    , altr = this\n\n  return this.batch.add(this.createAccessor(accessor, update))\n\n  function update(val) {\n    if(!val || !val.nodeName || val === current) {\n      return\n    }\n\n    altr.replace(current.parentNode, val, current)\n    original._altr_placeholder = val\n    current = val\n  }\n}\n","var set_children = require('../set_children')\n\nmodule.exports = children\n\nfunction children(el, accessor) {\n  var current = []\n\n  el.innerHTML = ''\n\n  return this.batch.add(this.createAccessor(accessor, update.bind(this)))\n\n  function update(val) {\n    var nodes = (Array.isArray(val) ? val : [val]).filter(is_node)\n\n    for(var i = 0, l = nodes.length; i < l; ++i) {\n      if(nodes[i] !== current[i]) {\n        break\n      }\n    }\n\n    if(i === nodes.length === current.length) {\n      return\n    }\n\n    current = nodes\n    set_children.call(this, el, current)\n  }\n}\n\nfunction is_node(el) {\n  return el && el.nodeType\n}\n","module.exports = include\n\nfunction include(el, name) {\n  el.innerHTML = this.includes[name]\n\n  return this.updateNodes(el.childNodes)\n}\n","module.exports = text\n\nfunction text(el, accessor) {\n  return this.batch.add(this.createAccessor(accessor, update))\n\n  function update(val) {\n    el.textContent = typeof val === 'undefined' ? '' : val\n  }\n}\n","module.exports = html\n\nfunction html(el, accessor) {\n  return this.batch.add(this.createAccessor(accessor, update))\n\n  function update(val) {\n    el.innerHTML = typeof val === 'undefined' ? '' : val\n\n    if(el.getAttribute('altr-run-scripts')) {\n      [].forEach.call(el.getElementsByTagName('script'), run)\n    }\n  }\n}\n\nfunction run(script) {\n  var fixed = document.createElement('script')\n    , parent = script.parentNode\n    , attrs = script.attributes\n    , src\n\n  for(var i = 0, l = attrs.length; i < l; ++i) {\n    fixed.setAttribute(attrs[i].name, attrs[i].value)\n  }\n\n  fixed.textContent = script.textContent\n  parent.insertBefore(fixed, script)\n  parent.removeChild(script)\n}\n","module.exports = with_tag\n\nfunction with_tag(el, accessor) {\n  var update = this.updateNodes(el.childNodes)\n\n  return update ? this.createAccessor(accessor, update) : null\n}\n","var set_children = require('../set_children')\n  , for_regexp = /^(.*?)\\s+in\\s+(.*$)/\n\nmodule.exports = for_handler\n\nfunction for_handler(root, args) {\n  var parts = args.match(for_regexp)\n    , template = root.innerHTML\n    , dom_nodes = []\n    , children = []\n    , altr = this\n    , items = []\n\n  if(!parts) {\n    throw new Error('invalid for tag: ' + args)\n  }\n\n  root.innerHTML = ''\n\n  var unique = parts[1].split(':')[1]\n    , prop = parts[1].split(':')[0]\n    , key = parts[2]\n\n  var run_updates = this.batch.add(run_dom_updates)\n\n  return altr.createAccessor(key, update)\n\n  function update_children(data) {\n    var item_data\n\n    for(var i = 0, l = children.length; i < l; ++i) {\n      item_data = Object.create(data)\n      item_data[prop] = items[i]\n      item_data['$index'] = i\n\n      children[i].update && children[i].update(item_data)\n    }\n  }\n\n  function update(new_items, data) {\n    if(!Array.isArray(new_items)) {\n      new_items = []\n    }\n\n    var new_children = new Array(new_items.length)\n      , index\n\n    dom_nodes = []\n\n    for(var i = 0, l = new_items.length; i < l; ++i) {\n      index = find_index(items, new_items[i], unique)\n\n      if(index !== -1) {\n        new_children[i] = children[index]\n        items[index] = {}\n      } else {\n        new_children[i] = make_children()\n      }\n\n      dom_nodes = dom_nodes.concat(new_children[i].dom_nodes)\n    }\n\n    children = new_children.slice()\n    items = new_items.slice()\n    run_updates.call(altr)\n    update_children(data)\n  }\n\n  function find_index(items, d, unique) {\n    if(!unique) {\n      return items.indexOf(d)\n    }\n\n    for(var i = 0, l = items.length; i < l; ++i) {\n      if(items[i][unique] === d[unique]) {\n        return i\n      }\n    }\n\n    return -1\n  }\n\n  function make_children() {\n    var temp = altr.document.createElementNS(root.namespaceURI, 'div')\n      , dom_nodes\n      , update\n\n    temp.innerHTML = template\n\n    dom_nodes = Array.prototype.slice.call(temp.childNodes)\n    update = altr.updateNodes(dom_nodes)\n\n    return {\n        dom_nodes: dom_nodes\n      , update: update\n    }\n  }\n\n  function run_dom_updates() {\n    set_children.call(this, root, dom_nodes)\n  }\n}\n","module.exports = if_tag\n\nfunction if_tag(el, accessor) {\n  var placeholder = this.document.createComment('altr-if-placeholder')\n    , update_children = this.updateNodes(el.childNodes)\n    , hidden = null\n    , altr = this\n\n  var hide = this.batch.add(function() {\n    var parent = el.parentNode\n\n    if(!hidden) {\n      altr.replace(el.parentNode, placeholder, el)\n      el._altr_placeholder = placeholder\n      hidden = true\n    }\n  })\n\n  var show = this.batch.add(function() {\n    if(hidden) {\n      altr.replace(placeholder.parentNode, el, placeholder)\n      delete el._altr_placeholder\n      hidden = false\n    }\n  })\n\n  return this.createAccessor(accessor, toggle)\n\n  function toggle(val, data) {\n    if(!val) {\n      return hide()\n    }\n\n    show()\n    update_children && update_children(data)\n  }\n}\n","var accessors = require('altr-accessors')\n  , EE = require('events').EventEmitter\n  , batch = require('batch-queue')\n\nvar template_string = require('./template_string')\n  , element_node = require('./element_node')\n  , text_node = require('./text_node')\n  , get_el = require('./get_element')\n  , toString = require('./to_string')\n  , replace = require('./replace')\n  , render = require('./render')\n  , insert = require('./insert')\n  , remove = require('./remove')\n  , raf = require('./raf')\n\nvar dom_module = 'micro-dom'\n\naltr.filters = {}\naltr.includes = {}\naltr.render = render\naltr.addTag = add_tag\naltr.include = include\naltr.addFilter = add_filter\n\nmodule.exports = altr\n\nfunction altr(root, data, sync, doc) {\n  if(!(this instanceof altr)) {\n    return new altr(root, data, sync, doc)\n  }\n\n  EE.call(this)\n  this.sync = !!sync\n  this.root = root\n  this.document = doc || global.document || require(dom_module).document\n  this.filters = Object.create(altr.filters)\n  this.includes = Object.create(altr.includes)\n  this.accessors = accessors(this.filters, false)\n  this.batch = batch((function() {\n    if(!this.sync) {\n      raf(this.runBatch.bind(this))\n    }\n  }).bind(this))\n\n  if(global.Buffer && root instanceof global.Buffer) {\n    root = root.toString()\n  }\n\n  if(typeof root === 'string') {\n    var temp = this.document.createElement('div')\n\n    temp.innerHTML = root\n    this.root = this.document.createDocumentFragment()\n\n    while(temp.firstChild) {\n      this.root.appendChild(temp.firstChild)\n    }\n  }\n\n  this._update = this.updateNodes(this.rootNodes())\n\n  if(data) {\n    this.update(data, true)\n  }\n}\n\naltr.prototype = Object.create(EE.prototype)\naltr.prototype.constructor = altr\n\naltr.prototype.templateString = template_string\naltr.prototype.createAccessor = create_accessor\naltr.prototype.updateNodes = update_nodes\naltr.prototype.initNodes = init_nodes\naltr.prototype.rootNodes = root_nodes\naltr.prototype.addFilter = add_filter\naltr.prototype.runBatch = run_batch\naltr.prototype.initNode = init_node\naltr.prototype.toString = toString\naltr.prototype.getElement = get_el\naltr.prototype.include = include\naltr.prototype.replace = replace\naltr.prototype.into = append_to\naltr.prototype.update = update\naltr.prototype.insert = insert\naltr.prototype.remove = remove\naltr.prototype.tagList = []\naltr.prototype.tags = {}\n\nvar node_handlers = {}\n\nnode_handlers[1] = element_node\nnode_handlers[3] = text_node\n\nfunction update(data, sync) {\n  this.state = data\n  this._update && this._update(data)\n\n  if(sync || this.sync) {\n    this.runBatch()\n  }\n}\n\nfunction update_nodes(nodes) {\n  var hooks = this.initNodes(nodes)\n    , self = this\n\n  return hooks.length ? update : null\n\n  function update(data, ctx) {\n    for(var i = 0, l = hooks.length; i < l; ++i) {\n      hooks[i].call(self, data, ctx)\n    }\n  }\n}\n\nfunction init_nodes(nodes, list) {\n  var hooks = [].slice.call(nodes)\n    .map(init_node.bind(this))\n    .filter(Boolean)\n    .reduce(flatten, [])\n\n  return hooks\n\n  function flatten(lhs, rhs) {\n    return lhs.concat(rhs)\n  }\n}\n\nfunction init_node(el) {\n  return node_handlers[el.nodeType] ?\n    node_handlers[el.nodeType].call(this, el) :\n    el.childNodes && el.childNodes.length ?\n    this.initNodes(el.childNodes) :\n    null\n}\n\nfunction root_nodes() {\n  return this.root.nodeType === this.document.DOCUMENT_FRAGMENT_NODE ?\n    [].slice.call(this.root.childNodes) :\n    [this.root]\n}\n\nfunction add_filter(name, filter) {\n  altr.filters[name] = filter\n}\n\nfunction add_tag(attr, tag) {\n  altr.prototype.tags[attr] = tag\n  altr.prototype.tagList.push({\n      attr: attr\n    , constructor: tag\n  })\n}\n\nfunction append_to(node) {\n  var root_nodes = this.rootNodes()\n\n  for(var i = 0, l = root_nodes.length; i < l; ++i) {\n    node.appendChild(get_el(root_nodes[i]))\n  }\n}\n\nfunction include(name, template) {\n  return this.includes[name] = template\n}\n\nfunction create_accessor(description, change) {\n  return this.accessors.create(description, change, false)\n}\n\nfunction add_filter(name, fn) {\n  return this.filters[name] = fn\n}\n\nfunction run_batch() {\n  this.batch.run() && this.emit('update', this.state)\n}\n","var TAG = /{{\\s*(.*?)\\s*}}/\n\nmodule.exports = template_string\n\nfunction template_string(template, change) {\n  if(!template.match(TAG)) {\n    return\n  }\n\n  var remaining = template\n    , parts = []\n    , hooks = []\n    , timer\n    , index\n    , next\n\n  while(remaining && (next = remaining.match(TAG))) {\n    if(index = remaining.indexOf(next[0])) {\n      parts.push(remaining.slice(0, index))\n    }\n\n    parts.push('')\n    remaining = remaining.slice(index + next[0].length)\n    hooks.push(\n        this.createAccessor(next[1], set_part.bind(this, parts.length - 1))\n    )\n  }\n\n  parts.push(remaining)\n\n  return update\n\n  function set_part(idx, val) {\n    parts[idx] = val\n    change(parts.join(''))\n  }\n\n  function update(data) {\n    hooks.forEach(function(hook) {\n      hook(data)\n    })\n  }\n}\n","module.exports = create_element_node\n\nfunction create_element_node(el) {\n  var altr_tags = {}\n    , altr = this\n    , hooks = []\n    , attr\n\n  var attrs = Array.prototype.filter.call(el.attributes, function(attr) {\n    return altr.tags[attr.name] ?\n      (altr_tags[attr.name] = attr.value) && false :\n      true\n  })\n\n  attrs.forEach(function(attr) {\n    var value = attr.value\n      , name = attr.name\n      , attr_hook\n      , altr_attr\n\n    if(altr_attr = !name.indexOf('altr-attr-')) {\n      name = attr.name.slice('altr-attr-'.length)\n      el.removeAttribute(attr.name)\n    }\n\n    attr_hook = altr_attr ?\n      altr.createAccessor(value, altr.batch.add(update)) :\n      altr.templateString(\n          value\n        , altr.batch.add(el.setAttribute.bind(el, name))\n      )\n\n    if(attr_hook) {\n      hooks.push(attr_hook)\n    }\n\n    function update(val) {\n      if(!val && val !== '' && val !== 0) {\n        return el.removeAttribute(name)\n      }\n\n      if(val === true) {\n        return el.setAttribute(name, '')\n      }\n\n      el.setAttribute(name, val)\n    }\n  })\n\n  for(var i = 0, l = altr.tagList.length; i < l; ++i) {\n    if(attr = altr_tags[altr.tagList[i].attr]) {\n      hooks.push(altr.tagList[i].constructor.call(altr, el, attr))\n\n      return hooks\n    }\n  }\n\n  return hooks.concat(altr.initNodes(el.childNodes))\n}\n","module.exports = init_text_node\n\nfunction init_text_node(el) {\n  var hook = this.templateString(el.textContent, this.batch.add(update))\n\n  return hook ? [hook] : null\n\n  function update(val) {\n    el.textContent = val\n  }\n}\n","module.exports = get_el\n\nfunction get_el(el) {\n  while(el && el._altr_placeholder) {\n    el = el._altr_placeholder\n  }\n\n  return el\n}\n","module.exports = toString\n\nfunction toString() {\n  return this.rootNodes().map(function(node) {\n    switch(node.nodeType) {\n      case this.document.DOCUMENT_FRAGMENT_NODE:\n      case this.document.COMMENT_NODE: return clone.call(this, node)\n      case this.document.TEXT_NODE: return node.textContent\n      default: return node.outerHTML\n    }\n  }, this).join('')\n\n  function clone(node) {\n    var temp = this.document.createElement('div')\n\n    temp.appendChild(node.cloneNode())\n\n    return temp.innerHTML\n  }\n}\n","module.exports = replace\n\nfunction replace(parent, el, old) {\n  parent.replaceChild(el, old)\n  this.emit('replace', el, old, parent)\n  this.emit('insert', el, parent)\n  this.emit('remove', old, parent)\n}\n","module.exports = render\n\nfunction render(template, state, el) {\n  if(this.includes[template]) {\n    template = this.includes[template]\n  }\n\n  var instance = this(template)\n\n  instance.update(state || {}, true)\n\n  if(el) {\n    instance.into(el)\n  }\n\n  return instance\n}\n","module.exports = insert\n\nfunction insert(parent, el, before) {\n  var inserted = el.parentNode !== parent\n\n  before = before || null\n\n  if(inserted || el.nextSibling !== before) {\n    parent.insertBefore(el, before)\n  }\n\n  if(inserted) {\n    this.emit('insert', el, parent)\n  }\n}\n","module.exports = remove\n\nfunction remove(parent, el) {\n  parent.removeChild(el)\n  this.emit('remove', el, parent)\n}\n","module.exports = requestAnimationFrame\n\nfunction requestAnimationFrame(callback) {\n  var raf = global.requestAnimationFrame ||\n    global.webkitRequestAnimationFrame ||\n    global.mozRequestAnimationFrame ||\n    timeout\n\n  return raf(callback)\n\n  function timeout(callback) {\n    return setTimeout(callback, 1000 / 60)\n  }\n}\n","var get = require('./get_element')\n\nmodule.exports = set_children\n\nfunction set_children(root, nodes) {\n  var prev = null\n    , el\n\n  for(var i = nodes.length - 1; i >= 0; --i) {\n    el = get(nodes[i])\n    this.insert(root, el, prev)\n    prev = el\n  }\n\n  while((el = root.firstChild) !== prev) {\n    this.remove(root, el)\n  }\n}\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nfunction EventEmitter() {\n  this._events = this._events || {};\n  this._maxListeners = this._maxListeners || undefined;\n}\nmodule.exports = EventEmitter;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nEventEmitter.defaultMaxListeners = 10;\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function(n) {\n  if (!isNumber(n) || n < 0 || isNaN(n))\n    throw TypeError('n must be a positive number');\n  this._maxListeners = n;\n  return this;\n};\n\nEventEmitter.prototype.emit = function(type) {\n  var er, handler, len, args, i, listeners;\n\n  if (!this._events)\n    this._events = {};\n\n  // If there is no 'error' event listener then throw.\n  if (type === 'error') {\n    if (!this._events.error ||\n        (isObject(this._events.error) && !this._events.error.length)) {\n      er = arguments[1];\n      if (er instanceof Error) {\n        throw er; // Unhandled 'error' event\n      } else {\n        throw TypeError('Uncaught, unspecified \"error\" event.');\n      }\n      return false;\n    }\n  }\n\n  handler = this._events[type];\n\n  if (isUndefined(handler))\n    return false;\n\n  if (isFunction(handler)) {\n    switch (arguments.length) {\n      // fast cases\n      case 1:\n        handler.call(this);\n        break;\n      case 2:\n        handler.call(this, arguments[1]);\n        break;\n      case 3:\n        handler.call(this, arguments[1], arguments[2]);\n        break;\n      // slower\n      default:\n        len = arguments.length;\n        args = new Array(len - 1);\n        for (i = 1; i < len; i++)\n          args[i - 1] = arguments[i];\n        handler.apply(this, args);\n    }\n  } else if (isObject(handler)) {\n    len = arguments.length;\n    args = new Array(len - 1);\n    for (i = 1; i < len; i++)\n      args[i - 1] = arguments[i];\n\n    listeners = handler.slice();\n    len = listeners.length;\n    for (i = 0; i < len; i++)\n      listeners[i].apply(this, args);\n  }\n\n  return true;\n};\n\nEventEmitter.prototype.addListener = function(type, listener) {\n  var m;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events)\n    this._events = {};\n\n  // To avoid recursion in the case that type === \"newListener\"! Before\n  // adding it to the listeners, first emit \"newListener\".\n  if (this._events.newListener)\n    this.emit('newListener', type,\n              isFunction(listener.listener) ?\n              listener.listener : listener);\n\n  if (!this._events[type])\n    // Optimize the case of one listener. Don't need the extra array object.\n    this._events[type] = listener;\n  else if (isObject(this._events[type]))\n    // If we've already got an array, just append.\n    this._events[type].push(listener);\n  else\n    // Adding the second element, need to change to array.\n    this._events[type] = [this._events[type], listener];\n\n  // Check for listener leak\n  if (isObject(this._events[type]) && !this._events[type].warned) {\n    var m;\n    if (!isUndefined(this._maxListeners)) {\n      m = this._maxListeners;\n    } else {\n      m = EventEmitter.defaultMaxListeners;\n    }\n\n    if (m && m > 0 && this._events[type].length > m) {\n      this._events[type].warned = true;\n      console.error('(node) warning: possible EventEmitter memory ' +\n                    'leak detected. %d listeners added. ' +\n                    'Use emitter.setMaxListeners() to increase limit.',\n                    this._events[type].length);\n      if (typeof console.trace === 'function') {\n        // not supported in IE 10\n        console.trace();\n      }\n    }\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.once = function(type, listener) {\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  var fired = false;\n\n  function g() {\n    this.removeListener(type, g);\n\n    if (!fired) {\n      fired = true;\n      listener.apply(this, arguments);\n    }\n  }\n\n  g.listener = listener;\n  this.on(type, g);\n\n  return this;\n};\n\n// emits a 'removeListener' event iff the listener was removed\nEventEmitter.prototype.removeListener = function(type, listener) {\n  var list, position, length, i;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events || !this._events[type])\n    return this;\n\n  list = this._events[type];\n  length = list.length;\n  position = -1;\n\n  if (list === listener ||\n      (isFunction(list.listener) && list.listener === listener)) {\n    delete this._events[type];\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n\n  } else if (isObject(list)) {\n    for (i = length; i-- > 0;) {\n      if (list[i] === listener ||\n          (list[i].listener && list[i].listener === listener)) {\n        position = i;\n        break;\n      }\n    }\n\n    if (position < 0)\n      return this;\n\n    if (list.length === 1) {\n      list.length = 0;\n      delete this._events[type];\n    } else {\n      list.splice(position, 1);\n    }\n\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.removeAllListeners = function(type) {\n  var key, listeners;\n\n  if (!this._events)\n    return this;\n\n  // not listening for removeListener, no need to emit\n  if (!this._events.removeListener) {\n    if (arguments.length === 0)\n      this._events = {};\n    else if (this._events[type])\n      delete this._events[type];\n    return this;\n  }\n\n  // emit removeListener for all listeners on all events\n  if (arguments.length === 0) {\n    for (key in this._events) {\n      if (key === 'removeListener') continue;\n      this.removeAllListeners(key);\n    }\n    this.removeAllListeners('removeListener');\n    this._events = {};\n    return this;\n  }\n\n  listeners = this._events[type];\n\n  if (isFunction(listeners)) {\n    this.removeListener(type, listeners);\n  } else {\n    // LIFO order\n    while (listeners.length)\n      this.removeListener(type, listeners[listeners.length - 1]);\n  }\n  delete this._events[type];\n\n  return this;\n};\n\nEventEmitter.prototype.listeners = function(type) {\n  var ret;\n  if (!this._events || !this._events[type])\n    ret = [];\n  else if (isFunction(this._events[type]))\n    ret = [this._events[type]];\n  else\n    ret = this._events[type].slice();\n  return ret;\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  var ret;\n  if (!emitter._events || !emitter._events[type])\n    ret = 0;\n  else if (isFunction(emitter._events[type]))\n    ret = 1;\n  else\n    ret = emitter._events[type].length;\n  return ret;\n};\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\n","var add_operators = require('./lib/operators')\n  , create_accesor = require('./lib/create')\n  , add_filters = require('./lib/filter')\n  , add_lookup = require('./lib/lookup')\n  , add_parens = require('./lib/parens')\n  , create_list = require('./lib/list')\n  , debounce = require('just-debounce')\n  , add_types = require('./lib/types')\n  , add_arrow = require('./lib/arrow')\n  , split = require('./lib/split')\n  , types = []\n\nmodule.exports = accessors\n\n// order is important\nadd_types(types)\nadd_arrow(types)\nadd_filters(types)\nadd_parens(types)\nadd_operators(types)\nadd_lookup(types)\n\naccessors.prototype.createPart = create_accesor\naccessors.prototype.createParts = create_list\naccessors.prototype.addFilter = add_filter\naccessors.prototype.create = create\naccessors.prototype.types = types\naccessors.prototype.split = split\n\nfunction accessors(filters, delay) {\n  if(!(this instanceof accessors)) {\n    return new accessors(filters, delay)\n  }\n\n  if(!delay && delay !== false) {\n    delay = 0\n  }\n\n  this.delay = delay\n  this.filters = filters || {}\n}\n\nfunction add_filter(name, fn) {\n  this.filters[name] = fn\n}\n\nfunction create(str, change, all) {\n  var part = this.createPart(\n      str\n    , this.delay === false ? update : debounce(change, this.delay, false, true)\n  )\n\n  var sync = false\n    , prev = {}\n    , out\n\n  return write\n\n  function write(data) {\n    var _out = {}\n\n    sync = true\n    out = _out\n    part(data)\n    sync = false\n\n    if(out !== _out) {\n      change.apply(null, out)\n    }\n  }\n\n  function update(val, ctx) {\n    if(!all && typeof val !== 'object' && val === prev) {\n      return\n    }\n\n    out = [].slice.call(arguments)\n    prev = val\n\n    if(!sync) {\n      change.apply(null, out)\n    }\n  }\n}\n","module.exports = Batch\n\nfunction Batch(ready, all) {\n  if(!(this instanceof Batch)) {\n    return new Batch(ready, all)\n  }\n\n  this.jobs = []\n  this.all = all\n  this.ready = ready\n  this.queud = false\n  this.run = this.run.bind(this)\n}\n\nBatch.prototype.queue = queue\nBatch.prototype.add = add\nBatch.prototype.run = run\n\nfunction add(fn) {\n  var queued = false\n    , batch = this\n    , self\n    , args\n\n  return queue\n\n  function queue() {\n    args = [].slice.call(arguments)\n    self = this\n\n    if(queued) {\n      return batch.all && batch.ready()\n    }\n\n    queued = true\n    batch.queue(run)\n  }\n\n  function run() {\n    queued = false\n    fn.apply(self, args)\n  }\n}\n\nfunction queue(fn) {\n  this.jobs.push(fn)\n\n  if(this.all || !this.queued) {\n    this.queued = true\n    this.ready(this)\n  }\n}\n\nfunction run() {\n  var jobs = this.jobs\n\n  this.jobs = []\n  this.queued = false\n\n  for(var i = 0, l = jobs.length; i < l; ++i) {\n    jobs[i]()\n  }\n\n  return !!this.jobs.length\n}\n","module.exports = accessor\n\nfunction accessor(key, change) {\n  var part = build_part.call(this, key, finish.bind(this))\n    , context\n\n  return call\n\n  function call(val, ctx) {\n    part(val, context = ctx || val)\n  }\n\n  function finish(val, ctx) {\n    change.call(this, val, arguments.length > 1 ? ctx : context)\n  }\n}\n\nfunction build_part(part, change) {\n  var accessor\n\n  for(var i = 0, l = this.types.length; i < l; ++i) {\n    if(accessor = this.types[i].call(this, part, change)) {\n      return accessor\n    }\n  }\n}\n","var ternary_regexp = /^\\s*(.+?)\\s*\\?(.*)\\s*$/\n\nmodule.exports = add_operators\n\nfunction add_operators(types) {\n  types.push(create_ternary)\n  types.push(binary(['|\\\\|']))\n  types.push(binary(['&&']))\n  types.push(binary(['|']))\n  types.push(binary(['^']))\n  types.push(binary(['&']))\n  types.push(binary(['===', '!==', '==', '!=']))\n  types.push(binary(['>=', '<=', '>', '<', ' in ', ' instanceof ']))\n  // types.push(binary(['<<', '>>', '>>>'])) //conflics with < and >\n  types.push(binary(['+', '-']))\n  types.push(binary(['*', '/', '%']))\n  types.push(unary(['!', '+', '-', '~']))\n}\n\nfunction binary(list) {\n  var regex = new RegExp(\n      '^\\\\s*(.+?)\\\\s\\*(\\\\' +\n      list.join('|\\\\') +\n      ')\\\\s*(.+?)\\\\s*$'\n  )\n\n  return function(parts, change) {\n    return create_binary.call(this, regex, parts, change)\n  }\n}\n\nfunction unary(list) {\n  var regex = new RegExp(\n      '^\\\\s*(\\\\' +\n      list.join('|\\\\') +\n      ')\\\\s*(.+?)\\\\s*$'\n  )\n\n  return function(parts, change) {\n    return create_unary.call(this, regex, parts, change)\n  }\n}\n\nfunction create_ternary(parts, change) {\n  if(!(parts = parts.match(ternary_regexp))) {\n    return\n  }\n\n  var condition = parts[1]\n    , rest = parts[2]\n    , count = 1\n\n  rest = this.split(rest, ':', [['?', ':'], ['(', ')']])\n\n  if(rest.length !== 2) {\n    throw new Error('Unmatched ternary: ' + parts[0])\n  }\n\n  var not = this.createPart(rest[1], change)\n    , ok = this.createPart(rest[0], change)\n\n  return this.createPart(condition, update)\n\n  function update(val, context) {\n    return val ? ok(context) : not(context)\n  }\n}\n\nfunction create_binary(regex, parts, change) {\n  if(!(parts = parts.match(regex))) {\n    return\n  }\n\n  var check_lhs = this.createPart(parts[1], update.bind(null, false))\n    , check_rhs = this.createPart(parts[3], update.bind(null, true))\n    , unset = {}\n\n  var lhs = unset\n    , rhs = unset\n\n  var changed = Function(\n      'change, lhs, rhs'\n    , 'return change(lhs ' + parts[2] + ' rhs)'\n  ).bind(null, change)\n\n  return on_data\n\n  function on_data(data, ctx) {\n    check_lhs(data, ctx)\n    check_rhs(data, ctx)\n  }\n\n  function update(is_rhs, val) {\n    is_rhs ? rhs = val : lhs = val\n\n    if(lhs === unset || rhs === unset) {\n      return\n    }\n\n    changed(lhs, rhs)\n  }\n}\n\nfunction create_unary(regex, parts, change) {\n  if(!(parts = parts.match(regex))) {\n    return\n  }\n\n  var changed = Function(\n      'change, val'\n    , 'return change(' + parts[1] + 'val)'\n  ).bind(null, change)\n\n  return this.createPart(parts[2], changed)\n}\n","var filter_regexp = /^\\s*([^\\s(]+)\\((.*)\\)\\s*$/\n\nmodule.exports = add_filter\n\nfunction add_filter(types) {\n  types.push(create_filter)\n}\n\nfunction create_filter(parts, change) {\n  if(!(parts = parts.match(filter_regexp))) {\n    return\n  }\n\n  var filter = this.filters[parts[1]]\n    , context\n\n  if(!filter) {\n    throw new Error('could not find filter: ' + parts[1])\n  }\n\n  filter = filter.call(this, update)\n\n  return this.createParts(this.split(parts[2], ',', null, null, true), run)\n\n  function run(args, ctx) {\n    context = ctx\n    filter(args, ctx)\n  }\n\n  function update(val, ctx) {\n    change(val, arguments.length > 1 ? ctx : context)\n  }\n}\n","module.exports = add_lookup\n\nfunction add_lookup(types) {\n  types.push(create_lookup)\n}\n\nfunction create_lookup(path, change) {\n  if(!path.indexOf('$data')) {\n    path = path.slice('$data.'.length)\n\n    if(!path) {\n      return change\n    }\n  }\n\n  return lookup(path.match(/\\s*(.*[^\\s])\\s*/)[1], change)\n}\n\nfunction lookup(path, done) {\n  var parts = path ? path.split('.') : []\n\n  return function(obj, ctx) {\n    var result = search(obj, parts)\n\n    if(typeof result === 'undefined' && ctx) {\n      result = search(ctx, parts)\n    }\n\n    done(result, ctx)\n  }\n}\n\nfunction search(obj, parts) {\n  for(var i = 0, l = parts.length; obj && i < l; ++i) {\n    obj = obj[parts[i]]\n  }\n\n  if(i === l) {\n    return obj\n  }\n}\n","var parens_regexp = /^\\s*\\((.*)$/\n\nmodule.exports = add_parens\n\nfunction add_parens(types) {\n  types.push(create_parens)\n}\n\nfunction create_parens(parts, change) {\n  if(!(parts = parts.match(parens_regexp))) {\n    return\n  }\n\n  var body = parts[1]\n    , count = 1\n\n  for(var i = 0, l = body.length; i < l; ++i) {\n    if(body[i] === ')') {\n      --count\n    } else if(body[i] === '(') {\n      ++count\n    }\n\n    if(!count) {\n      break\n    }\n  }\n\n  if(!i || i === l) {\n    throw new Error('Unmatched parens: ' + parts[0])\n  }\n\n  var content =  this.createPart(body.slice(0, i), update)\n    , key = 'paren_' + Math.random().toString(16).slice(2)\n\n  var template = this.createPart(key + body.slice(i + 1), change)\n\n  return content\n\n  function update(val, _context) {\n    var context = Object.create(typeof _context === 'object' ? _context : null)\n\n    context[key] = val\n    template(context, _context)\n  }\n}\n","module.exports = create_list\n\nfunction create_list(parts, change, all) {\n  var updating = false\n    , changed = false\n    , accessors = []\n    , state = []\n\n  if(!parts.length) {\n    return function(val, ctx) {\n      change([], ctx)\n    }\n  }\n\n  for(var i = 0, l = parts.length; i < l; ++i) {\n    accessors.push(this.createPart(parts[i], update.bind(this, i)))\n  }\n\n  return function(val, ctx) {\n    ctx = arguments.length > 1 ? ctx : val\n    changed = false\n    updating = true\n    get_parts(val, ctx)\n    updating = false\n\n    if(!all && changed) {\n      change(state, ctx)\n    }\n  }\n\n  function update(index, val, ctx) {\n    state[index] = val\n    changed = true\n\n    if(all || !updating) {\n      change(state, ctx)\n    }\n  }\n\n  function get_parts(val, ctx) {\n    for(var i = 0, l = accessors.length; i < l; ++i) {\n      accessors[i](val, ctx)\n    }\n  }\n}\n","var string_regexp = /^\\s*(?:'((?:[^'\\\\]|(?:\\\\.))*)'|\"((?:[^\"\\\\]|(?:\\\\.))*)\")\\s*$/\n  , number_regexp = /^\\s*(\\d*(?:\\.\\d+)?)\\s*$/\n\nmodule.exports = add_types\n\nfunction add_types(types) {\n  types.push(create_string_accessor)\n  types.push(create_number_accessor)\n}\n\nfunction create_string_accessor(parts, change) {\n  if(!(parts = parts.match(string_regexp))) {\n    return\n  }\n\n  var val = parts[1] || parts[2] || ''\n\n  return function(ignore, context) {\n    change(val, context)\n  }\n}\n\nfunction create_number_accessor(parts, change) {\n  if(!(parts = parts.match(number_regexp))) {\n    return\n  }\n\n  var val = +parts[1]\n\n  return function(ignore, context) {\n    change(val, context)\n  }\n}\n","module.exports = add_arrow\n\nfunction add_arrow(types) {\n  types.push(create_arrow)\n}\n\nfunction create_arrow(parts, change) {\n  parts = this.split(parts, '->')\n\n  if(parts.length < 2) {\n    return\n  }\n\n  var right = this.createPart(parts[1], change)\n    , left = this.createPart(parts[0], update)\n\n  return left\n\n  function update(val, ctx) {\n    right(val, ctx)\n  }\n}\n","module.exports = split\n\nfunction split(parts, key, _pairs, all) {\n  var pairs = [['(', ')']]\n    , layers = []\n\n  pairs = _pairs || pairs\n\n  for(var i = 0, l = parts.length; i < l; ++i) {\n    if(!layers.length) {\n      for(var j = 0, l2 = key.length; j < l2; ++j) {\n        if(parts[i + j] !== key[j]) {\n          break\n        }\n      }\n\n      if(j === key.length) {\n        break\n      }\n    }\n\n    if(layers.length && layers[layers.length - 1] === parts[i]) {\n      layers.pop()\n\n      continue\n    }\n\n    for(var j = 0, l2 = pairs.length; j < l2; ++j) {\n      if(parts[i] === pairs[j][0]) {\n        layers.push(pairs[j][1])\n\n        break\n      }\n    }\n  }\n\n  if(layers.length) {\n    throw new Error(\n      'Unmatched pair in ' + parts + '. expecting: ' + layers.pop()\n    )\n  }\n\n  if(i === parts.length) {\n    return [parts]\n  }\n\n  var right = parts.slice(i + key.length)\n    , left = parts.slice(0, i)\n\n  if(!all) {\n    return [left, right]\n  }\n\n  return [left].concat(split(right, key, pairs, all))\n}\n","module.exports = debounce\n\nfunction debounce(fn, delay, at_start, guarantee) {\n  var timeout\n    , args\n\n  return function() {\n    var self = this\n\n    args = Array.prototype.slice.call(arguments)\n\n    if(timeout && (at_start || guarantee)) {\n      return\n    } else if(!at_start) {\n      clear()\n\n      return timeout = setTimeout(run, delay)\n    }\n\n    timeout = setTimeout(clear, delay)\n    fn.apply(self, args)\n\n    function run() {\n      clear()\n      fn.apply(self, args)\n    }\n\n    function clear() {\n      clearTimeout(timeout)\n      timeout = null\n    }\n  }\n}\n"]}