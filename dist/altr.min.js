(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
function altrExtend(e,d){function n(e,d,n){return t(e,d,extend(!0,Object.create(r),n||{}))}var r=extend(!0,e,d),t=this;return n.render=t.render.bind(t,r),n.extend=t.extend.bind(t),n.addTag=t.addTag.bind(t),n.include=t.include.bind(t),n.addHelper=t.addHelper.bind(t),n.addDecorator=t.addDecorator.bind(t),n}var extend=require("extend");module.exports=altrExtend;

},{"extend":37}],2:[function(require,module,exports){
(function (global){
function altr(t,e,r){if(!(this instanceof altr))return new altr(t,e,r);var o=r||{};if(this.helpers=extend(!1,Object.create(altr.helpers),o.helpers||{}),this.decorators=extend(!1,Object.create(altr.decorators),o.decorators||{}),this.root=t,this.sync=!!o.sync,this.tagRegExp=makeTagRegExp(o.delimiters),this.document=o.doc||global.document||require(domModule).document,this.lookups=dirtybit(e,{helpers:this.helpers},{}),this.batch=batch(function(){this.sync||raf(this.runBatch.bind(this))}.bind(this)),global.Buffer&&t instanceof global.Buffer&&(t=t.toString()),"string"==typeof t){var i=this.document.createElement("div");for(i.innerHTML=t,this.root=this.document.createDocumentFragment();i.firstChild;)this.root.appendChild(i.firstChild)}this.children=this.initNodes(this.rootNodes(),this.lookups),this.runHooks(this.children.hooks,"insert",null),this.runBatch()}function update(t,e){this.state=t,this.lookups.update(t),(e||this.sync)&&this.runBatch()}function initNodes(t,e,r,o){function i(t,e){var r=initNode.call(n,a,e);return r?t.concat(r):t}var n=this,a=e||dirtybit(r,{helpers:this.helpers},o||{}),s=Array.prototype.slice.call(t),d=s.reduce(i,[]).filter(Boolean);return{hooks:d,lookups:a,nodes:s}}function initNode(t,e){return node_handlers[e.nodeType]?node_handlers[e.nodeType].call(this,e,t):e.childNodes&&e.childNodes.length?this.initNodes(t,e.childNodes):null}function rootNodes(){return this.root.nodeType===this.document.DOCUMENT_FRAGMENT_NODE?[].slice.call(this.root.childNodes):[this.root]}function addHelper(t,e){this.helpers[t]=e}function addTag(t,e){this.prototype.tags[t]=e,this.prototype.tagList.push({attr:t,constructor:e})}function appendTo(t){for(var e=this.rootNodes(),r=0,o=e.length;o>r;++r)t.appendChild(getEl(e[r]))}function addDecorator(t,e){this.decorators[t]=e}function runBatch(){this.batch.run()&&this.emit("update",this.state)}function makeTagRegExp(t){var e=t||["{{","}}"];return new RegExp(e[0]+"\\s*(.*?)\\s*"+e[1])}var EE=require("events").EventEmitter,batch=require("batch-queue"),dirtybit=require("dirtybit"),extend=require("extend"),templateString=require("./template-string"),elementNode=require("./element-node"),mergeHooks=require("./merge-hooks"),altrExtend=require("./altr-extend"),textNode=require("./text-node"),toString=require("./to-string"),runHooks=require("./run-hooks"),getEl=require("./get-element"),destroy=require("./destroy"),render=require("./render"),remove=require("./remove"),raf=require("./raf"),domModule="micro-dom";module.exports=altr,altr.helpers={},altr.decorators={},altr.render=render,altr.addTag=addTag,altr.extend=altrExtend,altr.addHelper=addHelper,altr.addDecorator=addDecorator,altr.prototype=Object.create(EE.prototype),altr.prototype.constructor=altr,altr.prototype.templateString=templateString,altr.prototype.addDecorator=addDecorator,altr.prototype.mergeHooks=mergeHooks,altr.prototype.initNodes=initNodes,altr.prototype.rootNodes=rootNodes,altr.prototype.addHelper=addHelper,altr.prototype.runBatch=runBatch,altr.prototype.toString=toString,altr.prototype.runHooks=runHooks,altr.prototype.getElement=getEl,altr.prototype.destroy=destroy,altr.prototype.remove=remove,altr.prototype.into=appendTo,altr.prototype.update=update,altr.prototype.tagList=[],altr.prototype.tags={};var node_handlers={};node_handlers[1]=elementNode,node_handlers[3]=textNode;

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"./altr-extend":1,"./destroy":6,"./element-node":7,"./get-element":8,"./merge-hooks":10,"./raf":11,"./remove":12,"./render":13,"./run-hooks":14,"./template-string":25,"./text-node":26,"./to-string":27,"batch-queue":28,"dirtybit":32,"events":38,"extend":37}],3:[function(require,module,exports){
function rawAttribute(t,e,r){this.templateString(e.value,this.batch.add(t.setAttribute.bind(t,e.name)),r)}function altrAttribute(t,e,r){function a(e){return e||""===e||0===e?void t.setAttribute(i,e):t.removeAttribute(i)}var i=e.name.slice("altr-attr-".length);r.on(e.value,this.batch.add(a)),t.removeAttribute(e.name)}function altrProperty(t,e,r){function a(e){t[i]=e}var i=e.name.slice("altr-prop-".length);t.removeAttribute(e.name),r.on(e.value,this.batch.add(a))}module.exports.raw=rawAttribute,module.exports.altr=altrAttribute,module.exports.prop=altrProperty;

},{}],4:[function(require,module,exports){
(function (global){
module.exports=global.altr=require("./index");

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"./index":9}],5:[function(require,module,exports){
function decorators(e,r,t){function o(r){function o(){u.update&&t.removeListener(s,a),u.destroy&&u.destroy()}function a(e){u.update.apply(null,e)}var u=n.decorators[r.name].call(n,e),s="["+r.value+"]";if(u){var d={insert:u.insert,remove:u.remove};return u.update&&t.on(s,a),d.destroy=o,d}}var n=this;return r.map(o)}module.exports=decorators;

},{}],6:[function(require,module,exports){
function destroy(o,e,r){var t=this;t.remove(o,e,function(e){t.runHooks(o,"destroy",e),r()})}module.exports=destroy;

},{}],7:[function(require,module,exports){
function createElementNode(t,e){for(var r,a=[],c=this,o=Array.prototype.slice.call(t.attributes),l={},s=0,n=o.length;n>s;++s)c.tags[o[s].name]?l[o[s].name]=o[s].value:c.decorators[o[s].name]?a.push(o[s]):o[s].name.lastIndexOf("altr-attr-",0)?o[s].name.lastIndexOf("altr-prop-",0)?createAttr.raw.call(this,t,o[s],e):createAttr.prop.call(this,t,o[s],e):createAttr.altr.call(this,t,o[s],e);var i=createDecorators.call(c,t,a,e);for(s=0,n=c.tagList.length;n>s;++s)if(r=l[c.tagList[s].attr])return i.concat([c.tagList[s].constructor.call(c,t,r,e,i)||{}]);return i.concat(c.initNodes(t.childNodes,e).hooks)}var createDecorators=require("./decorators"),createAttr=require("./attributes");module.exports=createElementNode;

},{"./attributes":3,"./decorators":5}],8:[function(require,module,exports){
function get(r){for(var e=r;e&&e._altrPlaceholder;)if(e=e._altrPlaceholder,e===r)throw new Error("placeholder circular refference");return e}module.exports=get;

},{}],9:[function(require,module,exports){
var placeholder=require("./tags/placeholder"),childrenTag=require("./tags/children"),includeTag=require("./tags/include"),textTag=require("./tags/text"),htmlTag=require("./tags/html"),withTag=require("./tags/with"),forTag=require("./tags/for"),rawTag=require("./tags/raw"),ifTag=require("./tags/if"),altr=require("./altr");module.exports=altr,altr.addTag("altr-children",childrenTag),altr.addTag("altr-replace",placeholder),altr.addTag("altr-include",includeTag),altr.addTag("altr-text",textTag),altr.addTag("altr-html",htmlTag),altr.addTag("altr-with",withTag),altr.addTag("altr-for",forTag),altr.addTag("altr-raw",rawTag),altr.addTag("altr-if",ifTag);

},{"./altr":2,"./tags/children":16,"./tags/for":17,"./tags/html":18,"./tags/if":19,"./tags/include":20,"./tags/placeholder":21,"./tags/raw":22,"./tags/text":23,"./tags/with":24}],10:[function(require,module,exports){
function merge(e){function n(n,r){for(var t=e(),o=0,i=t.length;i>o;o++)t[o][n]&&t[o][n](r)}function r(n,r){t.remove(e(),n,r)}var t=this;return{insert:n.bind(null,"insert"),destroy:n.bind(null,"destroy"),remove:r}}module.exports=merge;

},{}],11:[function(require,module,exports){
(function (global){
function requestAnimationFrame(e){function t(e){return setTimeout(e,1e3/60)}var n=global.requestAnimationFrame||global.webkitRequestAnimationFrame||global.mozRequestAnimationFrame||t;return n(e)}module.exports=requestAnimationFrame;

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],12:[function(require,module,exports){
function remove(e,o,r){function m(){--n||(n=-1,r())}for(var n=e.length,v=0,t=n;t>v;v++)e[v].remove?e[v].remove(o,m):--n;n||r()}module.exports=remove;

},{}],13:[function(require,module,exports){
function render(e,n,r){this.includes[e]&&(e=this.includes[e]);var t=this(e);return t.update(n||{},!0),r&&t.into(r),t}module.exports=render;

},{}],14:[function(require,module,exports){
function runHooks(o,n,r){for(var u=0,e=o.length;e>u;u++)o[u][n]&&o[u][n](r)}module.exports=runHooks;

},{}],15:[function(require,module,exports){
function setChildren(e,r){for(var t,l=null,i=r.length-1;i>=0;--i)t=get(r[i]),e.insertBefore(t,l),l=t;for(;(t=e.firstChild)!==l;)e.removeChild(t)}var get=require("./get-element");module.exports=setChildren;

},{"./get-element":8}],16:[function(require,module,exports){
function children(e,n,r){function i(n){for(var r=(Array.isArray(n)?n:[n]).filter(is_node),i=0,d=r.length;d>i&&r[i]===t[i];++i);i===r.length!==t.length&&(t=r,setChildren.call(this,e,t))}var t=[];e.innerHTML="",this.batch.add(r.on(n,i.bind(this)))}function is_node(e){return e&&e.nodeType}var setChildren=require("../set-children");module.exports=children;

},{"../set-children":15}],17:[function(require,module,exports){
function forHandler(e,n,r){function t(e){for(var n=0,r=f.length;r>n;++n){var t=f[n].lookups.scope;t[g]=h[n],t.$index=n,f[n].lookups.update(e)}}function o(n){var o,s;Array.isArray(n)||(n=[]);var a,u=new Array(n.length),g=[],k={},x=[];for(c=[],o=0,s=n.length;s>o;++o)a=i(h,n[o],p),-1!==a?(u[o]=f[a],h[a]=f[a]=k):x.push(u[o]=l()),c=c.concat(u[o].nodes);for(o=0,s=f.length;s>o;++o)f[o]!==k&&g.push(f[o]);f=u.slice(),h=n.slice(),t(r.state),d.destroy(flatten(g),e,v.bind(d,c,flatten(x)))}function i(e,n,r){if(!r)return e.indexOf(n);for(var t=0,o=e.length;o>t;++t)if(e[t][r]===n[r])return t;return-1}function l(){var e=Object.create(r.scope);return e.$index=void 0,e[g]=void 0,d.initNodes(a.cloneNode(!0).childNodes,null,null,e)}function s(n,r){setChildren.call(this,e,n),d.runHooks(r,"insert",e)}var a=e.cloneNode(!0),u=n.match(forRegexp),c=[],f=[],d=this,h=[];if(!u)return console.error("invalid `for` tag: "+n);var v=d.batch.add(s);e.innerHTML="";var p=u[1].split(":")[1],g=u[1].split(":")[0],k=u[2];return r.on(k,o),r.on("this",t),d.mergeHooks(function(){return flatten(f)})}function flatten(e){return e.reduce(function(e,n){return n.hooks?e.concat(n.hooks):e},[])}var setChildren=require("../set-children"),forRegexp=/^(.*?)\s+in\s+(.*$)/;module.exports=forHandler;

},{"../set-children":15}],18:[function(require,module,exports){
function html(t,e,n){function r(e){t.innerHTML="undefined"==typeof e?"":e,t.getAttribute("altr-run-scripts")&&[].forEach.call(t.getElementsByTagName("script"),run)}this.batch.add(n.on(e,r))}function run(t){for(var e=document.createElement("script"),n=t.parentNode,r=t.attributes,o=0,i=r.length;i>o;++o)e.setAttribute(r[o].name,r[o].value);e.textContent=t.textContent,n.insertBefore(e,t),n.removeChild(t)}module.exports=html;

},{}],19:[function(require,module,exports){
(function (global){
function ifTag(o,e,n,t){function r(o){p.runHooks(a.hooks,"destroy",o)}function l(e){d=!!e[0],d?(k(!0,o),a.lookups.update(e[1])):p.remove(c,o,function(){return k(!1,o)})}function i(o){d&&k(!0,o)}function u(o,e){return h?(e(),k(!1)):void p.remove(a.hooks,o,function(){k(!1),e()})}var s=this.document.createComment("altr-if-placeholder"),a=this.initNodes(o.childNodes,null,null,n.scope),c=a.hooks.concat(t),d=null,h=null,f=!0,p=this;global.lookups=a.lookups;var k=this.batch.add(function(e,n){h||e?h&&e?(s.parentNode.replaceChild(o,s),p.runHooks(c,"insert",n),delete o._altrPlaceholder,h=!1):f&&(f=!1,p.runHooks(c,"insert",n)):(o.parentNode.replaceChild(s,o),o._altrPlaceholder=s,h=!0)});return n.on("["+e+", this]",l),{insert:i,remove:u,destroy:r}}module.exports=ifTag;

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],20:[function(require,module,exports){
function include(n,e,o){function t(e){d="string"==typeof e?e:"",l&&r(n,i)}function i(){l||(n.innerHTML=d,l=f.initNodes(n.childNodes,null,o.state,o.scope))}function r(n,e){return l?void(c.push(e)>1||(f.destroy(l,n,function(){var e;for(l||(n.innerHTML="");e=c.pop();)e()}),l=null)):e()}function u(n){l&&l.lookups.update(n)}function s(){o.removeListener("this",u),o.removeListener(e,t)}var c=[],l=null,d="",f=this;return o.on(e,t),o.on("this",u),{insert:i,remove:r,destroy:s}}module.exports=include;

},{}],21:[function(require,module,exports){
function placeholder(e,a,l){function o(a){a&&a.nodeName&&a!==d&&(d.parentNode.replaceChild(a,d),e._altrPlaceholder=a,d=a)}var d=e;this.batch.add(l.on(a,o))}module.exports=placeholder;

},{}],22:[function(require,module,exports){
module.exports=function(){};

},{}],23:[function(require,module,exports){
function text(t,e,n){function o(e){t.textContent="undefined"==typeof e?"":e}this.batch.add(n.on(e,o))}module.exports=text;

},{}],24:[function(require,module,exports){
function withTag(t,o,e){function i(t){var o=Object.create(e.state);o[a[1]]=t,s.lookups.update(o)}var s=this.initNodes(t.childNodes),a=o.split(" as ");return e.on(a[0],i),s.hooks}module.exports=withTag;

},{}],25:[function(require,module,exports){
function templatString(t,i,n){function e(t,n){s[t]=n,i(s.join(""))}if(t.match(this.tagRegExp)){for(var h,g,l=t,s=[];l&&(g=l.match(this.tagRegExp));)(h=l.indexOf(g[0]))&&s.push(l.slice(0,h)),s.push(""),l=l.slice(h+g[0].length),n.on(g[1],e.bind(this,s.length-1));l&&e(s.length,l)}}module.exports=templatString;

},{}],26:[function(require,module,exports){
function initTextNode(t,e){function n(e){t.textContent=e}this.templateString(t.textContent,this.batch.add(n),e)}module.exports=initTextNode;

},{}],27:[function(require,module,exports){
function toString(){function t(t){var e=this.document.createElement("div");return e.appendChild(t.cloneNode(!0)),e.innerHTML}return this.rootNodes().map(function(e){switch(e.nodeType){case this.document.DOCUMENT_FRAGMENT_NODE:case this.document.COMMENT_NODE:return t.call(this,e);case this.document.TEXT_NODE:return e.textContent;default:return e.outerHTML}},this).join("")}module.exports=toString;

},{}],28:[function(require,module,exports){
function Batch(t,u){return this instanceof Batch?(this.jobs=[],this.all=u,this.ready=t,this.queud=!1,void(this.run=this.run.bind(this))):new Batch(t,u)}function add(t){function u(){return h=[].slice.call(arguments),i=this,n?s.all&&s.ready():(n=!0,void s.queue(e))}function e(){n=!1,t.apply(i,h)}var i,h,n=!1,s=this;return u}function queue(t){this.jobs.push(t),(this.all||!this.queued)&&(this.queued=!0,this.ready(this))}function run(){var t=this.jobs;this.jobs=[],this.queued=!1;for(var u=0,e=t.length;e>u;++u)t[u]();return!!t.length}module.exports=Batch,Batch.prototype.queue=queue,Batch.prototype.add=add,Batch.prototype.run=run;

},{}],29:[function(require,module,exports){
function build(e,r,t){function a(e){if("member"===e.type||"index"===e.type||"label"===e.type)return build(e,r,t);var a="_"+r.id++;return r.vars.push("var "+a+" = "+build(e,r,t)),a}function l(e,t){var a="_"+r.id++,l="var "+a+" = "+e+"!==null && "+e+" !== undefined ? "+e+"["+t+"] : undefined";return r.vars.push(l),a}if("group"===e.type)return"("+build(e.data.expression,r,t)+")";if("number"===e.type||"string"===e.type||"keyword"===e.type)return e.value;if("unary"===e.type)return e.data.op+"("+build(e.data.right,r,t)+")";if("helper"===e.type)return r.helpers[e.value]=e,'helpers["'+e.id+'"].value';if("label"===e.type){var u=e.value in t?"scope":"data";if(r[u]=!0,"this"===e.value)return"data";if(r.labels[e.value])return r.labels[e.value];var n=r.labels[e.value]=l(u,'"'+e.value+'"');return n}if("member"===e.type)return l(a(e.data.left),'"'+e.data.right.value+'"');if("index"===e.type)return l(a(e.data.left),a(e.data.right));if("binary"===e.type)return build(e.data.left,r,t)+" "+e.data.op+" "+build(e.data.right,r,t);if("ternary"===e.type)return build(e.data.left,r,t)+" ? "+build(e.data.middle,r,t)+" : "+build(e.data.right,t);if("array"===e.type){for(var d="[",i=0,p=e.data.children.length-1;p>i;++i)d=d+build(e.data.children[i],r,t)+", ";return d+build(e.data.children[i],r,t)+"]"}}function compile(e,r){var t="";r.helpers.length&&(t="  var helpers = this.detector.helpers\n"+t),r.data&&(t="  var data = this.detector.state\n"+t),r.scope&&(t="  var scope = this.detector.scope\n"+t);for(var a=0,l=r.vars.length;l>a;++a)t+="  "+r.vars[a]+"\n";return t+="  this.setValue("+e+")",new Function("",t)}module.exports=function(e,r){for(var t={id:0,helpers:{},labels:{},vars:[],scope:!1,data:!1},a=build(e,t,r||{}),l=Object.keys(t.helpers),u=new Array(l.length),n=0,d=l.length;d>n;++n)u[n]=t.helpers[l[n]];return t.helpers=u,{deps:t,raw:e.value,body:a,compiled:compile(a,t)}},module.exports.helper=function(e){if(!e)return new Function("update","update()");for(var r="update(",t=0;e-1>t;++t)r+="deps["+t+"].value, ";return r+="deps["+t+"].value)",new Function("update, deps",r)};

},{}],30:[function(require,module,exports){
function Expression(e,t,s,i){this.dependents=new List,this.detector=e,this.check=t||passThrough,this.value=void 0,this.shouldUpdate=!1,this.node=s,this.depListItems=new Array(i.length),this.deps=i,this.handlers=[];for(var h=0,o=i.length;o>h;++h)this.depListItems[h]=i[h].dependents.add(this)}function passThrough(e){return e}var List=require("./list");module.exports=Expression,Expression.prototype.update=function(e){(!e||this.shouldUpdate)&&(this.shouldUpdate=!1,this.check())},Expression.prototype.setValue=function(e){if((e!==this.value||e&&"object"==typeof e)&&(this.value=e,this.report(),this.dependents.head))for(var t=this.dependents.head;t;){var s=t.value;this.detector.updating?(s.shouldUpdate=!0,this.detector.queue.push(s)):s.update(!1),t=t.next}},Expression.prototype.report=function(){for(var e=this.handlers,t=this.handlers.length,s=this.value,i=0;t>i;++i)e[i](s)},Expression.prototype.lookup=function(e,t){return null===e||void 0===e?void 0:e[t]},Expression.prototype.remove=function(e){var t;e&&-1!==(t=this.handlers.indexOf(e))?this.handlers.splice(t,1):this.handlers=[],this.checkRemove()},Expression.prototype.checkRemove=function(){if(!this.handlers.length&&!this.dependents.head){delete this.detector.expressions[this.node.value];for(var e=0,t=this.depListItems.length;t>e;++e)this.depListItems[e].remove(),this.deps[e].checkRemove()}};

},{"./list":33}],31:[function(require,module,exports){
function hash(r){var e,h,t,n=0;if(0===r.length)return n;for(e=0,t=r.length;t>e;e++)h=r.charCodeAt(e),n=(n<<5)-n+h,n|=0;return n}module.exports=hash;

},{}],32:[function(require,module,exports){
function ChangeDetector(e,t,r){return this instanceof ChangeDetector?(this.expressions=new List,this.updating=!1,this.expressions=Object.create(null),this.helpers=Object.create(null),this.scope=r||Object.create(null),this.state=e,this.queue=[],this.helpers=Object.create(null),void(this.root=this.on("this",function(){}))):new ChangeDetector(e,t,r)}var List=require("./list.js"),watch=require("./watch"),remove=require("./remove");module.exports=ChangeDetector,ChangeDetector.prototype.on=watch,ChangeDetector.prototype.removeListener=remove,ChangeDetector.prototype.update=function(e){this.state=e,this.updating=!0,this.root.setValue(e),this.updating=!1,this.processQueue()},ChangeDetector.prototype.processQueue=function(){if(!this.updating){for(this.updating=!0;this.queue.length;){var e=this.queue;this.queue=[];for(var t=0,r=e.length;r>t;++t)e[t].update(!0)}this.updating=!1}},ChangeDetector.prototype.addHelper=function(e,t){if("string"!=typeof e)throw new Error("Helper name must be a string");if("function"!=typeof t)throw new Error("Helper must be a function");this.helpers[e]=t};

},{"./list.js":33,"./remove":35,"./watch":36}],33:[function(require,module,exports){
function List(){this.head=null,this.tail=null}function ListItem(t,i,s){this.list=t,this.value=i,this.prev=s,this.next=null}module.exports=List,List.prototype.add=function(t){return this.tail?this.tail=this.tail.next=new ListItem(this,t,this.tail):this.head=this.tail=new ListItem(this,t,null),this.tail},ListItem.prototype.remove=function(){this===this.list.head&&(this.list.head=this.next),this===this.list.tail&&(this.list.tail=this.prev),this.prev&&(this.prev.next=this.next),this.next&&(this.next.prev=this.prev)};

},{}],34:[function(require,module,exports){
function parse(e){return cache[e]||(cache[e]=trim(e,expression,0))}function expression(e,r,n){if(!e||!e[r])return null;for(var t=0,i=types.length;i>t;++t){var a=types[t](e,r,n);if(a)break}if(!a)throw new Error("Unexpected token: "+e[r]+' in "'+e.slice(r,20)+'"');for(var o=a.range[1];-1!==whitesapce.indexOf(e[o]);)o+=1;return-1!==n.indexOf(e[o])?a:continueExpression(e,a,n)}function continueExpression(e,r,n){function t(e,n,t){for(var i=0,a=continuations.length;a>i;++i){var o=continuations[i](r,e,n,t);if(o)break}if(!o)throw new Error("Unexpected token: "+e[n]+' in "'+e.slice(n,n+20)+'"');return o}for(var i=r.range[1];e[i]&&-1===n.indexOf(e[i]);)for(r=trim(e,t,i,n),i=r.range[1];-1!==whitesapce.indexOf(e[i]);)i+=1;if(-1===n.indexOf(e[i]))throw new Error("Expected to find token: "+n);return r}function keyword(e,r){for(var n=0,t=keywords.length;t>n;++n){for(var i=keywords[n],a=0,o=i.length;o>a&&e[r+a]===i[a];++a);if(a===o)break}return n===t?null:new Node("keyword",[r,r+i.length],e,null,!0,keywordValues[i])}function string(e,r){var n=e[r];if('"'!==n&&"'"!==n)return null;for(var t=r+1,i=e[t];i&&i!==n;)"\\"===e&&++t,t+=1,i=e[t];if(e[t++]!==n)throw new Error("Expected string to be closed");return new Node("string",[r,t],e,null,!0,e.slice(r+1,t-1))}function number(e,r){for(var n=!1,t=r,i=e[t];i;){if("."===i){if(n)break;n=!0}else if("0">i||i>"9")break;t+=1,i=e[t]}return t-r?new Node("number",[r,t],e,null,!0,parseInt(e.slice(r,t),10)):null}function label(e,r){var n=e[r];if(0>n||n>9||-1!==reservedCharacters.indexOf(n))return null;var t=r+1;for(n=e[t];n&&-1===reservedCharacters.indexOf(n);)t+=1,n=e[t];return new Node("label",[r,t],e,null)}function array(e,r){if("["!==e[r])return null;for(var n=r+1,t=[],i=[",","]"],a=trim(e,expression,n,i);a;){for(t.push(a),n=a.range[1];-1===i.indexOf(e[n]);)n+=1;if("]"===e[n])break;n+=1,a=trim(e,expression,n,i)}return new Node("array",[r,n+1],e,{children:t})}function group(e,r){if("("!==e[r])return null;for(var n=trim(e,expression,r+1,[")"]),t=n.range[1];-1!==whitesapce.indexOf(e[t]);)t+=1;return new Node("group",[r,t+1],e,{expression:n})}function helper(e,r,n,t){if("label"===e.type&&"("===r[n]){for(var i=n+1,a=[],o=[",",")"],s=trim(r,expression,i,o);s;){for(a.push(s),i=s.range[1];-1===o.indexOf(r[i]);)i+=1;if(")"===r[i])break;i+=1,s=trim(r,expression,i,o)}return i+=1,new Node("helper",[e.range[0],i],r,{left:e,children:a})}}function member(e,r,n){if("."!==r[n])return null;var t=label(r,n+1);if(!t)throw new Error("Expected Label");return new Node("member",[e.range[0],t.range[1]],r,{left:e,right:t})}function index(e,r,n){if("["!==r[n])return null;for(var t=trim(r,expression,n+1,["]"]),i=t.range[1]+1;-1!==whitesapce.indexOf(r[i]);)i+=1;return new Node("index",[e.range[0],i],r,{left:e,right:t})}function unary(e,r,n){for(var t=0,i=unaryOperators.length;i>t;++t){for(var a=unaryOperators[t],o=0,s=a.length;s>o&&e[r+o]===a[o];++o);if(o===s)break}if(t===i)return null;var f=a.length,u=e[r+f];if(f>1&&"-1"===boundary.indexOf(u))return null;var l=trim(e,expression,r+f,n),d=new Node("unary",[r,l.range[1]],e,{op:a,right:l,presidence:4});return l.presidence&&l.presidence>4?(d.right=l.left,l.left=d,l):d}function binary(e,r,n,t){for(var i=0,a=sortedBinaryOperators.length;a>i;++i){for(var o=sortedBinaryOperators[i],s=0,f=o.length;f>s&&r[n+s]===o[s];++s);if(s===f)break}if(i===a)return null;if("in"===o||"instanceof"===o){var u=r[n+o.length];if(-1===boundary.indexOf(u))return null}var l=binaryOperators[o],d=trim(r,expression,n+o.length,t),c=new Node("binary",[e.range[0],d.range[1]],r,{op:o,left:e,right:d,presidence:l});return d.presidence&&d.presidence>=l?(c.right=d.left,d.left=c,d):c}function ternary(e,r,n,t){if("?"!==r[n])return null;var i=trim(r,expression,n+1,[":"]);if(!i)throw new Error('Expected token: ":"');for(var a=i.range[1]+1;-1!==whitesapce.indexOf(r[a]);)a+=1;var o=trim(r,expression,a+1,t);return new Node("ternary",[e.range[0],o.range[1]],r,{left:e,middle:i,right:o,presidence:15})}function trim(e,r,n,t){for(var i=e[n];i&&-1!==whitesapce.indexOf(i);)n+=1,i=e[n];return r(e,n,t||[void 0])}function Node(e,r,n,t,i,a){this.type=e,this.range=r,this.value=n.slice(r[0],r[1]),this.id="_"+hash(this.value),this.data=t,this.litteral=!!i,this.rawValue=a}var hash=require("./hash"),types=[group,array,keyword,number,string,label,unary],continuations=[helper,member,index,binary,ternary],keywords=["true","false","null","undefined"],keywordValues=[!0,!1,null,void 0],unaryOperators=["!","+","-","~","void","instanceof"],whitesapce="  \ufeff\f\n\r	\x0B​  ​᠎ ​  ​    ​  ​  ​\u2028\u2029​  ​　".split(""),reservedCharacters=whitesapce.concat("(){}[]|&^=><+-*%/\\!@#'\"~.,?:`".split("")),boundary=whitesapce.concat(["("]),binaryOperators={"%":5,"/":5,"*":5,"-":6,"+":6,">>":7,"<<":7,">>>":7,"<":8,">":8,"<=":8,">=":8,"instanceof":8,"in":8,"!=":9,"==":9,"!==":9,"===":9,"&":10,"|":11,"^":12,"&&":13,"||":14},sortedBinaryOperators=Object.keys(binaryOperators).sort(function(e,r){return e.length<r.length?1:-1});module.exports=parse;var cache=module.exports.cache={};

},{"./hash":31}],35:[function(require,module,exports){
function remove(e,r){var s,o=parse(e);o&&(s=this.expressions[o.value])&&s.remove(r)}var parse=require("./parse");module.exports=remove;

},{"./parse":34}],36:[function(require,module,exports){
function watch(e,r){var n=this.expressions[e];return n?-1===n.handlers.indexOf(r)&&(n.handlers.push(r),r(n.value)):(n=watchNode(this,parse(e),r),r&&r(n.value)),n}function watchNode(e,r,n){var s;return e.expressions[r.value]?e.expressions[r.value]:(s="helper"===r.type?watchHelper(e,r,n):watchExpression(e,r),s.update(!1),n&&s.handlers.push(n),s)}function watchExpression(e,r){for(var n=build(r,e.scope),s=n.deps.helpers,t=s.length,a=new Array(t),o=0;t>o;++o)a[o]=watchNode(e,n.deps.helpers[o]);(n.deps.data||n.deps.scope)&&e.root&&a.push(e.root);var p=new Expression(e,n.compiled,r,a);return e.expressions[r.value]=p,p}function watchHelper(e,r){function n(e){return d.setValue(e)}function s(){return l(h,i)}var t=r.data.left.value,a=e.helpers[t];if(!a)throw new Error("Unknown helper: "+t);for(var o=r.data.children,p=o.length,i=new Array(p),u=0;p>u;++u)i[u]=watchNode(e,o[u]);var h=a(n);if("function"!=typeof h)throw new Error("helper "+t+" did not return a function");var l=build.helper(i.length),d=new Expression(e,s,r,i);return e.expressions[r.value]=d,e.helpers[r.id]=d,d}var parse=require("./parse"),build=require("./build"),Expression=require("./expression");module.exports=watch;

},{"./build":29,"./expression":30,"./parse":34}],37:[function(require,module,exports){
var hasOwn=Object.prototype.hasOwnProperty,toString=Object.prototype.toString,undefined,isPlainObject=function(t){"use strict";if(!t||"[object Object]"!==toString.call(t)||t.nodeType||t.setInterval)return!1;var r=hasOwn.call(t,"constructor"),n=t.constructor&&t.constructor.prototype&&hasOwn.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!r&&!n)return!1;var e;for(e in t);return e===undefined||hasOwn.call(t,e)};module.exports=function t(){"use strict";var r,n,e,o,c,a,i=arguments[0],s=1,u=arguments.length,f=!1;for("boolean"==typeof i?(f=i,i=arguments[1]||{},s=2):("object"!=typeof i&&"function"!=typeof i||i==undefined)&&(i={});u>s;++s)if(null!=(r=arguments[s]))for(n in r)e=i[n],o=r[n],i!==o&&(f&&o&&(isPlainObject(o)||(c=Array.isArray(o)))?(c?(c=!1,a=e&&Array.isArray(e)?e:[]):a=e&&isPlainObject(e)?e:{},i[n]=t(f,a,o)):o!==undefined&&(i[n]=o));return i};

},{}],38:[function(require,module,exports){
function EventEmitter(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function isFunction(e){return"function"==typeof e}function isNumber(e){return"number"==typeof e}function isObject(e){return"object"==typeof e&&null!==e}function isUndefined(e){return void 0===e}module.exports=EventEmitter,EventEmitter.EventEmitter=EventEmitter,EventEmitter.prototype._events=void 0,EventEmitter.prototype._maxListeners=void 0,EventEmitter.defaultMaxListeners=10,EventEmitter.prototype.setMaxListeners=function(e){if(!isNumber(e)||0>e||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},EventEmitter.prototype.emit=function(e){var t,n,s,i,r,o;if(this._events||(this._events={}),"error"===e&&(!this._events.error||isObject(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;throw TypeError('Uncaught, unspecified "error" event.')}if(n=this._events[e],isUndefined(n))return!1;if(isFunction(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:for(s=arguments.length,i=new Array(s-1),r=1;s>r;r++)i[r-1]=arguments[r];n.apply(this,i)}else if(isObject(n)){for(s=arguments.length,i=new Array(s-1),r=1;s>r;r++)i[r-1]=arguments[r];for(o=n.slice(),s=o.length,r=0;s>r;r++)o[r].apply(this,i)}return!0},EventEmitter.prototype.addListener=function(e,t){var n;if(!isFunction(t))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,isFunction(t.listener)?t.listener:t),this._events[e]?isObject(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,isObject(this._events[e])&&!this._events[e].warned){var n;n=isUndefined(this._maxListeners)?EventEmitter.defaultMaxListeners:this._maxListeners,n&&n>0&&this._events[e].length>n&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())}return this},EventEmitter.prototype.on=EventEmitter.prototype.addListener,EventEmitter.prototype.once=function(e,t){function n(){this.removeListener(e,n),s||(s=!0,t.apply(this,arguments))}if(!isFunction(t))throw TypeError("listener must be a function");var s=!1;return n.listener=t,this.on(e,n),this},EventEmitter.prototype.removeListener=function(e,t){var n,s,i,r;if(!isFunction(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],i=n.length,s=-1,n===t||isFunction(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(isObject(n)){for(r=i;r-- >0;)if(n[r]===t||n[r].listener&&n[r].listener===t){s=r;break}if(0>s)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(s,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},EventEmitter.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],isFunction(n))this.removeListener(e,n);else for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},EventEmitter.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?isFunction(this._events[e])?[this._events[e]]:this._events[e].slice():[]},EventEmitter.listenerCount=function(e,t){var n;return n=e._events&&e._events[t]?isFunction(e._events[t])?1:e._events[t].length:0};

},{}]},{},[4])
//# sourceMappingURL=altr.min.js.map
