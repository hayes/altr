(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error("Cannot find module '"+o+"'")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
function altrExtend(e,d){function n(e,d,n){return new t(e,d,extend(!0,Object.create(r),n||{}))}var r=extend(!0,e,d),t=this;return n.render=t.render.bind(t,r),n.extend=t.extend.bind(t),n.addTag=t.addTag.bind(t),n.include=t.include.bind(t),n.addHelper=t.addHelper.bind(t),n.addDecorator=t.addDecorator.bind(t),n}var extend=require("extend");module.exports=altrExtend;
//# sourceMappingURL=altr.min.map
},{"extend":36}],2:[function(require,module,exports){
(function (global){
function altr(t,e,r){if(!(this instanceof altr))return new altr(t,e,r);var o=r||{};if(this.helpers=extend(!1,Object.create(altr.helpers),o.helpers||{}),this.decorators=extend(!1,Object.create(altr.decorators),o.decorators||{}),this.root=t,this.sync=!!o.sync,this.tagRegExp=makeTagRegExp(o.delimiters),this.document=o.doc||global.document||require(domModule).document,this.lookups=dirtybit(e,{helpers:this.helpers}),this.batch=batch(function(){this.sync||raf(this.runBatch.bind(this))}.bind(this)),global.Buffer&&t instanceof global.Buffer&&(t=t.toString()),"string"==typeof t){var i=this.document.createElement("div");for(i.innerHTML=t,this.root=this.document.createDocumentFragment();i.firstChild;)this.root.appendChild(i.firstChild)}this.children=this.initNodes(this.rootNodes(),this.lookups),this.runHooks(this.children.hooks,"insert",null),this.runBatch()}function update(t,e){this.state=t,this.lookups.update(t),(e||this.sync)&&this.runBatch()}function initNodes(t,e,r){function o(t,e){var r=initNode.call(i,n,e);return r?t.concat(r):t}var i=this,n=e||dirtybit(r,{helpers:this.helpers}),a=Array.prototype.slice.call(t),s=a.reduce(o,[]).filter(Boolean);return{hooks:s,lookups:n,nodes:a}}function initNode(t,e){return node_handlers[e.nodeType]?node_handlers[e.nodeType].call(this,e,t):e.childNodes&&e.childNodes.length?this.initNodes(t,e.childNodes):null}function rootNodes(){return this.root.nodeType===this.document.DOCUMENT_FRAGMENT_NODE?[].slice.call(this.root.childNodes):[this.root]}function addHelper(t,e){this.helpers[t]=e}function addTag(t,e){this.prototype.tags[t]=e,this.prototype.tagList.push({attr:t,constructor:e})}function appendTo(t){for(var e=this.rootNodes(),r=0,o=e.length;o>r;++r)t.appendChild(getEl(e[r]))}function addHelper(t,e){return this.helpers[t]=e}function addDecorator(t,e){return this.decorators[t]=e}function runBatch(){this.batch.run()&&this.emit("update",this.state)}function makeTagRegExp(t){var e=t||["{{","}}"];return new RegExp(e[0]+"\\s*(.*?)\\s*"+e[1])}var EE=require("events").EventEmitter,batch=require("batch-queue"),dirtybit=require("dirtybit"),extend=require("extend"),templateString=require("./template-string"),elementNode=require("./element-node"),mergeHooks=require("./merge-hooks"),altrExtend=require("./altr-extend"),textNode=require("./text-node"),toString=require("./to-string"),runHooks=require("./run-hooks"),getEl=require("./get-element"),destroy=require("./destroy"),render=require("./render"),remove=require("./remove"),raf=require("./raf"),domModule="micro-dom";module.exports=altr,altr.helpers={},altr.decorators={},altr.render=render,altr.addTag=addTag,altr.extend=altrExtend,altr.addHelper=addHelper,altr.addDecorator=addDecorator,altr.prototype=Object.create(EE.prototype),altr.prototype.constructor=altr,altr.prototype.templateString=templateString,altr.prototype.addDecorator=addDecorator,altr.prototype.mergeHooks=mergeHooks,altr.prototype.initNodes=initNodes,altr.prototype.rootNodes=rootNodes,altr.prototype.addHelper=addHelper,altr.prototype.runBatch=runBatch,altr.prototype.toString=toString,altr.prototype.runHooks=runHooks,altr.prototype.getElement=getEl,altr.prototype.destroy=destroy,altr.prototype.remove=remove,altr.prototype.into=appendTo,altr.prototype.update=update,altr.prototype.tagList=[],altr.prototype.tags={};var node_handlers={};node_handlers[1]=elementNode,node_handlers[3]=textNode;
//# sourceMappingURL=altr.min.map
}).call(this,typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{"./altr-extend":1,"./destroy":6,"./element-node":7,"./get-element":8,"./merge-hooks":10,"./raf":11,"./remove":12,"./render":13,"./run-hooks":14,"./template-string":25,"./text-node":26,"./to-string":27,"batch-queue":28,"dirtybit":32,"events":29,"extend":36}],3:[function(require,module,exports){
function rawAttribute(t,e,r){this.templateString(e.value,this.batch.add(t.setAttribute.bind(t,e.name)),r)}function altrAttribute(t,e,r){function a(e){return e||""===e||0===e?void t.setAttribute(i,e):t.removeAttribute(i)}var i=e.name.slice("altr-attr-".length);r.on(e.value,this.batch.add(a)),t.removeAttribute(e.name)}function altrProperty(t,e,r){function a(e){t[i]=e}var i=e.name.slice("altr-prop-".length);t.removeAttribute(e.name),r.on(e.value,this.batch.add(a))}module.exports.raw=rawAttribute,module.exports.altr=altrAttribute,module.exports.prop=altrProperty;
//# sourceMappingURL=altr.min.map
},{}],4:[function(require,module,exports){
(function (global){
module.exports=global.altr=require("./index");
//# sourceMappingURL=altr.min.map
}).call(this,typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{"./index":9}],5:[function(require,module,exports){
function decorators(e,r,t){function o(r){function o(){u.update&&t.removeListener(s,a),u.destroy&&u.destroy()}function a(e){u.update.apply(null,e)}var u=n.decorators[r.name].call(n,e),s="["+r.value+"]";if(u){var d={insert:u.insert,remove:u.remove};return u.update&&t.on(s,a),d.destroy=o,d}}var n=this;return r.map(o)}module.exports=decorators;
//# sourceMappingURL=altr.min.map
},{}],6:[function(require,module,exports){
function destroy(o,e,r){var t=this;t.remove(o,e,function(e){t.runHooks(o,"destroy",e),r()})}module.exports=destroy;
//# sourceMappingURL=altr.min.map
},{}],7:[function(require,module,exports){
function createElementNode(t,e){for(var r,a=[],c=this,o=Array.prototype.slice.call(t.attributes),a=[],l={},s=0,n=o.length;n>s;++s)c.tags[o[s].name]?l[o[s].name]=o[s].value:c.decorators[o[s].name]?a.push(o[s]):o[s].name.lastIndexOf("altr-attr-",0)?o[s].name.lastIndexOf("altr-prop-",0)?createAttr.raw.call(this,t,o[s],e):createAttr.prop.call(this,t,o[s],e):createAttr.altr.call(this,t,o[s],e);for(var i=createDecorators.call(c,t,a,e),s=0,n=c.tagList.length;n>s;++s)if(r=l[c.tagList[s].attr])return i.concat([c.tagList[s].constructor.call(c,t,r,e,i)||{}]);return i.concat(c.initNodes(t.childNodes,e).hooks)}var createDecorators=require("./decorators"),createAttr=require("./attributes");module.exports=createElementNode;
//# sourceMappingURL=altr.min.map
},{"./attributes":3,"./decorators":5}],8:[function(require,module,exports){
function get(r){for(var e=r;e&&e._altrPlaceholder;)if(e=e._altrPlaceholder,e===r)throw new Error("placeholder circular refference");return e}module.exports=get;
//# sourceMappingURL=altr.min.map
},{}],9:[function(require,module,exports){
var placeholder=require("./tags/placeholder"),childrenTag=require("./tags/children"),includeTag=require("./tags/include"),textTag=require("./tags/text"),htmlTag=require("./tags/html"),withTag=require("./tags/with"),forTag=require("./tags/for"),rawTag=require("./tags/raw"),ifTag=require("./tags/if"),altr=require("./altr");module.exports=altr,altr.addTag("altr-children",childrenTag),altr.addTag("altr-replace",placeholder),altr.addTag("altr-include",includeTag),altr.addTag("altr-text",textTag),altr.addTag("altr-html",htmlTag),altr.addTag("altr-with",withTag),altr.addTag("altr-for",forTag),altr.addTag("altr-raw",rawTag),altr.addTag("altr-if",ifTag);
//# sourceMappingURL=altr.min.map
},{"./altr":2,"./tags/children":16,"./tags/for":17,"./tags/html":18,"./tags/if":19,"./tags/include":20,"./tags/placeholder":21,"./tags/raw":22,"./tags/text":23,"./tags/with":24}],10:[function(require,module,exports){
function merge(e){function n(n,r){for(var t=e(),o=0,i=t.length;i>o;o++)t[o][n]&&t[o][n](r)}function r(n,r){t.remove(e(),n,r)}var t=this;return{insert:n.bind(null,"insert"),destroy:n.bind(null,"destroy"),remove:r}}module.exports=merge;
//# sourceMappingURL=altr.min.map
},{}],11:[function(require,module,exports){
(function (global){
function requestAnimationFrame(e){function t(e){return setTimeout(e,1e3/60)}var n=global.requestAnimationFrame||global.webkitRequestAnimationFrame||global.mozRequestAnimationFrame||t;return n(e)}module.exports=requestAnimationFrame;
//# sourceMappingURL=altr.min.map
}).call(this,typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{}],12:[function(require,module,exports){
function remove(e,o,r){function m(){--n||(n=-1,r())}for(var n=e.length,v=0,t=n;t>v;v++)e[v].remove?e[v].remove(o,m):--n;n||r()}module.exports=remove;
//# sourceMappingURL=altr.min.map
},{}],13:[function(require,module,exports){
function render(e,n,r){this.includes[e]&&(e=this.includes[e]);var t=this(e);return t.update(n||{},!0),r&&t.into(r),t}module.exports=render;
//# sourceMappingURL=altr.min.map
},{}],14:[function(require,module,exports){
function runHooks(o,n,r){for(var u=0,e=o.length;e>u;u++)o[u][n]&&o[u][n](r)}module.exports=runHooks;
//# sourceMappingURL=altr.min.map
},{}],15:[function(require,module,exports){
function setChildren(e,r){for(var t,l=null,i=r.length-1;i>=0;--i)t=get(r[i]),e.insertBefore(t,l),l=t;for(;(t=e.firstChild)!==l;)e.removeChild(t)}var get=require("./get-element");module.exports=setChildren;
//# sourceMappingURL=altr.min.map
},{"./get-element":8}],16:[function(require,module,exports){
function children(e,n,r){function i(n){for(var r=(Array.isArray(n)?n:[n]).filter(is_node),i=0,d=r.length;d>i&&r[i]===t[i];++i);i===r.length!==t.length&&(t=r,setChildren.call(this,e,t))}var t=[];e.innerHTML="",this.batch.add(r.on(n,i.bind(this)))}function is_node(e){return e&&e.nodeType}var setChildren=require("../set-children");module.exports=children;
//# sourceMappingURL=altr.min.map
},{"../set-children":15}],17:[function(require,module,exports){
function forHandler(e,n,r){function t(e){for(var n,r=0,t=u.length;t>r;++r)n="object"==typeof e?Object.create(e):{},n[g]=h[r],n.$index=r,u[r].lookups.update(n)}function o(n){Array.isArray(n)||(n=[]);var o,s=new Array(n.length),c=[],f={},g=[];l=[];for(var k=0,x=n.length;x>k;++k)o=i(h,n[k],v),-1!==o?(s[k]=u[o],h[o]=u[o]=f):g.push(s[k]=a()),l=l.concat(s[k].nodes);for(var k=0,x=u.length;x>k;++k)u[k]!==f&&c.push(u[k]);u=s.slice(),h=n.slice(),t(r.state),d.destroy(flatten(c),e,p.bind(d,l,flatten(g)))}function i(e,n,r){if(!r)return e.indexOf(n);for(var t=0,o=e.length;o>t;++t)if(e[t][r]===n[r])return t;return-1}function a(){return d.initNodes(c.cloneNode(!0).childNodes)}function s(n,r){setChildren.call(this,e,n),d.runHooks(r,"insert",e)}var c=e.cloneNode(!0),f=n.match(forRegexp),l=[],u=[],d=this,h=[];if(!f)return console.error("invalid `for` tag: "+n);var p=d.batch.add(s);e.innerHTML="";var v=f[1].split(":")[1],g=f[1].split(":")[0],k=f[2];return r.on(k,o),r.on("this",t),d.mergeHooks(function(){return flatten(u)})}function flatten(e){return e.reduce(function(e,n){return n.hooks?e.concat(n.hooks):e},[])}var setChildren=require("../set-children"),forRegexp=/^(.*?)\s+in\s+(.*$)/;module.exports=forHandler;
//# sourceMappingURL=altr.min.map
},{"../set-children":15}],18:[function(require,module,exports){
function html(t,e,n){function r(e){t.innerHTML="undefined"==typeof e?"":e,t.getAttribute("altr-run-scripts")&&[].forEach.call(t.getElementsByTagName("script"),run)}this.batch.add(n.on(e,r))}function run(t){for(var e=document.createElement("script"),n=t.parentNode,r=t.attributes,o=0,i=r.length;i>o;++o)e.setAttribute(r[o].name,r[o].value);e.textContent=t.textContent,n.insertBefore(e,t),n.removeChild(t)}module.exports=html;
//# sourceMappingURL=altr.min.map
},{}],19:[function(require,module,exports){
function ifTag(e,o,t,n){function r(e){p.runHooks(a.hooks,"destroy",e)}function i(o){d=o,o?(k(!0,e),a.lookups.update(t.state)):p.remove(c,e,function(){return k(!1,e)})}function l(e){d&&k(!0,e)}function s(e,o){return h?(o(),k(!1)):void p.remove(a.hooks,e,function(){k(!1),o()})}var u=this.document.createComment("altr-if-placeholder"),a=this.initNodes(e.childNodes),c=a.hooks.concat(n),d=null,h=null,f=!0,p=this,k=this.batch.add(function(o,t){h||o?h&&o?(u.parentNode.replaceChild(e,u),p.runHooks(c,"insert",t),delete e._altrPlaceholder,h=!1):f&&(f=!1,p.runHooks(c,"insert",t)):(e.parentNode.replaceChild(u,e),e._altrPlaceholder=u,h=!0)});return t.on(o,i,!0),{insert:l,remove:s,destroy:r}}module.exports=ifTag;
//# sourceMappingURL=altr.min.map
},{}],20:[function(require,module,exports){
function include(n,e,o){function t(e){d="string"==typeof e?e:"",c&&r(n,i)}function i(){c||(n.innerHTML=d,c=f.initNodes(n.childNodes,null,o.state))}function r(n,e){return c?void(l.push(e)>1||(f.destroy(c,n,function(){var e;for(c||(n.innerHTML="");e=l.pop();)e()}),c=null)):e()}function u(n){c&&c.lookups.update(n)}function s(){o.removeListener("this",u),o.removeListener(e,t)}var l=[],c=null,d="",f=this;return o.on(e,t),o.on("this",u),{insert:i,remove:r,destroy:s}}module.exports=include;
//# sourceMappingURL=altr.min.map
},{}],21:[function(require,module,exports){
function placeholder(e,a,l){function o(a){a&&a.nodeName&&a!==d&&(d.parentNode.replaceChild(a,d),e._altrPlaceholder=a,d=a)}var d=e;this.batch.add(l.on(a,o))}module.exports=placeholder;
//# sourceMappingURL=altr.min.map
},{}],22:[function(require,module,exports){
module.exports=function(){};
//# sourceMappingURL=altr.min.map
},{}],23:[function(require,module,exports){
function text(t,e,n){function o(e){t.textContent="undefined"==typeof e?"":e}this.batch.add(n.on(e,o))}module.exports=text;
//# sourceMappingURL=altr.min.map
},{}],24:[function(require,module,exports){
function withTag(t,o,e){function i(t){var o=Object.create(e.state);o[a[1]]=t,s.lookups.update(o)}var s=this.initNodes(t.childNodes),a=o.split(" as ");return e.on(a[0],i),s.hooks}module.exports=withTag;
//# sourceMappingURL=altr.min.map
},{}],25:[function(require,module,exports){
function templatString(t,i,n){function e(t,n){s[t]=n,i(s.join(""))}if(t.match(this.tagRegExp)){for(var h,g,l=t,s=[];l&&(g=l.match(this.tagRegExp));)(h=l.indexOf(g[0]))&&s.push(l.slice(0,h)),s.push(""),l=l.slice(h+g[0].length),n.on(g[1],e.bind(this,s.length-1));l&&e(s.length,l)}}module.exports=templatString;
//# sourceMappingURL=altr.min.map
},{}],26:[function(require,module,exports){
function initTextNode(t,e){function n(e){t.textContent=e}this.templateString(t.textContent,this.batch.add(n),e)}module.exports=initTextNode;
//# sourceMappingURL=altr.min.map
},{}],27:[function(require,module,exports){
function toString(){function t(t){var e=this.document.createElement("div");return e.appendChild(t.cloneNode(!0)),e.innerHTML}return this.rootNodes().map(function(e){switch(e.nodeType){case this.document.DOCUMENT_FRAGMENT_NODE:case this.document.COMMENT_NODE:return t.call(this,e);case this.document.TEXT_NODE:return e.textContent;default:return e.outerHTML}},this).join("")}module.exports=toString;
//# sourceMappingURL=altr.min.map
},{}],28:[function(require,module,exports){
function Batch(t,u){return this instanceof Batch?(this.jobs=[],this.all=u,this.ready=t,this.queud=!1,void(this.run=this.run.bind(this))):new Batch(t,u)}function add(t){function u(){return h=[].slice.call(arguments),i=this,n?s.all&&s.ready():(n=!0,void s.queue(e))}function e(){n=!1,t.apply(i,h)}var i,h,n=!1,s=this;return u}function queue(t){this.jobs.push(t),(this.all||!this.queued)&&(this.queued=!0,this.ready(this))}function run(){var t=this.jobs;this.jobs=[],this.queued=!1;for(var u=0,e=t.length;e>u;++u)t[u]();return!!t.length}module.exports=Batch,Batch.prototype.queue=queue,Batch.prototype.add=add,Batch.prototype.run=run;
//# sourceMappingURL=altr.min.map
},{}],29:[function(require,module,exports){
function EventEmitter(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function isFunction(e){return"function"==typeof e}function isNumber(e){return"number"==typeof e}function isObject(e){return"object"==typeof e&&null!==e}function isUndefined(e){return void 0===e}module.exports=EventEmitter,EventEmitter.EventEmitter=EventEmitter,EventEmitter.prototype._events=void 0,EventEmitter.prototype._maxListeners=void 0,EventEmitter.defaultMaxListeners=10,EventEmitter.prototype.setMaxListeners=function(e){if(!isNumber(e)||0>e||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},EventEmitter.prototype.emit=function(e){var t,n,s,i,r,o;if(this._events||(this._events={}),"error"===e&&(!this._events.error||isObject(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;throw TypeError('Uncaught, unspecified "error" event.')}if(n=this._events[e],isUndefined(n))return!1;if(isFunction(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:for(s=arguments.length,i=new Array(s-1),r=1;s>r;r++)i[r-1]=arguments[r];n.apply(this,i)}else if(isObject(n)){for(s=arguments.length,i=new Array(s-1),r=1;s>r;r++)i[r-1]=arguments[r];for(o=n.slice(),s=o.length,r=0;s>r;r++)o[r].apply(this,i)}return!0},EventEmitter.prototype.addListener=function(e,t){var n;if(!isFunction(t))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,isFunction(t.listener)?t.listener:t),this._events[e]?isObject(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,isObject(this._events[e])&&!this._events[e].warned){var n;n=isUndefined(this._maxListeners)?EventEmitter.defaultMaxListeners:this._maxListeners,n&&n>0&&this._events[e].length>n&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())}return this},EventEmitter.prototype.on=EventEmitter.prototype.addListener,EventEmitter.prototype.once=function(e,t){function n(){this.removeListener(e,n),s||(s=!0,t.apply(this,arguments))}if(!isFunction(t))throw TypeError("listener must be a function");var s=!1;return n.listener=t,this.on(e,n),this},EventEmitter.prototype.removeListener=function(e,t){var n,s,i,r;if(!isFunction(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],i=n.length,s=-1,n===t||isFunction(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(isObject(n)){for(r=i;r-->0;)if(n[r]===t||n[r].listener&&n[r].listener===t){s=r;break}if(0>s)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(s,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},EventEmitter.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],isFunction(n))this.removeListener(e,n);else for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},EventEmitter.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?isFunction(this._events[e])?[this._events[e]]:this._events[e].slice():[]},EventEmitter.listenerCount=function(e,t){var n;return n=e._events&&e._events[t]?isFunction(e._events[t])?1:e._events[t].length:0};
//# sourceMappingURL=altr.min.map
},{}],30:[function(require,module,exports){
function build(d,e){if("group"===d.type){var t=build(d.data.expression,e);return{deps:t.deps,body:"("+t.body+")"}}if("number"===d.type||"string"===d.type||"keyword"===d.type)return{body:d.value,deps:[]};if("unary"===d.type){var a=build(d.data.right,e);return{body:d.data.op+"("+a.body+")",deps:a.deps}}if("label"===d.type||"helper"===d.type){var r=addDep(d,e);return{body:"arguments["+r.index+"]",deps:r.deps}}if("member"===d.type){var o=build(d.data.left,e);return"this.lookup("+o.body+', "'+d.data.right.value+'")',{body:"this.lookup("+o.body+', "'+d.data.right.value+'")',deps:o.deps}}if("index"===d.type){var o=build(d.data.left,e),p=build(d.data.right,e.concat(o.deps));return{body:"this.lookup("+o.body+", "+p.body+")",deps:o.deps.concat(p.deps)}}if("binary"===d.type){var o=build(d.data.left,e),p=build(d.data.right,e.concat(o.deps));return{body:o.body+" "+d.data.op+" "+p.body,deps:o.deps.concat(p.deps)}}if("ternary"===d.type){var o=build(d.data.left,e),n=build(d.data.middle,e),p=build(d.data.right,e.concat(o.deps));return{body:o.body+" ? "+n.body+" : "+p.body,deps:o.deps.concat(n.deps,p.deps)}}if("helper"===d.type){var r=addDep(d,e);return{body:"arguments["+r.index+"]",deps:r.deps}}if("array"===d.type){for(var a,i=e,r=[],e=[],u="[",l=0,y=d.data.children.length-1;y>l;++l)a=build(d.data.children[l],i),u+=a.body+", ",r=r.concat(a.deps),i=e.concat(r);return a=build(d.data.children[l],i),{body:u+=a.body+"]",deps:r.concat(a.deps)}}}function addDep(d,e){for(var t=0,a=e.length;a>t&&d.value!==e[t].value;++t);return t===a?{index:t,deps:[d]}:{index:t,deps:[]}}function compile(d){return new Function("","return ("+d+")").bind({lookup:lookup})}function lookup(d,e){return"null"==typeof d||"undefined"==typeof d?void 0:d[e]}module.exports=function(d){var e=build(d,[]);return{deps:e.deps,raw:d.value,body:e.body,compiled:compile(e.body)}};
//# sourceMappingURL=altr.min.map
},{}],31:[function(require,module,exports){
function Expression(e,s,t,p){this.dependents=[],this.deps=[],this.lookup=e,this.type=s,this.changed=!1,this.update=t,this.depValues=[],this.value=p,this.removable=!0}function setValue(e){if(this.value!==e||"object"==typeof e){this.value=e,this.changed=!0;for(var s=0,t=this.dependents.length;t>s;++s)this.dependents[s](e)}}function addDep(e){var s=this.deps.length;this.deps[s]=e;var t=this;e.dependents.push(function(e){t.depValues[s]=e,t.update(t.depValues)}),this.depValues[s]=e.value}module.exports=Expression,Expression.prototype.setValue=setValue,Expression.prototype.addDep=addDep;
//# sourceMappingURL=altr.min.map
},{}],32:[function(require,module,exports){
function DirtyBit(t,e){return this instanceof DirtyBit?(this.options=e||{},this.state=t||{},this.helpers=Object.create(this.options.helpers||null),this.values={},this.watched=[],this.expressions={list:[],map:{}},this.handlers={},this.always={},this.updating=!1,this.rootKey=this.options.rootKey,this.rootExpression=new Expression("this","root",null,this.state),this.expressions.map["this"]=this.rootExpression,this.rootExpression.removable=!1,void(this.rootKey&&(this.expressions[this.rootKey]=this.rootExpression))):new DirtyBit(t,e)}function update(t){this.state=t,this.updating=!0;for(var e=0,s=this.watched.length;s>e;++e)this.watched[e].update();this.updating=!1,this.report()}function report(){for(var t=Object.keys(this.handlers),e=0,s=t.length;s>e;++e){for(var i=this.expressions.map[t[e]],r=this.handlers[t[e]].always,o=0,h=r.length;h>o;++o)r[o](i.value);if(i.changed){r=this.handlers[t[e]].update;for(var o=0,h=r.length;h>o;++o)r[o](i.value);i.changed=!1}}}function addHelper(t,e){this.helpers[t]=e}function on(t,e,s){var i=this.expressions.map[t];return i||(this.updating=!0,i=this.watch(t),this.updating=!1),this.handlers[t]||(this.handlers[t]={always:[],update:[]}),s?this.handlers[t].always.push(e):this.handlers[t].update.push(e),e(i.value),this}var Expression=require("./expression"),remove=require("./remove"),parse=require("./parse"),watch=require("./watch");module.exports=DirtyBit,DirtyBit.prototype.removeListener=remove,DirtyBit.prototype.addHelper=addHelper,DirtyBit.prototype.update=update,DirtyBit.prototype.report=report,DirtyBit.prototype.parse=parse,DirtyBit.prototype.watch=watch,DirtyBit.prototype.on=on,DirtyBit.parsed={};
//# sourceMappingURL=altr.min.map
},{"./expression":31,"./parse":33,"./remove":34,"./watch":35}],33:[function(require,module,exports){
function parse(e){return trim(e,expression,0)}function expression(e,r,n){if(!e||!e[r])return null;for(var t=0,i=types.length;i>t;++t){var a=types[t](e,r,n);if(a)break}if(!a)throw new Error("Unexpected token: "+e[r]+' in "'+e.slice(r,20)+'"');for(var o=a.range[1];-1!==whitesapce.indexOf(e[o]);)o+=1;return-1!==n.indexOf(e[o])?a:continueExpression(e,a,n)}function continueExpression(e,r,n){function t(e,n,t){for(var i=0,a=continuations.length;a>i;++i){var o=continuations[i](r,e,n,t);if(o)break}if(!o)throw new Error("Unexpected token: "+e[n]+' in "'+e.slice(n,n+20)+'"');return o}for(var i=r.range[1];e[i]&&-1===n.indexOf(e[i]);)for(r=trim(e,t,i,n),i=r.range[1];-1!==whitesapce.indexOf(e[i]);)i+=1;if(-1===n.indexOf(e[i]))throw new Error("Expected to find token: "+n);return r}function keyword(e,r){for(var n=0,t=keywords.length;t>n;++n){for(var i=keywords[n],a=0,o=i.length;o>a&&e[r+a]===i[a];++a);if(a===o)break}return n===t?null:new Node("keyword",[r,r+i.length],e,null,!0,keywordValues[i])}function string(e,r){var n=e[r];if('"'!==n&&"'"!==n)return null;for(var t,i=r+1;(t=e[i])&&t!==n;)"\\"===e&&++i,i+=1;if(e[i++]!==n)throw new Error("Expected string to be closed");return new Node("string",[r,i],e,null,!0,e.slice(r+1,i-1))}function number(e,r){for(var n,t=!1,i=r;n=e[i];)if("."!==n){if("0">n||n>"9")break;i+=1}else{if(t)break;t=!0,i+=1}return i-r?new Node("number",[r,i],e,null,!0,parseInt(e.slice(r,i),10)):null}function label(e,r){var n=e[r];if(0>n||n>9||-1!==reservedCharacters.indexOf(n))return null;for(var t=r+1;(n=e[t])&&-1===reservedCharacters.indexOf(n);)t+=1;return new Node("label",[r,t],e,null)}function array(e,r){if("["!==e[r])return null;for(var n,t=r+1,i=[],a=[",","]"];n=trim(e,expression,t,a);){for(i.push(n),t=n.range[1];-1===a.indexOf(e[t]);)t+=1;if("]"===e[t])break;t+=1}return new Node("array",[r,t+1],e,{children:i})}function group(e,r){if("("!==e[r])return null;for(var n=trim(e,expression,r+1,[")"]),t=n.range[1];-1!==whitesapce.indexOf(e[t]);)t+=1;return new Node("group",[r,t+1],e,{expression:n})}function helper(e,r,n){if("label"===e.type&&"("===r[n]){for(var t,i=n+1,a=[],o=[",",")"];t=trim(r,expression,i,o);){for(a.push(t),i=t.range[1];-1===o.indexOf(r[i]);)i+=1;if(")"===r[i])break;i+=1}return i+=1,new Node("helper",[e.range[0],i],r,{left:e,children:a})}}function member(e,r,n){if("."!==r[n])return null;var t=label(r,n+1);if(!t)throw new Error("Expected Label");return new Node("member",[e.range[0],t.range[1]],r,{left:e,right:t})}function index(e,r,n){if("["!==r[n])return null;for(var t=trim(r,expression,n+1,["]"]),i=t.range[1]+1;-1!==whitesapce.indexOf(r[i]);)i+=1;return new Node("index",[e.range[0],i],r,{left:e,right:t})}function unary(e,r,n){for(var t=0,i=unaryOperators.length;i>t;++t){for(var a=unaryOperators[t],o=0,s=a.length;s>o&&e[r+o]===a[o];++o);if(o===s)break}if(t===i)return null;var f=a.length,u=e[r+f];if(f>1&&"-1"===boundary.indexOf(u))return null;var l=trim(e,expression,r+f,n),d=new Node("unary",[r,l.range[1]],e,{op:a,right:l,presidence:4});return l.presidence&&l.presidence>4?(d.right=l.left,l.left=d,l):d}function binary(e,r,n,t){for(var i=0,a=sortedBinaryOperators.length;a>i;++i){for(var o=sortedBinaryOperators[i],s=0,f=o.length;f>s&&r[n+s]===o[s];++s);if(s===f)break}if(i===a)return null;if("in"===o||"instanceof"===o){var u=r[n+o.length];if(-1===boundary.indexOf(u))return null}var l=binaryOperators[o],d=trim(r,expression,n+o.length,t),c=new Node("binary",[e.range[0],d.range[1]],r,{op:o,left:e,right:d,presidence:l});return d.presidence&&d.presidence>=l?(c.right=d.left,d.left=c,d):c}function ternary(e,r,n,t){if("?"!==r[n])return null;var i=trim(r,expression,n+1,[":"]);if(!i)throw new Error('Expected token: ":"');for(var a=i.range[1]+1;-1!==whitesapce.indexOf(r[a]);)a+=1;var o=trim(r,expression,a+1,t);return new Node("ternary",[e.range[0],o.range[1]],r,{left:e,middle:i,right:o,presidence:15})}function trim(e,r,n,t){for(;(chr=e[n])&&-1!==whitesapce.indexOf(chr);)n+=1;return r(e,n,t||[void 0])}function Node(e,r,n,t,i,a){this.type=e,this.range=r,this.value=n.slice(r[0],r[1]),this.data=t,this.litteral=!!i,this.rawValue=a}var types=[group,array,keyword,number,string,label,unary],continuations=[helper,member,index,binary,ternary],keywords=["true","false","null","undefined"],keywordValues=[!0,!1,null,void 0],unaryOperators=["!","+","-","~","void","instanceof"],whitesapce="  ﻿\f\n\r	​  ​᠎ ​  ​    ​  ​  ​\u2028\u2029​  ​　".split(""),reservedCharacters=whitesapce.concat("(){}[]|&^=><+-*%/\\!@#'\"~.,?:`".split("")),boundary=whitesapce.concat(["("]),binaryOperators={"%":5,"/":5,"*":5,"-":6,"+":6,">>":7,"<<":7,">>>":7,"<":8,">":8,"<=":8,">=":8,"instanceof":8,"in":8,"!=":9,"==":9,"!==":9,"===":9,"&":10,"|":11,"^":12,"&&":13,"||":14},sortedBinaryOperators=Object.keys(binaryOperators).sort(function(e,r){return e.length<r.length?1:-1});module.exports.parse=parse;
//# sourceMappingURL=altr.min.map
},{}],34:[function(require,module,exports){
function remove(e,s){if(this.watch.seen[e]){var n=this.watch.seen[e].value,i=this.handlers[n];if(i){var t;-1!==(t=i.update.indexOf(s))&&i.update.splice(t,1),-1!==(t=i.always.indexOf(s))&&i.always.splice(t,1),i.always.length||i.update.length||(delete this.handlers[n],removeExpression(this,this.expressions.map[n]))}}}function removeExpression(e,s){if(!s.dependents.length&&s.removable){delete e.expressions.map[s.lookup];var n="label"===s.type?e.watched:e.expressions.list,i=n.indexOf(s);-1!==i&&n.splice(i,1);for(var t,a=0,l=s.deps.length;l>a;++a)t=s.deps[a],t.dependents.splice(t.dependents.indexOf(s),1),e.handlers[t.lookup]||removeExpression(e,t)}}module.exports=remove;
//# sourceMappingURL=altr.min.map
},{}],35:[function(require,module,exports){
function watch(e){var s=seen[e]||(seen[e]=Parser.parse(e));return watchNode.call(this,s)}function watchNode(e,s){var a;return a="label"===e.type?addLabel.call(this,e):"helper"===e.type?addHelper.call(this,e):addExpression.call(this,e),s&&s.addDep(a),a}function addLabel(e,s){function a(){this.setValue(null===t.state||"undefined"==typeof t.state?void 0:t.state[r])}var t=this,r=e.value;if(this.expressions.map[r])return this.expressions.map[r];var i=new Expression(r,"label",a);return this.watched.push(i),this.expressions.map[r]=i,i.update(),s&&s.addDep(i),i.changed=!1,i}function addExpression(e){var s=e.value;if(this.expressions.map[s])return this.expressions.map[s];var a=build(e),t=new Expression(s,"expression",updateExpression(a.compiled));return this.expressions.map[s]=t,this.expressions.list.push(t),addDeps.call(this,t,a.deps),t.update(),t.changed=!1,t}function addDeps(e,s){for(var a=0,t=s.length;t>a;++a)s[a].litteral?e.depValues[a]=s[a].rawValue:watchNode.call(this,s[a],e)}function addHelper(e){function s(e){return a.updating?p.setValue(e):(a.updating=!0,p.setValue(e),a.updating=!1,void a.report())}var a=this,t=e.value,r=e.data.left.value;if(this.expressions.map[t])return this.expressions.map[t];var i=this.helpers[r];if(!i)throw new Error("could not find handler: "+r);var n=i(s),p=new Expression(t,"helper",function(e){n.apply(null,e)});return this.expressions.map[t]=p,this.expressions.list.push(p),addDeps.call(this,p,e.data.children),n.apply(null,p.depValues),p.changed=!1,p}function updateExpression(e){return function(){this.setValue(e.apply(null,this.depValues))}}var Expression=require("./expression"),Parser=require("./parse"),build=require("./build"),seen={};module.exports=watch,module.exports.seen=seen;
//# sourceMappingURL=altr.min.map
},{"./build":30,"./expression":31,"./parse":33}],36:[function(require,module,exports){
var hasOwn=Object.prototype.hasOwnProperty,toString=Object.prototype.toString,undefined,isPlainObject=function(t){"use strict";if(!t||"[object Object]"!==toString.call(t)||t.nodeType||t.setInterval)return!1;var r=hasOwn.call(t,"constructor"),n=t.constructor&&t.constructor.prototype&&hasOwn.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!r&&!n)return!1;var e;for(e in t);return e===undefined||hasOwn.call(t,e)};module.exports=function t(){"use strict";var r,n,e,o,c,a,i=arguments[0],s=1,u=arguments.length,f=!1;for("boolean"==typeof i?(f=i,i=arguments[1]||{},s=2):("object"!=typeof i&&"function"!=typeof i||i==undefined)&&(i={});u>s;++s)if(null!=(r=arguments[s]))for(n in r)e=i[n],o=r[n],i!==o&&(f&&o&&(isPlainObject(o)||(c=Array.isArray(o)))?(c?(c=!1,a=e&&Array.isArray(e)?e:[]):a=e&&isPlainObject(e)?e:{},i[n]=t(f,a,o)):o!==undefined&&(i[n]=o));return i};
//# sourceMappingURL=altr.min.map
},{}]},{},[4])


//# sourceMappingURL=altr.min.map