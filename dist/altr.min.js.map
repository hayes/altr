{
  "version": 3,
  "sources": [
    "../../../../usr/local/lib/node_modules/browserify/node_modules/browser-pack/_prelude.js",
    "/Users/mhayes/code/altr/lib/altr-extend.js",
    "/Users/mhayes/code/altr/lib/altr.js",
    "/Users/mhayes/code/altr/lib/attributes.js",
    "/Users/mhayes/code/altr/lib/browser.js",
    "/Users/mhayes/code/altr/lib/decorators.js",
    "/Users/mhayes/code/altr/lib/destroy.js",
    "/Users/mhayes/code/altr/lib/element-node.js",
    "/Users/mhayes/code/altr/lib/get-element.js",
    "/Users/mhayes/code/altr/lib/index.js",
    "/Users/mhayes/code/altr/lib/merge-hooks.js",
    "/Users/mhayes/code/altr/lib/raf.js",
    "/Users/mhayes/code/altr/lib/remove.js",
    "/Users/mhayes/code/altr/lib/render.js",
    "/Users/mhayes/code/altr/lib/run-hooks.js",
    "/Users/mhayes/code/altr/lib/set-children.js",
    "/Users/mhayes/code/altr/lib/tags/children.js",
    "/Users/mhayes/code/altr/lib/tags/for.js",
    "/Users/mhayes/code/altr/lib/tags/html.js",
    "/Users/mhayes/code/altr/lib/tags/if.js",
    "/Users/mhayes/code/altr/lib/tags/include.js",
    "/Users/mhayes/code/altr/lib/tags/placeholder.js",
    "/Users/mhayes/code/altr/lib/tags/raw.js",
    "/Users/mhayes/code/altr/lib/tags/text.js",
    "/Users/mhayes/code/altr/lib/tags/with.js",
    "/Users/mhayes/code/altr/lib/template-string.js",
    "/Users/mhayes/code/altr/lib/text-node.js",
    "/Users/mhayes/code/altr/lib/to-string.js",
    "/Users/mhayes/code/altr/node_modules/batch-queue/index.js",
    "/Users/mhayes/code/altr/node_modules/dirtybit/lib/build.js",
    "/Users/mhayes/code/altr/node_modules/dirtybit/lib/expression.js",
    "/Users/mhayes/code/altr/node_modules/dirtybit/lib/hash.js",
    "/Users/mhayes/code/altr/node_modules/dirtybit/lib/index.js",
    "/Users/mhayes/code/altr/node_modules/dirtybit/lib/list.js",
    "/Users/mhayes/code/altr/node_modules/dirtybit/lib/parse.js",
    "/Users/mhayes/code/altr/node_modules/dirtybit/lib/remove.js",
    "/Users/mhayes/code/altr/node_modules/dirtybit/lib/watch.js",
    "/Users/mhayes/code/altr/node_modules/extend/index.js",
    "/usr/local/lib/node_modules/browserify/node_modules/events/events.js"
  ],
  "names": [],
  "mappings": "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",
  "file": "generated.js",
  "sourceRoot": "",
  "sourcesContent": [
    "(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})",
    "var extend = require('extend')\n\nmodule.exports = altrExtend\n\nfunction altrExtend (base, options) {\n  var baseOptions = extend(true, base, options)\n  var altr = this\n\n  extension.render = altr.render.bind(altr, baseOptions)\n  extension.extend = altr.extend.bind(altr)\n  extension.addTag = altr.addTag.bind(altr)\n  extension.include = altr.include.bind(altr)\n  extension.addHelper = altr.addHelper.bind(altr)\n  extension.addDecorator = altr.addDecorator.bind(altr)\n\n  return extension\n\n  function extension (root, state, options) {\n    return altr(root, state, extend(\n        true\n      , Object.create(baseOptions)\n      , options || {}\n    ))\n  }\n}\n",
    "var EE = require('events').EventEmitter\nvar batch = require('batch-queue')\nvar dirtybit = require('dirtybit')\nvar extend = require('extend')\n\nvar templateString = require('./template-string')\nvar elementNode = require('./element-node')\nvar mergeHooks = require('./merge-hooks')\nvar altrExtend = require('./altr-extend')\nvar textNode = require('./text-node')\nvar toString = require('./to-string')\nvar runHooks = require('./run-hooks')\nvar getEl = require('./get-element')\nvar destroy = require('./destroy')\nvar render = require('./render')\nvar remove = require('./remove')\nvar raf = require('./raf')\n\n// dynamic require so it does not make it into the browserify bundle\nvar domModule = 'micro-dom'\n\nmodule.exports = altr\n\naltr.helpers = {}\naltr.decorators = {}\n\naltr.render = render\naltr.addTag = addTag\naltr.extend = altrExtend\naltr.addHelper = addHelper\naltr.addDecorator = addDecorator\n\nfunction altr (root, data, _options) {\n  if (!(this instanceof altr)) {\n    return new altr(root, data, _options) // eslint-disable-line new-cap\n  }\n\n  var options = _options || {}\n\n  this.helpers = extend(\n      false\n    , Object.create(altr.helpers)\n    , options.helpers || {}\n  )\n\n  this.decorators = extend(\n      false\n    , Object.create(altr.decorators)\n    , options.decorators || {}\n  )\n\n  this.root = root\n  this.sync = !!options.sync\n  this.tagRegExp = makeTagRegExp(options.delimiters)\n  this.document = options.doc || global.document || require(domModule).document\n  this.lookups = dirtybit(data, {helpers: this.helpers}, {})\n\n  this.batch = batch(function () {\n    if (!this.sync) {\n      raf(this.runBatch.bind(this))\n    }\n  }.bind(this))\n\n  if (global.Buffer && root instanceof global.Buffer) {\n    root = root.toString()\n  }\n\n  if (typeof root === 'string') {\n    var temp = this.document.createElement('div')\n\n    temp.innerHTML = root\n    this.root = this.document.createDocumentFragment()\n\n    while (temp.firstChild) {\n      this.root.appendChild(temp.firstChild)\n    }\n  }\n\n  this.children = this.initNodes(this.rootNodes(), this.lookups)\n  this.runHooks(this.children.hooks, 'insert', null)\n  this.runBatch()\n}\n\naltr.prototype = Object.create(EE.prototype)\naltr.prototype.constructor = altr\n\naltr.prototype.templateString = templateString\naltr.prototype.addDecorator = addDecorator\naltr.prototype.mergeHooks = mergeHooks\naltr.prototype.initNodes = initNodes\naltr.prototype.rootNodes = rootNodes\naltr.prototype.addHelper = addHelper\naltr.prototype.runBatch = runBatch\naltr.prototype.toString = toString\naltr.prototype.runHooks = runHooks\naltr.prototype.getElement = getEl\naltr.prototype.destroy = destroy\naltr.prototype.remove = remove\naltr.prototype.into = appendTo\naltr.prototype.update = update\naltr.prototype.tagList = []\naltr.prototype.tags = {}\n\nvar node_handlers = {}\n\nnode_handlers[1] = elementNode\nnode_handlers[3] = textNode\n\nfunction update (data, sync) {\n  this.state = data\n  this.lookups.update(data)\n\n  if (sync || this.sync) {\n    this.runBatch()\n  }\n}\n\nfunction initNodes (_nodes, _lookups, state, scope) {\n  var altr = this\n  var lookups = _lookups || dirtybit(state, {helpers: this.helpers}, scope || {})\n  var nodes = Array.prototype.slice.call(_nodes)\n  var hooks = nodes.reduce(join, []).filter(Boolean)\n\n  return {hooks: hooks, lookups: lookups, nodes: nodes}\n\n  function join (list, node) {\n    var hooks = initNode.call(altr, lookups, node)\n\n    return hooks ? list.concat(hooks) : list\n  }\n}\n\nfunction initNode (lookups, el) {\n  return node_handlers[el.nodeType]\n    ? node_handlers[el.nodeType].call(this, el, lookups)\n    : el.childNodes && el.childNodes.length\n    ? this.initNodes(lookups, el.childNodes)\n    : null\n}\n\nfunction rootNodes () {\n  return this.root.nodeType === this.document.DOCUMENT_FRAGMENT_NODE\n    ? [].slice.call(this.root.childNodes)\n    : [this.root]\n}\n\nfunction addHelper (name, helper) {\n  this.helpers[name] = helper\n}\n\nfunction addTag (attr, tag) {\n  this.prototype.tags[attr] = tag\n  this.prototype.tagList.push({\n    attr: attr,\n    constructor: tag\n  })\n}\n\nfunction appendTo (node) {\n  var rootNodes = this.rootNodes()\n\n  for (var i = 0, l = rootNodes.length; i < l; ++i) {\n    node.appendChild(getEl(rootNodes[i]))\n  }\n}\n\nfunction addDecorator (name, fn) {\n  this.decorators[name] = fn\n}\n\nfunction runBatch () {\n  this.batch.run() && this.emit('update', this.state)\n}\n\nfunction makeTagRegExp (_delimiters) {\n  var delimiters = _delimiters || ['{{', '}}']\n\n  return new RegExp(delimiters[0] + '\\\\s*(.*?)\\\\s*' + delimiters[1])\n}\n",
    "module.exports.raw = rawAttribute\nmodule.exports.altr = altrAttribute\nmodule.exports.prop = altrProperty\n\nfunction rawAttribute (el, attr, lookups) {\n  this.templateString(\n      attr.value\n    , this.batch.add(el.setAttribute.bind(el, attr.name))\n    , lookups\n  )\n}\n\nfunction altrAttribute (el, attr, lookups) {\n  var name = attr.name.slice('altr-attr-'.length)\n\n  lookups.on(attr.value, this.batch.add(update))\n  el.removeAttribute(attr.name)\n\n  function update (val) {\n    if (!val && val !== '' && val !== 0) {\n      return el.removeAttribute(name)\n    }\n\n    el.setAttribute(name, val)\n  }\n}\n\nfunction altrProperty (el, attr, lookups) {\n  var name = attr.name.slice('altr-prop-'.length)\n\n  el.removeAttribute(attr.name)\n  lookups.on(attr.value, this.batch.add(update))\n\n  function update (val) {\n    el[name] = val\n  }\n}\n",
    "module.exports = global.altr = require('./index')\n",
    "module.exports = decorators\n\nfunction decorators (el, attrs, lookups) {\n  var altr = this\n\n  return attrs.map(createDecorator)\n\n  function createDecorator (attr) {\n    var decorator = altr.decorators[attr.name].call(altr, el)\n    var expression = '[' + attr.value + ']'\n\n    if (!decorator) {\n      return\n    }\n\n    var hooks = {insert: decorator.insert, remove: decorator.remove}\n\n    if (decorator.update) {\n      lookups.on(expression, update)\n    }\n\n    hooks.destroy = destroy\n\n    return hooks\n\n    function destroy () {\n      if (decorator.update) lookups.removeListener(expression, update)\n\n      if (decorator.destroy) {\n        decorator.destroy()\n      }\n    }\n\n    function update (args) {\n      decorator.update.apply(null, args)\n    }\n  }\n}\n",
    "module.exports = destroy\n\nfunction destroy (children, el, done) {\n  var altr = this\n\n  altr.remove(children, el, function (el) {\n    altr.runHooks(children, 'destroy', el)\n    done()\n  })\n}\n",
    "var createDecorators = require('./decorators')\nvar createAttr = require('./attributes')\n\nmodule.exports = createElementNode\n\nfunction createElementNode (el, lookups) {\n  var decorators = []\n  var altr = this\n  var attr\n\n  var attrs = Array.prototype.slice.call(el.attributes)\n  var altr_tags = {}\n\n  for (var i = 0, l = attrs.length; i < l; ++i) {\n    if (altr.tags[attrs[i].name]) {\n      altr_tags[attrs[i].name] = attrs[i].value\n    } else if (altr.decorators[attrs[i].name]) {\n      decorators.push(attrs[i])\n    } else if (!attrs[i].name.lastIndexOf('altr-attr-', 0)) {\n      createAttr.altr.call(this, el, attrs[i], lookups)\n    } else if (!attrs[i].name.lastIndexOf('altr-prop-', 0)) {\n      createAttr.prop.call(this, el, attrs[i], lookups)\n    } else {\n      createAttr.raw.call(this, el, attrs[i], lookups)\n    }\n  }\n\n  var hooks = createDecorators.call(altr, el, decorators, lookups)\n\n  for (i = 0, l = altr.tagList.length; i < l; ++i) {\n    if ((attr = altr_tags[altr.tagList[i].attr])) {\n      return hooks.concat([\n        altr.tagList[i].constructor.call(altr, el, attr, lookups, hooks) || {}\n      ])\n    }\n  }\n\n  return hooks.concat(altr.initNodes(el.childNodes, lookups).hooks)\n}\n",
    "module.exports = get\n\nfunction get (_el) {\n  var el = _el\n\n  while (el && el._altrPlaceholder) {\n    el = el._altrPlaceholder\n\n    if (el === _el) {\n      throw new Error('placeholder circular refference')\n    }\n  }\n\n  return el\n}\n",
    "var placeholder = require('./tags/placeholder')\nvar childrenTag = require('./tags/children')\nvar includeTag = require('./tags/include')\nvar textTag = require('./tags/text')\nvar htmlTag = require('./tags/html')\nvar withTag = require('./tags/with')\nvar forTag = require('./tags/for')\nvar rawTag = require('./tags/raw')\nvar ifTag = require('./tags/if')\nvar altr = require('./altr')\n\nmodule.exports = altr\n\naltr.addTag('altr-children', childrenTag)\naltr.addTag('altr-replace', placeholder)\naltr.addTag('altr-include', includeTag)\naltr.addTag('altr-text', textTag)\naltr.addTag('altr-html', htmlTag)\naltr.addTag('altr-with', withTag)\naltr.addTag('altr-for', forTag)\naltr.addTag('altr-raw', rawTag)\naltr.addTag('altr-if', ifTag)\n",
    "module.exports = merge\n\nfunction merge (children) {\n  var altr = this\n\n  return {\n    insert: each.bind(null, 'insert'),\n    destroy: each.bind(null, 'destroy'),\n    remove: remove\n  }\n\n  function each (type, el) {\n    var nodes = children()\n\n    for (var i = 0, l = nodes.length; i < l; i++) {\n      nodes[i][type] && nodes[i][type](el)\n    }\n  }\n\n  function remove (el, ready) {\n    altr.remove(children(), el, ready)\n  }\n}\n",
    "module.exports = requestAnimationFrame\n\nfunction requestAnimationFrame (callback) {\n  var raf = global.requestAnimationFrame ||\n    global.webkitRequestAnimationFrame ||\n    global.mozRequestAnimationFrame ||\n    timeout\n\n  return raf(callback)\n\n  function timeout (callback) {\n    return setTimeout(callback, 1000 / 60)\n  }\n}\n",
    "module.exports = remove\n\nfunction remove (hooks, el, ready) {\n  var remaining = hooks.length\n\n  for (var i = 0, l = remaining; i < l; i++) {\n    hooks[i].remove ? hooks[i].remove(el, done) : --remaining\n  }\n\n  if (!remaining) {\n    ready()\n  }\n\n  function done () {\n    if (!--remaining) {\n      remaining = -1\n      ready()\n    }\n  }\n}\n",
    "module.exports = render\n\nfunction render (template, state, el) {\n  if (this.includes[template]) {\n    template = this.includes[template]\n  }\n\n  var instance = this(template)\n\n  instance.update(state || {}, true)\n\n  if (el) {\n    instance.into(el)\n  }\n\n  return instance\n}\n",
    "module.exports = runHooks\n\nfunction runHooks (hooks, type, el) {\n  for (var i = 0, l = hooks.length; i < l; i++) {\n    hooks[i][type] && hooks[i][type](el)\n  }\n}\n",
    "var get = require('./get-element')\n\nmodule.exports = setChildren\n\nfunction setChildren (root, nodes) {\n  var prev = null\n  var el\n\n  for (var i = nodes.length - 1; i >= 0; --i) {\n    el = get(nodes[i])\n    root.insertBefore(el, prev)\n    prev = el\n  }\n\n  while ((el = root.firstChild) !== prev) {\n    root.removeChild(el)\n  }\n}\n",
    "var setChildren = require('../set-children')\n\nmodule.exports = children\n\nfunction children (el, getter, lookups) {\n  var current = []\n\n  el.innerHTML = ''\n  this.batch.add(lookups.on(getter, update.bind(this)))\n\n  function update (val) {\n    var nodes = (Array.isArray(val) ? val : [val]).filter(is_node)\n\n    for (var i = 0, l = nodes.length; i < l; ++i) {\n      if (nodes[i] !== current[i]) {\n        break\n      }\n    }\n\n    if (i === nodes.length === current.length) {\n      return\n    }\n\n    current = nodes\n    setChildren.call(this, el, current)\n  }\n}\n\nfunction is_node (el) {\n  return el && el.nodeType\n}\n",
    "var setChildren = require('../set-children')\nvar forRegexp = /^(.*?)\\s+in\\s+(.*$)/\n\nmodule.exports = forHandler\n\nfunction forHandler (root, args, lookups) {\n  var template = root.cloneNode(true)\n  var parts = args.match(forRegexp)\n  var domNodes = []\n  var children = []\n  var altr = this\n  var items = []\n\n  if (!parts) {\n    return console.error('invalid `for` tag: ' + args)\n  }\n\n  var runUpdates = altr.batch.add(runDomUpdates)\n\n  root.innerHTML = ''\n\n  var unique = parts[1].split(':')[1]\n  var prop = parts[1].split(':')[0]\n  var key = parts[2]\n\n  lookups.on(key, update)\n  lookups.on('this', updateChildren)\n\n  return altr.mergeHooks(function () {\n    return flatten(children)\n  })\n\n  function updateChildren (data) {\n    for (var i = 0, l = children.length; i < l; ++i) {\n      var scope = children[i].lookups.scope\n      scope[prop] = items[i]\n      scope.$index = i\n      children[i].lookups.update(data)\n    }\n  }\n\n  function update (newItems) {\n    var i, l\n    if (!Array.isArray(newItems)) {\n      newItems = []\n    }\n\n    var newChildren = new Array(newItems.length)\n    var removed = []\n    var matched = {}\n    var added = []\n    var index\n\n    domNodes = []\n\n    for (i = 0, l = newItems.length; i < l; ++i) {\n      index = findIndex(items, newItems[i], unique)\n\n      if (index !== -1) {\n        newChildren[i] = children[index]\n        items[index] = children[index] = matched\n      } else {\n        added.push(newChildren[i] = makeChild())\n      }\n\n      domNodes = domNodes.concat(newChildren[i].nodes)\n    }\n\n    for (i = 0, l = children.length; i < l; ++i) {\n      if (children[i] !== matched) {\n        removed.push(children[i])\n      }\n    }\n\n    children = newChildren.slice()\n    items = newItems.slice()\n    updateChildren(lookups.state)\n    altr.destroy(flatten(removed), root, runUpdates.bind(\n        altr\n      , domNodes\n      , flatten(added)\n    ))\n  }\n\n  function findIndex (items, d, unique) {\n    if (!unique) {\n      return items.indexOf(d)\n    }\n\n    for (var i = 0, l = items.length; i < l; ++i) {\n      if (items[i][unique] === d[unique]) {\n        return i\n      }\n    }\n\n    return -1\n  }\n\n  function makeChild () {\n    var scope = Object.create(lookups.scope)\n    scope.$index = undefined\n    scope[prop] = undefined\n    return altr.initNodes(template.cloneNode(true).childNodes, null, null, scope)\n  }\n\n  function runDomUpdates (children, added) {\n    setChildren.call(this, root, children)\n    altr.runHooks(added, 'insert', root)\n  }\n}\n\nfunction flatten (list) {\n  return list.reduce(function (all, part) {\n    return part.hooks ? all.concat(part.hooks) : all\n  }, [])\n}\n",
    "module.exports = html\n\nfunction html (el, accessor, lookups) {\n  this.batch.add(lookups.on(accessor, update))\n\n  function update (val) {\n    el.innerHTML = typeof val === 'undefined' ? '' : val\n\n    if (el.getAttribute('altr-run-scripts')) {\n      [].forEach.call(el.getElementsByTagName('script'), run)\n    }\n  }\n}\n\nfunction run (script) {\n  var fixed = document.createElement('script')\n  var parent = script.parentNode\n  var attrs = script.attributes\n\n  for (var i = 0, l = attrs.length; i < l; ++i) {\n    fixed.setAttribute(attrs[i].name, attrs[i].value)\n  }\n\n  fixed.textContent = script.textContent\n  parent.insertBefore(fixed, script)\n  parent.removeChild(script)\n}\n",
    "module.exports = ifTag\n\nfunction ifTag (el, getter, lookups, decorators) {\n  var placeholder = this.document.createComment('altr-if-placeholder')\n  var children = this.initNodes(el.childNodes, null, null, lookups.scope)\n  var all = children.hooks.concat(decorators)\n  var lastVal = null\n  var hidden = null\n  var first = true\n  var altr = this\n\n  global.lookups = children.lookups\n\n  var update = this.batch.add(function (show, origin) {\n    if (!hidden && !show) {\n      el.parentNode.replaceChild(placeholder, el)\n      el._altrPlaceholder = placeholder\n      hidden = true\n    } else if (hidden && show) {\n      placeholder.parentNode.replaceChild(el, placeholder)\n      altr.runHooks(all, 'insert', origin)\n      delete el._altrPlaceholder\n      hidden = false\n    } else if (first) {\n      first = false\n      altr.runHooks(all, 'insert', origin)\n    }\n  })\n\n  lookups.on('[' + getter + ', this]', toggle)\n\n  return {\n    insert: insert,\n    remove: remove,\n    destroy: destroy\n  }\n\n  function destroy (el) {\n    altr.runHooks(children.hooks, 'destroy', el)\n  }\n\n  function toggle (args) {\n    lastVal = !!args[0]\n\n    if (lastVal) {\n      update(true, el)\n      children.lookups.update(args[1])\n    } else {\n      altr.remove(all, el, function () {\n        return update(false, el)\n      })\n    }\n  }\n\n  function insert (el) {\n    if (lastVal) {\n      update(true, el)\n    }\n  }\n\n  function remove (el, done) {\n    if (hidden) {\n      done()\n\n      return update(false)\n    }\n\n    altr.remove(children.hooks, el, function () {\n      update(false)\n      done()\n    })\n  }\n}\n",
    "module.exports = include\n\nfunction include (el, getter, lookups) {\n  var removeListeners = []\n  var children = null\n  var content = ''\n  var altr = this\n\n  lookups.on(getter, set)\n  lookups.on('this', update)\n\n  return {insert: insert, remove: remove, destroy: destroy}\n\n  function set (data) {\n    content = typeof data === 'string' ? data : ''\n    if (children) remove(el, insert)\n  }\n\n  function insert () {\n    if (children) {\n      return\n    }\n\n    el.innerHTML = content\n    children = altr.initNodes(el.childNodes, null, lookups.state, lookups.scope)\n  }\n\n  function remove (el, done) {\n    if (!children) {\n      return done()\n    }\n\n    if (removeListeners.push(done) > 1) {\n      return\n    }\n\n    altr.destroy(children, el, function () {\n      var listener\n\n      if (!children) {\n        el.innerHTML = ''\n      }\n\n      while ((listener = removeListeners.pop())) {\n        listener()\n      }\n    })\n\n    children = null\n  }\n\n  function update (state) {\n    children && children.lookups.update(state)\n  }\n\n  function destroy () {\n    lookups.removeListener('this', update)\n    lookups.removeListener(getter, set)\n  }\n}\n",
    "module.exports = placeholder\n\nfunction placeholder (original, getter, lookups) {\n  var current = original\n\n  this.batch.add(lookups.on(getter, update))\n\n  function update (val) {\n    if (!val || !val.nodeName || val === current) {\n      return\n    }\n\n    current.parentNode.replaceChild(val, current)\n    original._altrPlaceholder = val\n    current = val\n  }\n}\n",
    "module.exports = function raw () {}\n",
    "module.exports = text\n\nfunction text (el, getter, lookups) {\n  this.batch.add(lookups.on(getter, update))\n\n  function update (val) {\n    el.textContent = typeof val === 'undefined' ? '' : val\n  }\n}\n",
    "module.exports = withTag\n\nfunction withTag (el, getter, lookups) {\n  var children = this.initNodes(el.childNodes)\n  var parts = getter.split(' as ')\n\n  lookups.on(parts[0], update)\n\n  return children.hooks\n\n  function update (_val) {\n    var val = Object.create(lookups.state)\n\n    val[parts[1]] = _val\n    children.lookups.update(val)\n  }\n}\n",
    "module.exports = templatString\n\nfunction templatString (template, change, lookups) {\n  if (!template.match(this.tagRegExp)) {\n    return\n  }\n\n  var remaining = template\n  var parts = []\n  var index\n  var next\n\n  while (remaining && (next = remaining.match(this.tagRegExp))) {\n    if ((index = remaining.indexOf(next[0]))) {\n      parts.push(remaining.slice(0, index))\n    }\n\n    parts.push('')\n    remaining = remaining.slice(index + next[0].length)\n    lookups.on(next[1], setPart.bind(this, parts.length - 1))\n  }\n\n  if (remaining) {\n    setPart(parts.length, remaining)\n  }\n\n  function setPart (idx, val) {\n    parts[idx] = val\n\n    change(parts.join(''))\n  }\n}\n",
    "module.exports = initTextNode\n\nfunction initTextNode (el, lookups) {\n  this.templateString(\n    el.textContent,\n    this.batch.add(update),\n    lookups\n  )\n\n  function update (val) {\n    el.textContent = val\n  }\n}\n",
    "module.exports = toString\n\nfunction toString () {\n  return this.rootNodes().map(function (node) {\n    switch (node.nodeType) {\n      case this.document.DOCUMENT_FRAGMENT_NODE:\n      case this.document.COMMENT_NODE: return clone.call(this, node)\n      case this.document.TEXT_NODE: return node.textContent\n      default: return node.outerHTML\n    }\n  }, this).join('')\n\n  function clone (node) {\n    var temp = this.document.createElement('div')\n\n    temp.appendChild(node.cloneNode(true))\n\n    return temp.innerHTML\n  }\n}\n",
    "module.exports = Batch\n\nfunction Batch(ready, all) {\n  if(!(this instanceof Batch)) {\n    return new Batch(ready, all)\n  }\n\n  this.jobs = []\n  this.all = all\n  this.ready = ready\n  this.queud = false\n  this.run = this.run.bind(this)\n}\n\nBatch.prototype.queue = queue\nBatch.prototype.add = add\nBatch.prototype.run = run\n\nfunction add(fn) {\n  var queued = false\n    , batch = this\n    , self\n    , args\n\n  return queue\n\n  function queue() {\n    args = [].slice.call(arguments)\n    self = this\n\n    if(queued) {\n      return batch.all && batch.ready()\n    }\n\n    queued = true\n    batch.queue(run)\n  }\n\n  function run() {\n    queued = false\n    fn.apply(self, args)\n  }\n}\n\nfunction queue(fn) {\n  this.jobs.push(fn)\n\n  if(this.all || !this.queued) {\n    this.queued = true\n    this.ready(this)\n  }\n}\n\nfunction run() {\n  var jobs = this.jobs\n\n  this.jobs = []\n  this.queued = false\n\n  for(var i = 0, l = jobs.length; i < l; ++i) {\n    jobs[i]()\n  }\n\n  return !!jobs.length\n}\n",
    "module.exports = function (root, scope) {\n  var deps = {\n    id: 0,\n    helpers: {},\n    labels: {},\n    vars: [],\n    scope: false,\n    data: false\n  }\n\n  var built = build(root, deps, scope || {})\n  var helperNames = Object.keys(deps.helpers)\n  var helpers = new Array(helperNames.length)\n\n  for (var i = 0, len = helperNames.length; i < len; ++i) {\n    helpers[i] = deps.helpers[helperNames[i]]\n  }\n\n  deps.helpers = helpers\n\n  return {\n    deps: deps,\n    raw: root.value,\n    body: built,\n    compiled: compile(built, deps)\n  }\n}\n\nmodule.exports.helper = function buildHelper (len) {\n  if (!len) return new Function('update', 'update()')\n  var body = 'update('\n\n  for (var i = 0; i < len - 1; ++i) {\n    body += 'deps[' + i + '].value, '\n  }\n\n  body += 'deps[' + i + '].value)'\n\n  return new Function('update, deps', body)\n}\n\nfunction build (node, deps, scope) {\n  if (node.type === 'group') {\n    return '(' + build(node.data.expression, deps, scope) + ')'\n  }\n\n  if (node.type === 'number' || node.type === 'string' || node.type === 'keyword') {\n    return node.value\n  }\n\n  if (node.type === 'unary') {\n    return node.data.op + '(' + build(node.data.right, deps, scope) + ')'\n  }\n\n  if (node.type === 'helper') {\n    deps.helpers[node.value] = node\n    return 'helpers[\"' + node.id + '\"].value'\n  }\n\n  if (node.type === 'label') {\n    var type = node.value in scope ? 'scope' : 'data'\n    deps[type] = true\n    if (node.value === 'this') return 'data'\n    if (deps.labels[node.value]) return deps.labels[node.value]\n    var id = deps.labels[node.value] = lookup(type, '\"' + node.value + '\"')\n    return id\n  }\n\n  if (node.type === 'member') {\n    return lookup(makeVar(node.data.left), '\"' + node.data.right.value + '\"')\n  }\n\n  if (node.type === 'index') {\n    return lookup(makeVar(node.data.left), makeVar(node.data.right))\n  }\n\n  if (node.type === 'binary') {\n    return build(node.data.left, deps, scope) + ' ' +\n      node.data.op + ' ' + build(node.data.right, deps, scope)\n  }\n\n  if (node.type === 'ternary') {\n    return build(node.data.left, deps, scope) + ' ? ' +\n      build(node.data.middle, deps, scope) + ' : ' +\n      build(node.data.right, scope)\n  }\n\n  if (node.type === 'array') {\n    var arr = '['\n\n    for (var i = 0, l = node.data.children.length - 1; i < l; ++i) {\n      arr = arr + build(node.data.children[i], deps, scope) + ', '\n    }\n\n    return arr + build(node.data.children[i], deps, scope) + ']'\n  }\n\n  function makeVar (node) {\n    if (node.type === 'member' || node.type === 'index' || node.type === 'label') {\n      return build(node, deps, scope)\n    }\n\n    var id = '_' + deps.id++\n    deps.vars.push('var ' + id + ' = ' + build(node, deps, scope))\n    return id\n  }\n\n  function lookup (left, right) {\n    var id = '_' + deps.id++\n    var statement = 'var ' + id + ' = ' + left + '!==null && ' + left +\n      ' !== undefined ? ' + left + '[' + right + '] : undefined'\n\n    deps.vars.push(statement)\n    return id\n  }\n}\n\nfunction compile (raw, deps) {\n  var body = ''\n\n  if (deps.helpers.length) {\n    body = '  var helpers = this.detector.helpers\\n' + body\n  }\n\n  if (deps.data) {\n    body = '  var data = this.detector.state\\n' + body\n  }\n\n  if (deps.scope) {\n    body = '  var scope = this.detector.scope\\n' + body\n  }\n\n  for (var i = 0, len = deps.vars.length; i < len; ++i) {\n    body += '  ' + deps.vars[i] + '\\n'\n  }\n\n  body += '  this.setValue(' + raw + ')'\n\n  return new Function('', body)\n}\n",
    "var List = require('./list')\n\nmodule.exports = Expression\n\nfunction Expression (detector, check, node, deps) {\n  this.dependents = new List()\n  this.detector = detector\n  this.check = check || passThrough\n  this.value = void 0\n  this.shouldUpdate = false\n  this.node = node\n  this.depListItems = new Array(deps.length)\n  this.deps = deps\n  this.handlers = []\n\n  for (var i = 0, len = deps.length; i < len; ++i) {\n    this.depListItems[i] = deps[i].dependents.add(this)\n  }\n}\n\nExpression.prototype.update = function update (onlyOnce) {\n  if (onlyOnce && !this.shouldUpdate) return\n  this.shouldUpdate = false\n  this.check()\n}\n\nExpression.prototype.setValue = function setValue (value) {\n  if (value === this.value && (!value || typeof value !== 'object')) {\n    return\n  }\n\n  this.value = value\n  this.report()\n\n  if (!this.dependents.head) return\n\n  var current = this.dependents.head\n  while (current) {\n    var expression = current.value\n    if (!this.detector.updating) {\n      expression.update(false)\n    } else {\n      expression.shouldUpdate = true\n      this.detector.queue.push(expression)\n    }\n\n    current = current.next\n  }\n}\n\nExpression.prototype.report = function report () {\n  var handlers = this.handlers\n  var len = this.handlers.length\n  var val = this.value\n\n  for (var i = 0; i < len; ++i) {\n    handlers[i](val)\n  }\n}\n\nExpression.prototype.lookup = function lookup (obj, key) {\n  return obj === null || obj === undefined ? undefined : obj[key]\n}\n\nExpression.prototype.remove = function checkRemove (handler) {\n  var idx\n  if (handler && (idx = this.handlers.indexOf(handler)) !== -1) {\n    this.handlers.splice(idx, 1)\n  } else {\n    this.handlers = []\n  }\n\n  this.checkRemove()\n}\n\nExpression.prototype.checkRemove = function checkRemove () {\n  if (this.handlers.length || this.dependents.head) {\n    return\n  }\n\n  delete this.detector.expressions[this.node.value]\n  for (var i = 0, l = this.depListItems.length; i < l; ++i) {\n    this.depListItems[i].remove()\n    this.deps[i].checkRemove()\n  }\n}\n\nfunction passThrough (value) {\n  return value\n}\n",
    "module.exports = hash\n\nfunction hash (str) {\n  var i, chr, len\n  var hash = 0\n  if (str.length === 0) return hash\n  for (i = 0, len = str.length; i < len; i++) {\n    chr = str.charCodeAt(i)\n    hash = ((hash << 5) - hash) + chr\n    hash |= 0\n  }\n\n  return hash\n}\n",
    "var List = require('./list.js')\nvar watch = require('./watch')\nvar remove = require('./remove')\n\nmodule.exports = ChangeDetector\n\nfunction ChangeDetector (state, options, scope) {\n  if (!(this instanceof ChangeDetector)) {\n    return new ChangeDetector(state, options, scope)\n  }\n\n  this.expressions = new List()\n  this.updating = false\n  this.expressions = Object.create(null)\n  this.helpers = Object.create(null)\n  this.scope = scope || Object.create(null)\n  this.state = state\n  this.queue = []\n  this.helpers = Object.create(null)\n  this.root = this.on('this', function () {})\n}\n\nChangeDetector.prototype.on = watch\nChangeDetector.prototype.removeListener = remove\n\nChangeDetector.prototype.update = function update (value) {\n  this.state = value\n  this.updating = true\n  this.root.setValue(value)\n  this.updating = false\n  this.processQueue()\n}\n\nChangeDetector.prototype.processQueue = function processQueue () {\n  if (this.updating) return\n  this.updating = true\n  while (this.queue.length) {\n    var queue = this.queue\n    this.queue = []\n    for (var i = 0, len = queue.length; i < len; ++i) {\n      queue[i].update(true)\n    }\n  }\n\n  this.updating = false\n}\n\nChangeDetector.prototype.addHelper = function addHelper (name, fn) {\n  if (typeof name !== 'string') throw new Error('Helper name must be a string')\n  if (typeof fn !== 'function') throw new Error('Helper must be a function')\n  this.helpers[name] = fn\n}\n",
    "module.exports = List\n\nfunction List () {\n  this.head = null\n  this.tail = null\n}\n\nList.prototype.add = function add (value) {\n  if (this.tail) {\n    this.tail = this.tail.next = new ListItem(this, value, this.tail)\n  } else {\n    this.head = this.tail = new ListItem(this, value, null)\n  }\n\n  return this.tail\n}\n\nfunction ListItem (list, value, prev) {\n  this.list = list\n  this.value = value\n  this.prev = prev\n  this.next = null\n}\n\nListItem.prototype.remove = function () {\n  if (this === this.list.head) this.list.head = this.next\n  if (this === this.list.tail) this.list.tail = this.prev\n  if (this.prev) this.prev.next = this.next\n  if (this.next) this.next.prev = this.prev\n}\n",
    "var hash = require('./hash')\n\nvar types = [group, array, keyword, number, string, label, unary]\nvar continuations = [helper, member, index, binary, ternary]\nvar keywords = ['true', 'false', 'null', 'undefined']\nvar keywordValues = [true, false, null, undefined]\nvar unaryOperators = ['!', '+', '-', '~', 'void', 'instanceof']\nvar whitesapce = ' \\xA0\\uFEFF\\f\\n\\r\\t\\v​\\u00a0\\u1680​\\u180e\\u2000​\\u2001\\u2002​\\u2003\\u2004\\u2005\\u2006​\\u2007\\u2008​\\u2009\\u200a​\\u2028\\u2029​\\u202f\\u205f​\\u3000'.split('')\nvar reservedCharacters = whitesapce.concat('(){}[]|&^=><+-*%/\\\\!@#\\'\"~.,?:`'.split(''))\nvar boundary = whitesapce.concat(['('])\nvar binaryOperators = {\n  '%': 5,\n  '/': 5,\n  '*': 5,\n  '-': 6,\n  '+': 6,\n  '>>': 7,\n  '<<': 7,\n  '>>>': 7,\n  '<': 8,\n  '>': 8,\n  '<=': 8,\n  '>=': 8,\n  instanceof: 8,\n  in: 8,\n  '!=': 9,\n  '==': 9,\n  '!==': 9,\n  '===': 9,\n  '&': 10,\n  '|': 11,\n  '^': 12,\n  '&&': 13,\n  '||': 14\n}\n\nvar sortedBinaryOperators = Object.keys(binaryOperators).sort(function (l, r) {\n  return l.length < r.length ? 1 : -1\n})\n\nmodule.exports = parse\n\nvar cache = module.exports.cache = {}\n\nfunction parse (str) {\n  return cache[str] || (cache[str] = trim(str, expression, 0))\n}\n\nfunction expression (str, start, end) {\n  if (!str || !str[start]) return null\n  for (var i = 0, l = types.length; i < l; ++i) {\n    var node = types[i](str, start, end)\n    if (node) break\n  }\n\n  if (!node) {\n    throw new Error(\n      'Unexpected token: ' + str[start] + ' in \"' + str.slice(start, 20) + '\"'\n    )\n  }\n\n  var cur = node.range[1]\n  while (whitesapce.indexOf(str[cur]) !== -1) cur = cur + 1\n\n  return end.indexOf(str[cur]) !== -1 ? node : continueExpression(str, node, end)\n}\n\nfunction continueExpression (str, node, end) {\n  var start = node.range[1]\n  while (str[start] && end.indexOf(str[start]) === -1) {\n    node = trim(str, findContinuation, start, end)\n    start = node.range[1]\n    while (whitesapce.indexOf(str[start]) !== -1) start = start + 1\n  }\n\n  if (end.indexOf(str[start]) === -1) {\n    throw new Error(\n      'Expected to find token: ' + end\n    )\n  }\n\n  return node\n\n  function findContinuation (str, start, end) {\n    for (var i = 0, l = continuations.length; i < l; ++i) {\n      var continuation = continuations[i](node, str, start, end)\n      if (continuation) break\n    }\n\n    if (!continuation) {\n      throw new Error(\n        'Unexpected token: ' + str[start] + ' in \"' + str.slice(start, start + 20) + '\"'\n      )\n    }\n\n    return continuation\n  }\n}\n\nfunction keyword (str, start) {\n  for (var i = 0, l = keywords.length; i < l; ++i) {\n    var word = keywords[i]\n    for (var j = 0, l2 = word.length; j < l2; ++j) {\n      if (str[start + j] !== word[j]) break\n    }\n\n    if (j === l2) break\n  }\n\n  if (i === l) return null\n\n  return new Node(\n    'keyword',\n    [start, start + word.length],\n    str,\n    null,\n    true,\n    keywordValues[word]\n  )\n}\n\nfunction string (str, start) {\n  var open = str[start]\n  if (open !== '\"' && open !== '\\'') return null\n  var cur = start + 1\n  var chr = str[cur]\n  while ((chr) && chr !== open) {\n    if (str === '\\\\') ++cur\n    cur = cur + 1\n    chr = str[cur]\n  }\n\n  if (str[cur++] !== open) throw new Error('Expected string to be closed')\n  return new Node(\n    'string',\n    [start, cur],\n    str,\n    null,\n    true,\n    str.slice(start + 1, cur - 1)\n  )\n}\n\nfunction number (str, start) {\n  var decimal = false\n  var cur = start\n  var chr = str[cur]\n  while (chr) {\n    if (chr === '.') {\n      if (decimal) break\n      decimal = true\n    } else if (chr < '0' || chr > '9') break\n    cur = cur + 1\n    chr = str[cur]\n  }\n\n  return cur - start ? new Node(\n    'number',\n    [start, cur],\n    str,\n    null,\n    true,\n    parseInt(str.slice(start, cur), 10)\n  ) : null\n}\n\nfunction label (str, start) {\n  var chr = str[start]\n  if (chr < 0 || chr > 9 || reservedCharacters.indexOf(chr) !== -1) return null\n  var cur = start + 1\n  chr = str[cur]\n\n  while (chr) {\n    if (reservedCharacters.indexOf(chr) !== -1) break\n    cur = cur + 1\n    chr = str[cur]\n  }\n\n  return new Node('label', [start, cur], str, null)\n}\n\nfunction array (str, start) {\n  if (str[start] !== '[') return null\n  var cur = start + 1\n  var children = []\n  var ends = [',', ']']\n  var next = trim(str, expression, cur, ends)\n  while (next) {\n    children.push(next)\n    cur = next.range[1]\n    while (ends.indexOf(str[cur]) === -1) cur = cur + 1\n    if (str[cur] === ']') break\n    cur = cur + 1\n    next = trim(str, expression, cur, ends)\n  }\n\n  return new Node('array', [start, cur + 1], str, {\n    children: children\n  })\n}\n\nfunction group (str, start) {\n  if (str[start] !== '(') return null\n\n  var node = trim(str, expression, start + 1, [')'])\n  var end = node.range[1]\n  while (whitesapce.indexOf(str[end]) !== -1) end = end + 1\n  return new Node('group', [start, end + 1], str, {\n    expression: node\n  })\n}\n\nfunction helper (left, str, start, end) {\n  if (left.type !== 'label' || str[start] !== '(') return\n  var cur = start + 1\n  var children = []\n  var ends = [',', ')']\n  var next = trim(str, expression, cur, ends)\n  while (next) {\n    children.push(next)\n    cur = next.range[1]\n    while (ends.indexOf(str[cur]) === -1) cur = cur + 1\n    if (str[cur] === ')') break\n    cur = cur + 1\n    next = trim(str, expression, cur, ends)\n  }\n\n  cur = cur + 1\n\n  return new Node('helper', [left.range[0], cur], str, {\n    left: left,\n    children: children\n  })\n}\n\nfunction member (left, str, start) {\n  if (str[start] !== '.') return null\n  var node = label(str, start + 1)\n\n  if (!node) throw new Error('Expected Label')\n  return new Node('member', [left.range[0], node.range[1]], str, {\n    left: left,\n    right: node\n  })\n}\n\nfunction index (left, str, start) {\n  if (str[start] !== '[') return null\n  var node = trim(str, expression, start + 1, [']'])\n  var end = node.range[1] + 1\n  while (whitesapce.indexOf(str[end]) !== -1) end = end + 1\n  return new Node('index', [left.range[0], end], str, {\n    left: left,\n    right: node\n  })\n}\n\nfunction unary (str, start, end) {\n  for (var i = 0, l = unaryOperators.length; i < l; ++i) {\n    var op = unaryOperators[i]\n    for (var j = 0, l2 = op.length; j < l2; ++j) {\n      if (str[start + j] !== op[j]) break\n    }\n\n    if (j === l2) break\n  }\n\n  if (i === l) return null\n  var len = op.length\n  var next = str[start + len]\n  if (len > 1 && boundary.indexOf(next) === '-1') return null\n  var child = trim(str, expression, start + len, end)\n  var node = new Node('unary', [start, child.range[1]], str, {\n    op: op,\n    right: child,\n    presidence: 4\n  })\n\n  if (child.presidence && child.presidence > 4) {\n    node.right = child.left\n    child.left = node\n    return child\n  }\n\n  return node\n}\n\nfunction binary (left, str, start, end) {\n  for (var i = 0, l = sortedBinaryOperators.length; i < l; ++i) {\n    var op = sortedBinaryOperators[i]\n    for (var j = 0, l2 = op.length; j < l2; ++j) {\n      if (str[start + j] !== op[j]) break\n    }\n\n    if (j === l2) break\n  }\n\n  if (i === l) return null\n  if (op === 'in' || op === 'instanceof') {\n    var next = str[start + op.length]\n    if (boundary.indexOf(next) === -1) return null\n  }\n\n  var presidence = binaryOperators[op]\n  var right = trim(str, expression, start + op.length, end)\n  var node = new Node('binary', [left.range[0], right.range[1]], str, {\n    op: op,\n    left: left,\n    right: right,\n    presidence: presidence\n  })\n\n  if (right.presidence && right.presidence >= presidence) {\n    node.right = right.left\n    right.left = node\n    return right\n  }\n\n  return node\n}\n\nfunction ternary (condition, str, start, end) {\n  if (str[start] !== '?') return null\n  var ok = trim(str, expression, start + 1, [':'])\n  if (!ok) throw new Error('Expected token: \":\"')\n  var next = ok.range[1] + 1\n  while (whitesapce.indexOf(str[next]) !== -1) next = next + 1\n  var not = trim(str, expression, next + 1, end)\n\n  return new Node('ternary', [condition.range[0], not.range[1]], str, {\n    left: condition,\n    middle: ok,\n    right: not,\n    presidence: 15\n  })\n}\n\nfunction trim (str, parse, start, end) {\n  var chr = str[start]\n  while (chr) {\n    if (whitesapce.indexOf(chr) === -1) break\n    start = start + 1\n    chr = str[start]\n  }\n\n  return parse(str, start, end || [undefined])\n}\n\nfunction Node (type, range, str, data, litteral, val) {\n  this.type = type\n  this.range = range\n  this.value = str.slice(range[0], range[1])\n  this.id = '_' + hash(this.value)\n  this.data = data\n  this.litteral = !!litteral\n  this.rawValue = val\n}\n",
    "var parse = require('./parse')\n\nmodule.exports = remove\n\nfunction remove (expression, handler) {\n  var node = parse(expression)\n  var exp\n\n  if (!node || !(exp = this.expressions[node.value])) {\n    return\n  }\n\n  exp.remove(handler)\n}\n",
    "var parse = require('./parse')\nvar build = require('./build')\nvar Expression = require('./expression')\n\nmodule.exports = watch\n\nfunction watch (expression, handler) {\n  var exp = this.expressions[expression]\n\n  if (!exp) {\n    exp = watchNode(this, parse(expression), handler)\n    if (handler) {\n      handler(exp.value)\n    }\n  } else if (exp.handlers.indexOf(handler) === -1) {\n    exp.handlers.push(handler)\n    handler(exp.value)\n  }\n\n  return exp\n}\n\nfunction watchNode (detector, node, handler) {\n  var expression\n\n  if (detector.expressions[node.value]) return detector.expressions[node.value]\n  if (node.type === 'helper') {\n    expression = watchHelper(detector, node, handler)\n  } else {\n    expression = watchExpression(detector, node)\n  }\n\n  expression.update(false)\n\n  if (handler) {\n    expression.handlers.push(handler)\n  }\n\n  return expression\n}\n\nfunction watchExpression (detector, node) {\n  var built = build(node, detector.scope)\n  var helpers = built.deps.helpers\n  var len = helpers.length\n  var deps = new Array(len)\n\n  for (var i = 0; i < len; ++i) {\n    deps[i] = watchNode(detector, built.deps.helpers[i])\n  }\n\n  if ((built.deps.data || built.deps.scope) && detector.root) {\n    deps.push(detector.root)\n  }\n\n  var expression = new Expression(detector, built.compiled, node, deps)\n\n  detector.expressions[node.value] = expression\n\n  return expression\n}\n\nfunction watchHelper (detector, node) {\n  var name = node.data.left.value\n  var constructor = detector.helpers[name]\n  if (!constructor) {\n    throw new Error('Unknown helper: ' + name)\n  }\n\n  var children = node.data.children\n  var len = children.length\n  var deps = new Array(len)\n\n  for (var i = 0; i < len; ++i) {\n    deps[i] = watchNode(detector, children[i])\n  }\n\n  var helper = constructor(change)\n\n  if (typeof helper !== 'function') {\n    throw new Error('helper ' + name + ' did not return a function')\n  }\n\n  var built = build.helper(deps.length)\n  var expression = new Expression(detector, check, node, deps)\n\n  detector.expressions[node.value] = expression\n  detector.helpers[node.id] = expression\n\n  return expression\n\n  function change (value) {\n    return expression.setValue(value)\n  }\n\n  function check () {\n    return built(helper, deps)\n  }\n}\n",
    "var hasOwn = Object.prototype.hasOwnProperty;\nvar toString = Object.prototype.toString;\nvar undefined;\n\nvar isPlainObject = function isPlainObject(obj) {\n\t\"use strict\";\n\tif (!obj || toString.call(obj) !== '[object Object]' || obj.nodeType || obj.setInterval) {\n\t\treturn false;\n\t}\n\n\tvar has_own_constructor = hasOwn.call(obj, 'constructor');\n\tvar has_is_property_of_method = obj.constructor && obj.constructor.prototype && hasOwn.call(obj.constructor.prototype, 'isPrototypeOf');\n\t// Not own constructor property must be Object\n\tif (obj.constructor && !has_own_constructor && !has_is_property_of_method) {\n\t\treturn false;\n\t}\n\n\t// Own properties are enumerated firstly, so to speed up,\n\t// if last one is own, then all properties are own.\n\tvar key;\n\tfor (key in obj) {}\n\n\treturn key === undefined || hasOwn.call(obj, key);\n};\n\nmodule.exports = function extend() {\n\t\"use strict\";\n\tvar options, name, src, copy, copyIsArray, clone,\n\t\ttarget = arguments[0],\n\t\ti = 1,\n\t\tlength = arguments.length,\n\t\tdeep = false;\n\n\t// Handle a deep copy situation\n\tif (typeof target === \"boolean\") {\n\t\tdeep = target;\n\t\ttarget = arguments[1] || {};\n\t\t// skip the boolean and the target\n\t\ti = 2;\n\t} else if (typeof target !== \"object\" && typeof target !== \"function\" || target == undefined) {\n\t\t\ttarget = {};\n\t}\n\n\tfor (; i < length; ++i) {\n\t\t// Only deal with non-null/undefined values\n\t\tif ((options = arguments[i]) != null) {\n\t\t\t// Extend the base object\n\t\t\tfor (name in options) {\n\t\t\t\tsrc = target[name];\n\t\t\t\tcopy = options[name];\n\n\t\t\t\t// Prevent never-ending loop\n\t\t\t\tif (target === copy) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\t// Recurse if we're merging plain objects or arrays\n\t\t\t\tif (deep && copy && (isPlainObject(copy) || (copyIsArray = Array.isArray(copy)))) {\n\t\t\t\t\tif (copyIsArray) {\n\t\t\t\t\t\tcopyIsArray = false;\n\t\t\t\t\t\tclone = src && Array.isArray(src) ? src : [];\n\t\t\t\t\t} else {\n\t\t\t\t\t\tclone = src && isPlainObject(src) ? src : {};\n\t\t\t\t\t}\n\n\t\t\t\t\t// Never move original objects, clone them\n\t\t\t\t\ttarget[name] = extend(deep, clone, copy);\n\n\t\t\t\t// Don't bring in undefined values\n\t\t\t\t} else if (copy !== undefined) {\n\t\t\t\t\ttarget[name] = copy;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t// Return the modified object\n\treturn target;\n};\n\n",
    "// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nfunction EventEmitter() {\n  this._events = this._events || {};\n  this._maxListeners = this._maxListeners || undefined;\n}\nmodule.exports = EventEmitter;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nEventEmitter.defaultMaxListeners = 10;\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function(n) {\n  if (!isNumber(n) || n < 0 || isNaN(n))\n    throw TypeError('n must be a positive number');\n  this._maxListeners = n;\n  return this;\n};\n\nEventEmitter.prototype.emit = function(type) {\n  var er, handler, len, args, i, listeners;\n\n  if (!this._events)\n    this._events = {};\n\n  // If there is no 'error' event listener then throw.\n  if (type === 'error') {\n    if (!this._events.error ||\n        (isObject(this._events.error) && !this._events.error.length)) {\n      er = arguments[1];\n      if (er instanceof Error) {\n        throw er; // Unhandled 'error' event\n      }\n      throw TypeError('Uncaught, unspecified \"error\" event.');\n    }\n  }\n\n  handler = this._events[type];\n\n  if (isUndefined(handler))\n    return false;\n\n  if (isFunction(handler)) {\n    switch (arguments.length) {\n      // fast cases\n      case 1:\n        handler.call(this);\n        break;\n      case 2:\n        handler.call(this, arguments[1]);\n        break;\n      case 3:\n        handler.call(this, arguments[1], arguments[2]);\n        break;\n      // slower\n      default:\n        len = arguments.length;\n        args = new Array(len - 1);\n        for (i = 1; i < len; i++)\n          args[i - 1] = arguments[i];\n        handler.apply(this, args);\n    }\n  } else if (isObject(handler)) {\n    len = arguments.length;\n    args = new Array(len - 1);\n    for (i = 1; i < len; i++)\n      args[i - 1] = arguments[i];\n\n    listeners = handler.slice();\n    len = listeners.length;\n    for (i = 0; i < len; i++)\n      listeners[i].apply(this, args);\n  }\n\n  return true;\n};\n\nEventEmitter.prototype.addListener = function(type, listener) {\n  var m;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events)\n    this._events = {};\n\n  // To avoid recursion in the case that type === \"newListener\"! Before\n  // adding it to the listeners, first emit \"newListener\".\n  if (this._events.newListener)\n    this.emit('newListener', type,\n              isFunction(listener.listener) ?\n              listener.listener : listener);\n\n  if (!this._events[type])\n    // Optimize the case of one listener. Don't need the extra array object.\n    this._events[type] = listener;\n  else if (isObject(this._events[type]))\n    // If we've already got an array, just append.\n    this._events[type].push(listener);\n  else\n    // Adding the second element, need to change to array.\n    this._events[type] = [this._events[type], listener];\n\n  // Check for listener leak\n  if (isObject(this._events[type]) && !this._events[type].warned) {\n    var m;\n    if (!isUndefined(this._maxListeners)) {\n      m = this._maxListeners;\n    } else {\n      m = EventEmitter.defaultMaxListeners;\n    }\n\n    if (m && m > 0 && this._events[type].length > m) {\n      this._events[type].warned = true;\n      console.error('(node) warning: possible EventEmitter memory ' +\n                    'leak detected. %d listeners added. ' +\n                    'Use emitter.setMaxListeners() to increase limit.',\n                    this._events[type].length);\n      if (typeof console.trace === 'function') {\n        // not supported in IE 10\n        console.trace();\n      }\n    }\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.once = function(type, listener) {\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  var fired = false;\n\n  function g() {\n    this.removeListener(type, g);\n\n    if (!fired) {\n      fired = true;\n      listener.apply(this, arguments);\n    }\n  }\n\n  g.listener = listener;\n  this.on(type, g);\n\n  return this;\n};\n\n// emits a 'removeListener' event iff the listener was removed\nEventEmitter.prototype.removeListener = function(type, listener) {\n  var list, position, length, i;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events || !this._events[type])\n    return this;\n\n  list = this._events[type];\n  length = list.length;\n  position = -1;\n\n  if (list === listener ||\n      (isFunction(list.listener) && list.listener === listener)) {\n    delete this._events[type];\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n\n  } else if (isObject(list)) {\n    for (i = length; i-- > 0;) {\n      if (list[i] === listener ||\n          (list[i].listener && list[i].listener === listener)) {\n        position = i;\n        break;\n      }\n    }\n\n    if (position < 0)\n      return this;\n\n    if (list.length === 1) {\n      list.length = 0;\n      delete this._events[type];\n    } else {\n      list.splice(position, 1);\n    }\n\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.removeAllListeners = function(type) {\n  var key, listeners;\n\n  if (!this._events)\n    return this;\n\n  // not listening for removeListener, no need to emit\n  if (!this._events.removeListener) {\n    if (arguments.length === 0)\n      this._events = {};\n    else if (this._events[type])\n      delete this._events[type];\n    return this;\n  }\n\n  // emit removeListener for all listeners on all events\n  if (arguments.length === 0) {\n    for (key in this._events) {\n      if (key === 'removeListener') continue;\n      this.removeAllListeners(key);\n    }\n    this.removeAllListeners('removeListener');\n    this._events = {};\n    return this;\n  }\n\n  listeners = this._events[type];\n\n  if (isFunction(listeners)) {\n    this.removeListener(type, listeners);\n  } else {\n    // LIFO order\n    while (listeners.length)\n      this.removeListener(type, listeners[listeners.length - 1]);\n  }\n  delete this._events[type];\n\n  return this;\n};\n\nEventEmitter.prototype.listeners = function(type) {\n  var ret;\n  if (!this._events || !this._events[type])\n    ret = [];\n  else if (isFunction(this._events[type]))\n    ret = [this._events[type]];\n  else\n    ret = this._events[type].slice();\n  return ret;\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  var ret;\n  if (!emitter._events || !emitter._events[type])\n    ret = 0;\n  else if (isFunction(emitter._events[type]))\n    ret = 1;\n  else\n    ret = emitter._events[type].length;\n  return ret;\n};\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\n"
  ]
}